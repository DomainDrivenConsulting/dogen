<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1404px" preserveAspectRatio="none" style="width:1014px;height:1404px;" version="1.1" viewBox="0 0 1014 1404" width="1014px" zoomAndPan="magnify"><defs><filter height="300%" id="f1wk1w9dzt5jpt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M6,8 L6,1152.9609 L558,1152.9609 L558,18 L548,8 L6,8 " fill="#FBFB77" filter="url(#f1wk1w9dzt5jpt)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M548,8 L548,18 L558,18 L548,8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="25.0669"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="427" x="12" y="40.1997">Codec.Dia is a unidirectional transformation model that transforms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="12" y="55.3325">a Dia @e diagram into an codec @e model.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="70.4653"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="492" x="12" y="85.5981">By that we mean that it is a model designed to transform a representation of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="476" x="12" y="100.731">a user model in Dia diagram format to its counterpart in the codec format,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="531" x="12" y="115.8638">taking into account any special masd meta-data which the user may have encoded</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="522" x="12" y="130.9966">into the Dia diagram. Note that the Dia diagram format contains a representation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="457" x="12" y="146.1294">of UML. We pass that meta-data straight through into the codec model,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="12" y="161.2622">without any further processing.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="176.395"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="12" y="191.5278">@section codec_dia_0 Dia diagrams as DAGs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="206.6606"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="467" x="12" y="221.7935">Dia diagrams are made up of @e objects, identified by IDs. These objects</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="470" x="12" y="236.9263">contain a number of UML model elements, which we are interested in. For</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="12" y="252.0591">instance:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="267.1919"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="12" y="282.3247">@li UML class</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="12" y="297.4575">@li UML generalisation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="12" y="312.5903">@li UML notes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="327.7231"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="444" x="12" y="342.856">and so on. Each of these objects will contribute to am codec element.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="449" x="12" y="357.9888">However, we need to be aware of object containment - e.g. if a class is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="500" x="12" y="373.1216">contained in a package. This is because the codec element names are scoped</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="491" x="12" y="388.2544">by the packages. So, to make our life easier we created a DAG of Dia objects</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="498" x="12" y="403.3872">that provides us with the information in dependency order. That is, we process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="519" x="12" y="418.52">dia objects in such a way that when a dependency exists, we know that the object</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="525" x="12" y="433.6528">in which we depend on has already been processed. Please note that to ensure no</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="487" x="12" y="448.7856">cycles we had to ignore some of the UML objects such as UML aggregation -</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="441" x="12" y="463.9185">but fortunately, these objects do not provide sufficient information as</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="491" x="12" y="479.0513">required for dogen transformations, so not much was lost. Instead, one must</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="12" y="494.1841">manually declare attributes in a class.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="509.3169"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="361" x="12" y="524.4497">See @ref grapher for details on how the the DAG is built.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="539.5825"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="12" y="554.7153">@section codec_dia_1 Intermediate processing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="569.8481"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="464" x="12" y="584.981">To make the code easier to read and maintain, we created a numeber of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="419" x="12" y="600.1138">intermediate stages between a Dia diagram and an codec model:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="615.2466"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="12" y="630.3794">@li Dia object -&gt; processed object -&gt; profile -&gt; codec element</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="645.5122"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="12" y="660.645">This may look a bit excessive at first glance, but it was done because</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="443" x="12" y="675.7778">the shape of the Dia objects is a bit too generic for our purposes, and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="437" x="12" y="690.9106">the resulting processing code was full of loops and look-ups. Instead,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="454" x="12" y="706.0435">we make the generic Dia object into a very concrete processed object -</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="446" x="12" y="721.1763">still preserving most of the semantics of Dia - and then from those we</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="425" x="12" y="736.3091">build a profile. A profile allows us to quickly scan for UML and masd</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="12" y="751.4419">type information without getting lost in the intricacies of the generic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="414" x="12" y="766.5747">Dia structure. With these in hand, the @ref transformer is able to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="446" x="12" y="781.7075">create the corresponding masd entity, and the transformation code is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="12" y="796.8403">not obscured.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="811.9731"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="12" y="827.106">@section codec_dia_2 Dia meta-data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="842.2388"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="12" y="857.3716">There are a couple of conventions on how to model in Dia that one</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="12" y="872.5044">needs to follow in order to comply with Dogen:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="887.6372"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="421" x="12" y="902.77">@li any public attribute in a class is automatically converted into a</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="432" x="12" y="917.9028">masd property rather than a member variable. This means that it is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="12" y="933.0356">expected that a getter and a setter will be generated.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="948.1685"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="441" x="12" y="963.3013">@li a number of stereotypes were added, as per the definitions in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="369" x="12" y="978.4341">MASD UML profile. For details, see the Dogen UML profile.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="993.5669"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="466" x="12" y="1008.6997">@li any type without any stereotype assumes a default stereotype, again</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="12" y="1023.8325">as per MASD UML profile.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="1038.9653"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="510" x="12" y="1054.0981">@li any UML Note with the marker #DOGEN masd.codec.dia.comment=true will</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="455" x="12" y="1069.231">be used as the documentation of the current package - or the model, if</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="438" x="12" y="1084.3638">place at the top-level. Only one such note is expected per containing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="12" y="1099.4966">entity.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="1114.6294"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="365" x="12" y="1129.7622">For details on the stereotypes see the MASD UML profile.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="16" y="1144.895"/><!--MD5=[48691ffdecf0bb84b50fe17624489db4]
class grapher--><rect fill="#FFFACD" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="grapher" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="593" y="553.5"/><rect fill="#FFFACD" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="593" y="553.5"/><ellipse cx="608" cy="572.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M610.9688,578.1094 Q610.3906,578.4063 609.75,578.5547 Q609.1094,578.7031 608.4063,578.7031 Q605.9063,578.7031 604.5859,577.0547 Q603.2656,575.4063 603.2656,572.2813 Q603.2656,569.1563 604.5859,567.5 Q605.9063,565.8438 608.4063,565.8438 Q609.1094,565.8438 609.7578,566 Q610.4063,566.1563 610.9688,566.4531 L610.9688,569.1719 Q610.3438,568.5938 609.75,568.3203 Q609.1563,568.0469 608.5313,568.0469 Q607.1875,568.0469 606.5,569.1172 Q605.8125,570.1875 605.8125,572.2813 Q605.8125,574.375 606.5,575.4453 Q607.1875,576.5156 608.5313,576.5156 Q609.1563,576.5156 609.75,576.2422 Q610.3438,575.9688 610.9688,575.3906 L610.9688,578.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="202" x="620" y="569.6387">«dogen::handcrafted::typeable»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="50" x="696" y="583.6074">grapher</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="594" x2="822" y1="591.4375" y2="591.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="594" x2="822" y1="599.4375" y2="599.4375"/><!--MD5=[51493b6577cae51e930d5f0ef0b9be70]
class graphing_error--><rect fill="#E8C2F8" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="graphing_error" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="858.5" y="553.5"/><rect fill="#E8C2F8" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="858.5" y="553.5"/><ellipse cx="873.5" cy="572.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M876.4688,578.1094 Q875.8906,578.4063 875.25,578.5547 Q874.6094,578.7031 873.9063,578.7031 Q871.4063,578.7031 870.0859,577.0547 Q868.7656,575.4063 868.7656,572.2813 Q868.7656,569.1563 870.0859,567.5 Q871.4063,565.8438 873.9063,565.8438 Q874.6094,565.8438 875.2578,566 Q875.9063,566.1563 876.4688,566.4531 L876.4688,569.1719 Q875.8438,568.5938 875.25,568.3203 Q874.6563,568.0469 874.0313,568.0469 Q872.6875,568.0469 872,569.1172 Q871.3125,570.1875 871.3125,572.2813 Q871.3125,574.375 872,575.4453 Q872.6875,576.5156 874.0313,576.5156 Q874.6563,576.5156 875.25,576.2422 Q875.8438,575.9688 876.4688,575.3906 L876.4688,578.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="885.5" y="569.6387">«masd::exception»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="897.5" y="583.6074">graphing_error</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="859.5" x2="1002.5" y1="591.4375" y2="591.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="859.5" x2="1002.5" y1="599.4375" y2="599.4375"/><!--MD5=[4ee9d126d0901dfa903f88c66be25600]
class building_error--><rect fill="#E8C2F8" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="building_error" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="209.5" y="1219.5"/><rect fill="#E8C2F8" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="145" x="209.5" y="1219.5"/><ellipse cx="224.5" cy="1238.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M227.4688,1244.1094 Q226.8906,1244.4063 226.25,1244.5547 Q225.6094,1244.7031 224.9063,1244.7031 Q222.4063,1244.7031 221.0859,1243.0547 Q219.7656,1241.4063 219.7656,1238.2813 Q219.7656,1235.1563 221.0859,1233.5 Q222.4063,1231.8438 224.9063,1231.8438 Q225.6094,1231.8438 226.2578,1232 Q226.9063,1232.1563 227.4688,1232.4531 L227.4688,1235.1719 Q226.8438,1234.5938 226.25,1234.3203 Q225.6563,1234.0469 225.0313,1234.0469 Q223.6875,1234.0469 223,1235.1172 Q222.3125,1236.1875 222.3125,1238.2813 Q222.3125,1240.375 223,1241.4453 Q223.6875,1242.5156 225.0313,1242.5156 Q225.6563,1242.5156 226.25,1242.2422 Q226.8438,1241.9688 227.4688,1241.3906 L227.4688,1244.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="117" x="236.5" y="1235.6387">«masd::exception»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="252" y="1249.6074">building_error</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="210.5" x2="353.5" y1="1257.4375" y2="1257.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="210.5" x2="353.5" y1="1265.4375" y2="1265.4375"/><!--MD5=[2bbca285c5998b88001867d52242bd59]
class visitor--><rect fill="#FFFACD" filter="url(#f1wk1w9dzt5jpt)" height="66.7422" id="visitor" style="stroke: #A80036; stroke-width: 1.5;" width="315" x="389.5" y="1213"/><rect fill="#FFFACD" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="315" x="389.5" y="1213"/><ellipse cx="404.5" cy="1231.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M407.4688,1237.6094 Q406.8906,1237.9063 406.25,1238.0547 Q405.6094,1238.2031 404.9063,1238.2031 Q402.4063,1238.2031 401.0859,1236.5547 Q399.7656,1234.9063 399.7656,1231.7813 Q399.7656,1228.6563 401.0859,1227 Q402.4063,1225.3438 404.9063,1225.3438 Q405.6094,1225.3438 406.2578,1225.5 Q406.9063,1225.6563 407.4688,1225.9531 L407.4688,1228.6719 Q406.8438,1228.0938 406.25,1227.8203 Q405.6563,1227.5469 405.0313,1227.5469 Q403.6875,1227.5469 403,1228.6172 Q402.3125,1229.6875 402.3125,1231.7813 Q402.3125,1233.875 403,1234.9453 Q403.6875,1236.0156 405.0313,1236.0156 Q405.6563,1236.0156 406.25,1235.7422 Q406.8438,1235.4688 407.4688,1234.8906 L407.4688,1237.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="287" x="416.5" y="1229.1387">«dogen::handcrafted::typeable::header_only»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="37" x="541.5" y="1243.1074">visitor</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="390.5" x2="703.5" y1="1250.9375" y2="1250.9375"/><ellipse cx="400.5" cy="1261.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="409.5" y="1265.1479">builder builder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="390.5" x2="703.5" y1="1271.7422" y2="1271.7422"/><!--MD5=[240e21b7cc4dfe0b0a0be7b0ae6adbaa]
class builder--><rect fill="#FFFACD" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="builder" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="740" y="1219.5"/><rect fill="#FFFACD" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="230" x="740" y="1219.5"/><ellipse cx="755" cy="1238.4688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M757.9688,1244.1094 Q757.3906,1244.4063 756.75,1244.5547 Q756.1094,1244.7031 755.4063,1244.7031 Q752.9063,1244.7031 751.5859,1243.0547 Q750.2656,1241.4063 750.2656,1238.2813 Q750.2656,1235.1563 751.5859,1233.5 Q752.9063,1231.8438 755.4063,1231.8438 Q756.1094,1231.8438 756.7578,1232 Q757.4063,1232.1563 757.9688,1232.4531 L757.9688,1235.1719 Q757.3438,1234.5938 756.75,1234.3203 Q756.1563,1234.0469 755.5313,1234.0469 Q754.1875,1234.0469 753.5,1235.1172 Q752.8125,1236.1875 752.8125,1238.2813 Q752.8125,1240.375 753.5,1241.4453 Q754.1875,1242.5156 755.5313,1242.5156 Q756.1563,1242.5156 756.75,1242.2422 Q757.3438,1241.9688 757.9688,1241.3906 L757.9688,1244.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="202" x="767" y="1235.6387">«dogen::handcrafted::typeable»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="846.5" y="1249.6074">builder</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="741" x2="969" y1="1257.4375" y2="1257.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="741" x2="969" y1="1265.4375" y2="1265.4375"/><!--MD5=[4520fda4e10d4d791ce48fe025810cd4]
class main--><rect fill="#DDA9F3" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="main" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="145.5" y="1340"/><rect fill="#DDA9F3" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="273" x="145.5" y="1340"/><ellipse cx="160.5" cy="1358.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M163.4688,1364.6094 Q162.8906,1364.9063 162.25,1365.0547 Q161.6094,1365.2031 160.9063,1365.2031 Q158.4063,1365.2031 157.0859,1363.5547 Q155.7656,1361.9063 155.7656,1358.7813 Q155.7656,1355.6563 157.0859,1354 Q158.4063,1352.3438 160.9063,1352.3438 Q161.6094,1352.3438 162.2578,1352.5 Q162.9063,1352.6563 163.4688,1352.9531 L163.4688,1355.6719 Q162.8438,1355.0938 162.25,1354.8203 Q161.6563,1354.5469 161.0313,1354.5469 Q159.6875,1354.5469 159,1355.6172 Q158.3125,1356.6875 158.3125,1358.7813 Q158.3125,1360.875 159,1361.9453 Q159.6875,1363.0156 161.0313,1363.0156 Q161.6563,1363.0156 162.25,1362.7422 Q162.8438,1362.4688 163.4688,1361.8906 L163.4688,1364.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="245" x="172.5" y="1356.1387">«masd::entry_point, dogen::untypable»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="30" x="280" y="1370.1074">main</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="417.5" y1="1377.9375" y2="1377.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="146.5" x2="417.5" y1="1385.9375" y2="1385.9375"/><!--MD5=[ba83386d426114557685538e96aa6f68]
class CMakeLists--><rect fill="#99CB99" filter="url(#f1wk1w9dzt5jpt)" height="53.9375" id="CMakeLists" style="stroke: #A80036; stroke-width: 1.5;" width="367" x="453.5" y="1340"/><rect fill="#99CB99" height="37.9375" style="stroke: #A80036; stroke-width: 1.5;" width="367" x="453.5" y="1340"/><ellipse cx="468.5" cy="1358.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M471.4688,1364.6094 Q470.8906,1364.9063 470.25,1365.0547 Q469.6094,1365.2031 468.9063,1365.2031 Q466.4063,1365.2031 465.0859,1363.5547 Q463.7656,1361.9063 463.7656,1358.7813 Q463.7656,1355.6563 465.0859,1354 Q466.4063,1352.3438 468.9063,1352.3438 Q469.6094,1352.3438 470.2578,1352.5 Q470.9063,1352.6563 471.4688,1352.9531 L471.4688,1355.6719 Q470.8438,1355.0938 470.25,1354.8203 Q469.6563,1354.5469 469.0313,1354.5469 Q467.6875,1354.5469 467,1355.6172 Q466.3125,1356.6875 466.3125,1358.7813 Q466.3125,1360.875 467,1361.9453 Q467.6875,1363.0156 469.0313,1363.0156 Q469.6563,1363.0156 470.25,1362.7422 Q470.8438,1362.4688 471.4688,1361.8906 L471.4688,1364.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="339" x="480.5" y="1356.1387">«masd::build::cmakelists, dogen::handcrafted::cmake»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="615.5" y="1370.1074">CMakeLists</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="819.5" y1="1377.9375" y2="1377.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.5" x2="819.5" y1="1385.9375" y2="1385.9375"/><!--MD5=[69e45404a2464c61f1b67840bf201551]
link N1 to grapher--><!--MD5=[6243af3c9888810c8855f9c63c849a18]
link grapher to graphing_error--><!--MD5=[fb7404e38f54ba92acc63ed87e653e45]
link N1 to building_error--><!--MD5=[fa3dfd252825d960897aa30b38d86e40]
link building_error to visitor--><!--MD5=[38cf5bc52db512376a5a87be824543ee]
link visitor to builder--><!--MD5=[c1ef308baea0c08e0c2936853784144e]
link building_error to main--><!--MD5=[367f0f7b9da0cd9a39366f1aecb3ca6d]
link main to CMakeLists--><!--MD5=[266afc5ff368a04e7c1fe1fb83315873]
@startuml
set namespaceSeparator ::
note as N1

Codec.Dia is a unidirectional transformation model that transforms
a Dia @e diagram into an codec @e model.

By that we mean that it is a model designed to transform a representation of
a user model in Dia diagram format to its counterpart in the codec format,
taking into account any special masd meta-data which the user may have encoded
into the Dia diagram. Note that the Dia diagram format contains a representation
of UML. We pass that meta-data straight through into the codec model,
without any further processing.

@section codec_dia_0 Dia diagrams as DAGs

Dia diagrams are made up of @e objects, identified by IDs. These objects
contain a number of UML model elements, which we are interested in. For
instance:

@li UML class
@li UML generalisation
@li UML notes

and so on. Each of these objects will contribute to am codec element.
However, we need to be aware of object containment - e.g. if a class is
contained in a package. This is because the codec element names are scoped
by the packages. So, to make our life easier we created a DAG of Dia objects
that provides us with the information in dependency order. That is, we process
dia objects in such a way that when a dependency exists, we know that the object
in which we depend on has already been processed. Please note that to ensure no
cycles we had to ignore some of the UML objects such as UML aggregation -
but fortunately, these objects do not provide sufficient information as
required for dogen transformations, so not much was lost. Instead, one must
manually declare attributes in a class.

See @ref grapher for details on how the the DAG is built.

@section codec_dia_1 Intermediate processing

To make the code easier to read and maintain, we created a numeber of
intermediate stages between a Dia diagram and an codec model:

@li Dia object -> processed object -> profile -> codec element

This may look a bit excessive at first glance, but it was done because
the shape of the Dia objects is a bit too generic for our purposes, and
the resulting processing code was full of loops and look-ups. Instead,
we make the generic Dia object into a very concrete processed object -
still preserving most of the semantics of Dia - and then from those we
build a profile. A profile allows us to quickly scan for UML and masd
type information without getting lost in the intricacies of the generic
Dia structure. With these in hand, the @ref transformer is able to
create the corresponding masd entity, and the transformation code is
not obscured.

@section codec_dia_2 Dia meta-data

There are a couple of conventions on how to model in Dia that one
needs to follow in order to comply with Dogen:

@li any public attribute in a class is automatically converted into a
masd property rather than a member variable. This means that it is
expected that a getter and a setter will be generated.

@li a number of stereotypes were added, as per the definitions in the
MASD UML profile. For details, see the Dogen UML profile.

@li any type without any stereotype assumes a default stereotype, again
as per MASD UML profile.

@li any UML Note with the marker #DOGEN masd.codec.dia.comment=true will
be used as the documentation of the current package - or the model, if
place at the top-level. Only one such note is expected per containing
entity.

For details on the stereotypes see the MASD UML profile.

end note

class grapher <<dogen::handcrafted::typeable>> #FFFACD {
}

class graphing_error <<masd::exception>> #E8C2F8 {
}

class building_error <<masd::exception>> #E8C2F8 {
}

class visitor <<dogen::handcrafted::typeable::header_only>> #FFFACD {
        +{field} builder builder
}

class builder <<dogen::handcrafted::typeable>> #FFFACD {
}

class main <<masd::entry_point, dogen::untypable>> #DDA9F3 {
}

class CMakeLists <<masd::build::cmakelists, dogen::handcrafted::cmake>> #99CB99 {
}

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b03-2~deb9u1-b03
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>