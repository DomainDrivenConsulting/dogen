diff --git a/diagrams/yarn.dia b/diagrams/yarn.dia
index b3dbad3..9cd45ac 100644
--- a/diagrams/yarn.dia
+++ b/diagrams/yarn.dia
@@ -7914,13 +7914,13 @@ etc.#</dia:string>
     </dia:object>
     <dia:object type="UML - Class" version="0" id="O72">
       <dia:attribute name="obj_pos">
-        <dia:point val="44,89"/>
+        <dia:point val="48,89"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="43.95,88.95;72.655,92.65"/>
+        <dia:rectangle val="47.95,88.95;76.655,92.65"/>
       </dia:attribute>
       <dia:attribute name="elem_corner">
-        <dia:point val="44,89"/>
+        <dia:point val="48,89"/>
       </dia:attribute>
       <dia:attribute name="elem_width">
         <dia:real val="28.605"/>
@@ -8236,19 +8236,19 @@ etc.#</dia:string>
         <dia:boolean val="false"/>
       </dia:attribute>
       <dia:attribute name="obj_pos">
-        <dia:point val="58.3025,89"/>
+        <dia:point val="62.3025,89"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="50.95,74.95;59.0525,89.8"/>
+        <dia:rectangle val="54.95,74.95;63.0525,89.8"/>
       </dia:attribute>
       <dia:attribute name="meta">
         <dia:composite type="dict"/>
       </dia:attribute>
       <dia:attribute name="orth_points">
-        <dia:point val="58.3025,89"/>
-        <dia:point val="58.3025,81"/>
-        <dia:point val="51,81"/>
-        <dia:point val="51,75"/>
+        <dia:point val="62.3025,89"/>
+        <dia:point val="62.3025,81"/>
+        <dia:point val="55,81"/>
+        <dia:point val="55,75"/>
       </dia:attribute>
       <dia:attribute name="orth_orient">
         <dia:enum val="1"/>
@@ -11886,7 +11886,7 @@ from inputs and generates yarn types off of them.#</dia:string>
         <dia:point val="148.06,55.2"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="71.085,54.45;148.81,81.05"/>
+        <dia:rectangle val="78.165,54.45;148.81,81.05"/>
       </dia:attribute>
       <dia:attribute name="meta">
         <dia:composite type="dict"/>
@@ -11894,8 +11894,8 @@ from inputs and generates yarn types off of them.#</dia:string>
       <dia:attribute name="orth_points">
         <dia:point val="148.06,55.2"/>
         <dia:point val="148.06,81"/>
-        <dia:point val="71.135,81"/>
-        <dia:point val="71.135,75"/>
+        <dia:point val="78.215,81"/>
+        <dia:point val="78.215,75"/>
       </dia:attribute>
       <dia:attribute name="orth_orient">
         <dia:enum val="1"/>
@@ -14262,16 +14262,16 @@ Leaves are types concrete types which have a parent.#</dia:string>
     </dia:object>
     <dia:object type="UML - Class" version="0" id="O124">
       <dia:attribute name="obj_pos">
-        <dia:point val="51,65"/>
+        <dia:point val="55,65"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="50.95,64.95;71.185,75.05"/>
+        <dia:rectangle val="54.95,64.95;78.265,75.05"/>
       </dia:attribute>
       <dia:attribute name="elem_corner">
-        <dia:point val="51,65"/>
+        <dia:point val="55,65"/>
       </dia:attribute>
       <dia:attribute name="elem_width">
-        <dia:real val="20.134999999999998"/>
+        <dia:real val="23.215"/>
       </dia:attribute>
       <dia:attribute name="elem_height">
         <dia:real val="10"/>
@@ -14417,7 +14417,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
             <dia:string>#modules#</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::unordered_map&lt;name,module&gt;#</dia:string>
+            <dia:string>#std::unordered_map&lt;std::string, module&gt;#</dia:string>
           </dia:attribute>
           <dia:attribute name="value">
             <dia:string>##</dia:string>
@@ -14440,7 +14440,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
             <dia:string>#concepts#</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::unordered_map&lt;name,concept&gt;#</dia:string>
+            <dia:string>#std::unordered_map&lt;std::string, concept&gt;#</dia:string>
           </dia:attribute>
           <dia:attribute name="value">
             <dia:string>##</dia:string>
@@ -14463,7 +14463,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
             <dia:string>#primitives#</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::unordered_map&lt;name,primitive&gt;#</dia:string>
+            <dia:string>#std::unordered_map&lt;std::string, primitive&gt;#</dia:string>
           </dia:attribute>
           <dia:attribute name="value">
             <dia:string>##</dia:string>
@@ -14486,7 +14486,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
             <dia:string>#enumerations#</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::unordered_map&lt;name,enumeration&gt;#</dia:string>
+            <dia:string>#std::unordered_map&lt;std::string, enumeration&gt;#</dia:string>
           </dia:attribute>
           <dia:attribute name="value">
             <dia:string>##</dia:string>
@@ -14509,7 +14509,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
             <dia:string>#objects#</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::unordered_map&lt;name,object&gt;#</dia:string>
+            <dia:string>#std::unordered_map&lt;std::string, object&gt;#</dia:string>
           </dia:attribute>
           <dia:attribute name="value">
             <dia:string>##</dia:string>
@@ -14780,7 +14780,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
         <dia:point val="42.21,53.6"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="41.46,52.85;51.2,65.8"/>
+        <dia:rectangle val="41.46,52.85;55.2,65.8"/>
       </dia:attribute>
       <dia:attribute name="meta">
         <dia:composite type="dict"/>
@@ -14788,8 +14788,8 @@ Leaves are types concrete types which have a parent.#</dia:string>
       <dia:attribute name="orth_points">
         <dia:point val="42.21,53.6"/>
         <dia:point val="42.21,60"/>
-        <dia:point val="51,60"/>
-        <dia:point val="51,65"/>
+        <dia:point val="55,60"/>
+        <dia:point val="55,65"/>
       </dia:attribute>
       <dia:attribute name="orth_orient">
         <dia:enum val="1"/>
@@ -15293,7 +15293,7 @@ Leaves are types concrete types which have a parent.#</dia:string>
         <dia:point val="74.565,53"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="70.385,52.95;74.765,65.8"/>
+        <dia:rectangle val="74.515,52.95;78.965,65.8"/>
       </dia:attribute>
       <dia:attribute name="meta">
         <dia:composite type="dict"/>
@@ -15301,8 +15301,8 @@ Leaves are types concrete types which have a parent.#</dia:string>
       <dia:attribute name="orth_points">
         <dia:point val="74.565,53"/>
         <dia:point val="74.565,60"/>
-        <dia:point val="71.135,60"/>
-        <dia:point val="71.135,65"/>
+        <dia:point val="78.215,60"/>
+        <dia:point val="78.215,65"/>
       </dia:attribute>
       <dia:attribute name="orth_orient">
         <dia:enum val="1"/>
diff --git a/doc/agile/sprint_backlog_75.org b/doc/agile/sprint_backlog_75.org
index 697316b..398b489 100644
--- a/doc/agile/sprint_backlog_75.org
+++ b/doc/agile/sprint_backlog_75.org
@@ -15,15 +15,16 @@
 ** Active
 
 #+begin: clocktable :maxlevel 3 :scope subtree :indent nil :emphasize nil :scope file :narrow 75
-#+CAPTION: Clock summary at [2015-11-23 Mon 23:02]
+#+CAPTION: Clock summary at [2015-11-24 Tue 23:12]
 | <75>                                                                        |        |      |      |
 | Headline                                                                    | Time   |      |      |
 |-----------------------------------------------------------------------------+--------+------+------|
-| *Total time*                                                                | *0:17* |      |      |
+| *Total time*                                                                | *2:52* |      |      |
 |-----------------------------------------------------------------------------+--------+------+------|
-| Stories                                                                     | 0:17   |      |      |
-| Active                                                                      |        | 0:17 |      |
+| Stories                                                                     | 2:52   |      |      |
+| Active                                                                      |        | 2:52 |      |
 | STARTED Sprint and product backlog grooming                                 |        |      | 0:17 |
+| STARTED Use qualified name as the key of the intermediate model container   |        |      | 2:35 |
 #+end:
 
 *** STARTED Sprint and product backlog grooming                       :story:
@@ -31,7 +32,9 @@
 
 Updates to sprint and product backlog.
 
-*** Use qualified name as the key of the intermediate model container :story:
+*** STARTED Use qualified name as the key of the intermediate model container :story:
+    CLOCK: [2015-11-24 Tue 21:01]--[2015-11-24 Tue 23:12] =>  2:11
+    CLOCK: [2015-11-23 Mon 23:03]--[2015-11-23 Mon 23:27] =>  0:24
 
 We are using name as the key for the intermediate model container, but
 once we have proper qualified name support everywhere, there is no
@@ -40,6 +43,14 @@ the logic in the =cpp= containers as there the name is used for
 processing reasons - we'd end up having to have the name as the value
 instead.
 
+Notes:
+
+- for some reason containing module for top-level packages is empty,
+  even though it appears to be expanded correctly. This will cause the
+  identifier parser to build the name incorrectly.
+- we are not performing containment correctly for types inside a
+  package (e.g. =shape_types=).
+
 *** Remove =is_root_parent_visitable=                                 :story:
 
 We should just use the =visits=, =visited_by=, etc relationships. The
diff --git a/projects/cpp/src/types/formattables/factory.cpp b/projects/cpp/src/types/formattables/factory.cpp
index 2385a9a..d880952 100644
--- a/projects/cpp/src/types/formattables/factory.cpp
+++ b/projects/cpp/src/types/formattables/factory.cpp
@@ -298,10 +298,10 @@ make_includers(
         if (n.location().model_module_path().empty() && n.simple().empty())
             continue;
 
-        if (m.concepts().find(n) != m.concepts().end())
+        if (m.concepts().find(n.qualified()) != m.concepts().end())
             continue;
 
-        if (m.primitives().find(n) != m.primitives().end())
+        if (m.primitives().find(n.qualified()) != m.primitives().end())
             continue;
 
         for (const auto& fmt_pair : n_pair.second) {
@@ -313,7 +313,7 @@ make_includers(
 
             const auto is_types(boost::starts_with(fn, "cpp.types."));
             if (!is_types) {
-                const auto j(m.objects().find(n));
+                const auto j(m.objects().find(n.qualified()));
                 using yarn::object_types;
                 if (j  != m.objects().end()) {
                     const auto ot(j->second.object_type());
@@ -321,11 +321,11 @@ make_includers(
                         continue;
                 }
 
-                const auto i(m.modules().find(n));
+                const auto i(m.modules().find(n.qualified()));
                 if (i != m.modules().end())
                         continue;
             } else {
-                const auto i(m.modules().find(n));
+                const auto i(m.modules().find(n.qualified()));
                 if (i != m.modules().end()) {
                     if (i->second.documentation().empty())
                         continue;
diff --git a/projects/cpp/src/types/formattables/path_derivatives_factory.cpp b/projects/cpp/src/types/formattables/path_derivatives_factory.cpp
index 81a6411..98ab40d 100644
--- a/projects/cpp/src/types/formattables/path_derivatives_factory.cpp
+++ b/projects/cpp/src/types/formattables/path_derivatives_factory.cpp
@@ -84,7 +84,7 @@ make_inclusion_path(const settings::path_settings& ps,
      * names to the directories.
      */
     if (n != model_.name()) {
-        const auto i(model_.modules().find(n));
+        const auto i(model_.modules().find(n.qualified()));
         if (i != model_.modules().end())
             r /= n.simple();
     }
diff --git a/projects/cpp/src/types/formattables/transformer.cpp b/projects/cpp/src/types/formattables/transformer.cpp
index 3500b65..c198ccd 100644
--- a/projects/cpp/src/types/formattables/transformer.cpp
+++ b/projects/cpp/src/types/formattables/transformer.cpp
@@ -241,11 +241,11 @@ void transformer::to_nested_type_info(const yarn::nested_name& nn,
     nti.name(qualified_name);
     nti.namespaces(b.namespace_list(model_, n));
 
-    const auto i(model_.enumerations().find(n));
+    const auto i(model_.enumerations().find(n.qualified()));
     const bool is_enumeration(i != model_.enumerations().end());
     nti.is_enumeration(is_enumeration);
 
-    const auto j(model_.primitives().find(n));
+    const auto j(model_.primitives().find(n.qualified()));
     const bool is_primitive(j != model_.primitives().end());
     nti.is_primitive(is_primitive);
 
@@ -266,7 +266,7 @@ void transformer::to_nested_type_info(const yarn::nested_name& nn,
     nti.is_time_duration(is_time_duration(nti.name()));
     nti.is_ptree(is_ptree(nti.name()));
 
-    const auto k(model_.objects().find(n));
+    const auto k(model_.objects().find(n.qualified()));
     if (k != model_.objects().end()) {
         const auto ot(k->second.object_type());
         using yarn::object_types;
diff --git a/projects/cpp/src/types/workflow.cpp b/projects/cpp/src/types/workflow.cpp
index 0da0dcb..c102b52 100644
--- a/projects/cpp/src/types/workflow.cpp
+++ b/projects/cpp/src/types/workflow.cpp
@@ -50,7 +50,7 @@ dynamic::object workflow::obtain_root_object(
     const yarn::intermediate_model& m) const {
     BOOST_LOG_SEV(lg, debug) << "Obtaining model's root object.";
 
-    const auto i(m.modules().find(m.name()));
+    const auto i(m.modules().find(m.name().qualified()));
     if (i == m.modules().end()) {
         const auto qn(m.name().qualified());
         BOOST_LOG_SEV(lg, error) << model_module_not_found << qn;
diff --git a/projects/yarn/include/dogen/yarn/types/intermediate_model.hpp b/projects/yarn/include/dogen/yarn/types/intermediate_model.hpp
index b2f20a8..0952378 100644
--- a/projects/yarn/include/dogen/yarn/types/intermediate_model.hpp
+++ b/projects/yarn/include/dogen/yarn/types/intermediate_model.hpp
@@ -71,11 +71,11 @@ public:
         const boost::optional<dogen::yarn::name>& containing_module,
         const std::unordered_map<dogen::yarn::name, dogen::yarn::origin_types>& references,
         const std::unordered_set<dogen::yarn::name>& leaves,
-        const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& modules,
-        const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& concepts,
-        const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& primitives,
-        const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& enumerations,
-        const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& objects,
+        const std::unordered_map<std::string, dogen::yarn::module>& modules,
+        const std::unordered_map<std::string, dogen::yarn::concept>& concepts,
+        const std::unordered_map<std::string, dogen::yarn::primitive>& primitives,
+        const std::unordered_map<std::string, dogen::yarn::enumeration>& enumerations,
+        const std::unordered_map<std::string, dogen::yarn::object>& objects,
         const bool is_target,
         const bool has_generatable_types);
 
@@ -192,50 +192,50 @@ public:
      * @brief Modules contained in the intermediate model.
      */
     /**@{*/
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& modules() const;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::module>& modules();
-    void modules(const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& v);
-    void modules(const std::unordered_map<dogen::yarn::name, dogen::yarn::module>&& v);
+    const std::unordered_map<std::string, dogen::yarn::module>& modules() const;
+    std::unordered_map<std::string, dogen::yarn::module>& modules();
+    void modules(const std::unordered_map<std::string, dogen::yarn::module>& v);
+    void modules(const std::unordered_map<std::string, dogen::yarn::module>&& v);
     /**@}*/
 
     /**
      * @brief All the concepts available in this intermediate model.
      */
     /**@{*/
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& concepts() const;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& concepts();
-    void concepts(const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& v);
-    void concepts(const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>&& v);
+    const std::unordered_map<std::string, dogen::yarn::concept>& concepts() const;
+    std::unordered_map<std::string, dogen::yarn::concept>& concepts();
+    void concepts(const std::unordered_map<std::string, dogen::yarn::concept>& v);
+    void concepts(const std::unordered_map<std::string, dogen::yarn::concept>&& v);
     /**@}*/
 
     /**
      * @brief All primitives contained in this intermediate model.
      */
     /**@{*/
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& primitives() const;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& primitives();
-    void primitives(const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& v);
-    void primitives(const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>&& v);
+    const std::unordered_map<std::string, dogen::yarn::primitive>& primitives() const;
+    std::unordered_map<std::string, dogen::yarn::primitive>& primitives();
+    void primitives(const std::unordered_map<std::string, dogen::yarn::primitive>& v);
+    void primitives(const std::unordered_map<std::string, dogen::yarn::primitive>&& v);
     /**@}*/
 
     /**
      * @brief All enumerations contained in this intermediate model.
      */
     /**@{*/
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& enumerations() const;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& enumerations();
-    void enumerations(const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& v);
-    void enumerations(const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>&& v);
+    const std::unordered_map<std::string, dogen::yarn::enumeration>& enumerations() const;
+    std::unordered_map<std::string, dogen::yarn::enumeration>& enumerations();
+    void enumerations(const std::unordered_map<std::string, dogen::yarn::enumeration>& v);
+    void enumerations(const std::unordered_map<std::string, dogen::yarn::enumeration>&& v);
     /**@}*/
 
     /**
      * @brief All objects contained in this intermediate model.
      */
     /**@{*/
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& objects() const;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::object>& objects();
-    void objects(const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& v);
-    void objects(const std::unordered_map<dogen::yarn::name, dogen::yarn::object>&& v);
+    const std::unordered_map<std::string, dogen::yarn::object>& objects() const;
+    std::unordered_map<std::string, dogen::yarn::object>& objects();
+    void objects(const std::unordered_map<std::string, dogen::yarn::object>& v);
+    void objects(const std::unordered_map<std::string, dogen::yarn::object>&& v);
     /**@}*/
 
     /**
@@ -275,11 +275,11 @@ private:
     boost::optional<dogen::yarn::name> containing_module_;
     std::unordered_map<dogen::yarn::name, dogen::yarn::origin_types> references_;
     std::unordered_set<dogen::yarn::name> leaves_;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::module> modules_;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::concept> concepts_;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::primitive> primitives_;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration> enumerations_;
-    std::unordered_map<dogen::yarn::name, dogen::yarn::object> objects_;
+    std::unordered_map<std::string, dogen::yarn::module> modules_;
+    std::unordered_map<std::string, dogen::yarn::concept> concepts_;
+    std::unordered_map<std::string, dogen::yarn::primitive> primitives_;
+    std::unordered_map<std::string, dogen::yarn::enumeration> enumerations_;
+    std::unordered_map<std::string, dogen::yarn::object> objects_;
     bool is_target_;
     bool has_generatable_types_;
 };
diff --git a/projects/yarn/include/dogen/yarn/types/merger.hpp b/projects/yarn/include/dogen/yarn/types/merger.hpp
index 9d1d582..1c84d14 100644
--- a/projects/yarn/include/dogen/yarn/types/merger.hpp
+++ b/projects/yarn/include/dogen/yarn/types/merger.hpp
@@ -90,11 +90,12 @@ private:
 
 private:
     /**
-     * @brief Ensure the qualified name is consistent.
+     * @brief Ensure there is consistency between model name, key and
+     * value.
      *
      * @note should be moved to validator.
      */
-    void check_name(const name& model_name, const name& key,
+    void check_name(const name& model_name, const std::string& key,
         const name& value, const bool in_global_namespace) const;
 
     /**
diff --git a/projects/yarn/spec/association_indexer_spec.cpp b/projects/yarn/spec/association_indexer_spec.cpp
index 47be5d0..9af3d2b 100644
--- a/projects/yarn/spec/association_indexer_spec.cpp
+++ b/projects/yarn/spec/association_indexer_spec.cpp
@@ -146,8 +146,8 @@ BOOST_AUTO_TEST_CASE(model_with_more_than_one_property_of_the_same_type_results_
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(ra));
         if (factory.is_type_name_n(0, n)) {
@@ -184,8 +184,8 @@ BOOST_AUTO_TEST_CASE(model_with_object_with_multiple_properties_of_different_typ
     bool found0(false), found1(false), found3(false);
     BOOST_REQUIRE(m.objects().size() == 5);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(ra));
         if (factory.is_type_name_n(0, n)) {
@@ -254,8 +254,8 @@ BOOST_AUTO_TEST_CASE(model_with_object_with_multiple_properties_of_different_typ
     bool found0(false), found1(false), found3(false);
     BOOST_REQUIRE(m.objects().size() == 5);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(ra));
         if (factory.is_type_name_n(0, n)) {
@@ -322,8 +322,8 @@ BOOST_AUTO_TEST_CASE(object_with_unsigned_int_property_results_in_expected_indic
 
     BOOST_REQUIRE(m.objects().size() == 1);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto ra(relationship_types::regular_associations);
@@ -358,8 +358,8 @@ BOOST_AUTO_TEST_CASE(object_with_bool_property_results_in_expected_indices) {
 
     BOOST_REQUIRE(m.objects().size() == 1);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto ra(relationship_types::regular_associations);
@@ -391,8 +391,8 @@ BOOST_AUTO_TEST_CASE(object_with_object_property_results_in_expected_indices) {
     ind.index(m);
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto ra(relationship_types::regular_associations);
@@ -444,8 +444,8 @@ BOOST_AUTO_TEST_CASE(object_with_std_pair_property_results_in_expected_indices)
     bool found(false);
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto ra(relationship_types::regular_associations);
@@ -485,10 +485,10 @@ BOOST_AUTO_TEST_CASE(object_with_boost_variant_property_results_in_expected_indi
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
-        if (factory.is_type_name_n(0, pair.first)) {
+        if (factory.is_type_name_n(0, n)) {
             found = true;
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
 
@@ -535,8 +535,8 @@ BOOST_AUTO_TEST_CASE(object_with_std_string_property_results_in_expected_indices
     bool found(false);
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto ra(relationship_types::regular_associations);
@@ -572,10 +572,10 @@ BOOST_AUTO_TEST_CASE(object_with_boost_shared_ptr_property_results_in_expected_i
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
-        if (factory.is_type_name_n(0, pair.first)) {
+        if (factory.is_type_name_n(0, n)) {
             found = true;
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
 
@@ -611,10 +611,10 @@ BOOST_AUTO_TEST_CASE(object_with_both_regular_and_weak_associations_results_in_e
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
-        if (factory.is_type_name_n(0, pair.first)) {
+        if (factory.is_type_name_n(0, n)) {
             found = true;
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
 
diff --git a/projects/yarn/spec/concept_indexer_spec.cpp b/projects/yarn/spec/concept_indexer_spec.cpp
index 44fb9cd..1bddb72 100644
--- a/projects/yarn/spec/concept_indexer_spec.cpp
+++ b/projects/yarn/spec/concept_indexer_spec.cpp
@@ -156,8 +156,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
     BOOST_LOG_SEV(lg, debug) << "before indexing: " << m;
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(mc));
         BOOST_REQUIRE(i != o.relationships().end());
@@ -176,8 +176,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
 
     BOOST_REQUIRE(m.concepts().size() == 2);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n))
             BOOST_REQUIRE(c.refines().empty());
@@ -193,8 +193,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.refines().empty());
@@ -206,8 +206,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         const auto i(o.relationships().find(mc));
         BOOST_REQUIRE(i != o.relationships().end());
@@ -232,8 +232,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
     BOOST_LOG_SEV(lg, debug) << "before indexing: " << m;
     BOOST_REQUIRE(m.objects().size() == 3);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(mc));
         BOOST_REQUIRE(i != o.relationships().end());
@@ -255,8 +255,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
 
     BOOST_REQUIRE(m.concepts().size() == 3);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n))
             BOOST_REQUIRE(c.refines().empty());
@@ -275,8 +275,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.refines().empty());
@@ -290,8 +290,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
 
     BOOST_REQUIRE(m.objects().size() == 3);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         const auto i(o.relationships().find(mc));
         BOOST_REQUIRE(i != o.relationships().end());
@@ -318,8 +318,8 @@ BOOST_AUTO_TEST_CASE(model_with_diamond_concept_inheritance_results_in_expected_
     const auto par(relationship_types::parents);
     BOOST_REQUIRE(m.objects().size() == 1);
     {
-        const auto& n(m.objects().begin()->first);
         const auto& o(m.objects().begin()->second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(0, n)) {
 
@@ -336,18 +336,18 @@ BOOST_AUTO_TEST_CASE(model_with_diamond_concept_inheritance_results_in_expected_
 
     BOOST_REQUIRE(m.concepts().size() == 4);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
-        if (factory.is_concept_name_n(0, n))
+        if (factory.is_concept_name_n(0, c.name()))
             BOOST_REQUIRE(c.refines().empty());
-        else if (factory.is_concept_name_n(1, n)) {
+        else if (factory.is_concept_name_n(1, c.name())) {
             BOOST_REQUIRE(c.refines().size() == 1);
             BOOST_REQUIRE(factory.is_concept_name_n(0, c.refines().front()));
-        } else if (factory.is_concept_name_n(2, n)) {
+        } else if (factory.is_concept_name_n(2, c.name())) {
             BOOST_REQUIRE(c.refines().size() == 1);
             BOOST_REQUIRE(factory.is_concept_name_n(0, c.refines().front()));
-        } else if (factory.is_concept_name_n(3, n)) {
+        } else if (factory.is_concept_name_n(3, c.name())) {
             BOOST_REQUIRE(c.refines().size() == 2);
             BOOST_REQUIRE(
                 factory.is_concept_name_n(1, c.refines().front()) ||
@@ -364,18 +364,18 @@ BOOST_AUTO_TEST_CASE(model_with_diamond_concept_inheritance_results_in_expected_
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
     BOOST_CHECK(m.concepts().size() == 4);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
-        if (factory.is_concept_name_n(0, n)) {
+        if (factory.is_concept_name_n(0, c.name())) {
             BOOST_CHECK(c.refines().empty());
-        } else if (factory.is_concept_name_n(1, n)) {
+        } else if (factory.is_concept_name_n(1, c.name())) {
             BOOST_CHECK(c.refines().size() == 1);
             BOOST_REQUIRE(factory.is_concept_name_n(0, c.refines().front()));
-        } else if (factory.is_concept_name_n(2, n)) {
+        } else if (factory.is_concept_name_n(2, c.name())) {
             BOOST_CHECK(c.refines().size() == 1);
             BOOST_REQUIRE(factory.is_concept_name_n(0, c.refines().front()));
-        } else if (factory.is_concept_name_n(3, n)) {
+        } else if (factory.is_concept_name_n(3, c.name())) {
             BOOST_CHECK(c.refines().size() == 3);
             bool found_zero(false), found_one(false), found_two(false);
             for (const auto& n : c.refines()) {
@@ -392,8 +392,8 @@ BOOST_AUTO_TEST_CASE(model_with_diamond_concept_inheritance_results_in_expected_
 
     BOOST_REQUIRE(m.objects().size() == 1);
     {
-        const auto& n(m.objects().begin()->first);
         const auto& o(m.objects().begin()->second);
+        const auto& n(o.name());
 
         const auto i(o.relationships().find(mc));
         BOOST_REQUIRE(i != o.relationships().end());
@@ -444,8 +444,8 @@ BOOST_AUTO_TEST_CASE(model_containing_object_with_parent_that_models_concept_is_
 
     BOOST_REQUIRE(a.concepts().size() == 1);
     for (const auto& pair : a.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n))
             BOOST_REQUIRE(c.refines().empty());
@@ -459,8 +459,8 @@ BOOST_AUTO_TEST_CASE(model_containing_object_with_parent_that_models_concept_is_
 
     BOOST_REQUIRE(a.objects().size() == 2);
     for (const auto& pair : a.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(mc));
         if (factory.is_type_name_n(0, n)) {
@@ -492,8 +492,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_REQUIRE(m.concepts().size() == 2);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n))
             BOOST_REQUIRE(c.refines().empty());
@@ -510,8 +510,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(mc));
         if (factory.is_type_name_n(0, n)) {
@@ -535,8 +535,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_CHECK(m.concepts().size() == 2);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.refines().empty());
@@ -549,8 +549,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         auto i(o.relationships().find(mc));
         if (factory.is_type_name_n(0, n)) {
@@ -580,10 +580,10 @@ BOOST_AUTO_TEST_CASE(model_with_concept_that_refines_missing_concept_throws) {
     BOOST_REQUIRE(m.objects().empty());
     BOOST_REQUIRE(m.concepts().size() == 1);
     {
-        const auto& n(m.concepts().begin()->first);
         const auto& c(m.concepts().begin()->second);
+        const auto& n(c.name());
 
-        if (factory.is_concept_name_n(1, n)) {
+        if (factory.is_concept_name_n(1, c.name())) {
             BOOST_REQUIRE(c.refines().size() == 1);
             BOOST_REQUIRE(factory.is_concept_name_n(0, c.refines().front()));
         } else
@@ -605,9 +605,9 @@ BOOST_AUTO_TEST_CASE(model_with_object_that_models_missing_concept_throws) {
     BOOST_REQUIRE(m.concepts().empty());
     BOOST_REQUIRE(m.objects().size() == 1);
     {
-        const auto& n(m.objects().begin()->first);
+        const auto& n(m.objects().begin()->second.name());
         if (!factory.is_type_name_n(0, n))
-            BOOST_FAIL("Unexpected object: " << n.qualified());
+            BOOST_FAIL("Unexpected object: " << n);
 
         const auto& o(m.objects().begin()->second);
         using dogen::yarn::relationship_types;
@@ -636,16 +636,16 @@ BOOST_AUTO_TEST_CASE(model_with_object_with_missing_parent_throws) {
         const auto& n(m.concepts().begin()->first);
         const auto& c(m.concepts().begin()->second);
 
-        if (factory.is_concept_name_n(0, n))
+        if (factory.is_concept_name_n(0, c.name()))
             BOOST_REQUIRE(c.refines().empty());
         else
-            BOOST_FAIL("Unexpected object: " << n.qualified());
+            BOOST_FAIL("Unexpected object: " << n);
     }
 
     BOOST_REQUIRE(m.objects().size() == 1);
     {
-        const auto& n(m.objects().begin()->first);
         const auto& o(m.objects().begin()->second);
+        const auto& n(o.name());
 
         using dogen::yarn::relationship_types;
         const auto mc(relationship_types::modeled_concepts);
diff --git a/projects/yarn/spec/injector_spec.cpp b/projects/yarn/spec/injector_spec.cpp
index 613b0d1..52982f0 100644
--- a/projects/yarn/spec/injector_spec.cpp
+++ b/projects/yarn/spec/injector_spec.cpp
@@ -78,7 +78,7 @@ BOOST_AUTO_TEST_CASE(single_type_model_results_in_adding_only_global_module) {
     BOOST_CHECK(a.objects().size() == 1);
     BOOST_CHECK(a.modules().size() == 1);
 
-    const auto n(a.modules().begin()->first);
+    const auto n(a.modules().begin()->second.name());
     BOOST_REQUIRE(a.objects().begin()->second.containing_module());
     BOOST_REQUIRE(*a.objects().begin()->second.containing_module() == n);
     BOOST_CHECK(a.primitives().empty());
@@ -106,7 +106,7 @@ BOOST_AUTO_TEST_CASE(visitable_object_has_visitor_injected) {
     auto m(factory.object_with_parent_in_the_same_model());
     BOOST_REQUIRE(m.objects().size() == 2);
     for (auto& pair : m.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(1, n)) {
             auto& ao(pair.second);
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
@@ -122,7 +122,7 @@ BOOST_AUTO_TEST_CASE(visitable_object_has_visitor_injected) {
     BOOST_CHECK(m.objects().size() == 3);
     bool type_one(false), visitor(false);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(1, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             type_one = true;
diff --git a/projects/yarn/spec/merger_spec.cpp b/projects/yarn/spec/merger_spec.cpp
index a6a6d74..047ce55 100644
--- a/projects/yarn/spec/merger_spec.cpp
+++ b/projects/yarn/spec/merger_spec.cpp
@@ -43,7 +43,7 @@ using dogen::yarn::test::mock_intermediate_model_factory;
 const mock_intermediate_model_factory::flags flags;
 const mock_intermediate_model_factory factory(flags);
 
-const std::string invalid_simple_name("INVALID");
+const std::string invalid_qualified_name("INVALID");
 const std::string invalid_model_name("INVALID");
 
 const std::string incorrect_model("Type does not belong to this model");
@@ -94,7 +94,7 @@ BOOST_AUTO_TEST_CASE(merging_n_distinct_models_with_one_object_each_results_in_n
     std::set<std::string> object_names;
     std::set<std::string> model_names;
     for (const auto& pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         BOOST_REQUIRE(n.location().model_module_path().size() == 1);
         object_names.insert(n.location().model_module_path().front() + "_" +
             n.simple());
@@ -166,7 +166,7 @@ BOOST_AUTO_TEST_CASE(type_with_inconsistent_key_value_pair_throws) {
 
     auto m(factory.make_multi_type_model(0, 2));
     m.is_target(true);
-    m.objects().begin()->second.name().simple(invalid_simple_name);
+    m.objects().begin()->second.name().qualified(invalid_qualified_name);
 
     dogen::yarn::merger mg;
     mg.add(m);
diff --git a/projects/yarn/spec/property_indexer_spec.cpp b/projects/yarn/spec/property_indexer_spec.cpp
index 12964f3..6c84ce7 100644
--- a/projects/yarn/spec/property_indexer_spec.cpp
+++ b/projects/yarn/spec/property_indexer_spec.cpp
@@ -179,8 +179,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
 
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.inherited_properties().empty());
@@ -202,8 +202,8 @@ BOOST_AUTO_TEST_CASE(model_with_one_level_of_concept_inheritance_results_in_expe
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(0, n)) {
             BOOST_CHECK(o.inherited_properties().empty());
@@ -231,8 +231,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
 
     BOOST_REQUIRE(m.concepts().size() == 3);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.inherited_properties().empty());
@@ -263,8 +263,8 @@ BOOST_AUTO_TEST_CASE(model_with_two_levels_of_concept_inheritance_results_in_exp
 
     BOOST_REQUIRE(m.objects().size() == 3);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(0, n)) {
             BOOST_CHECK(o.inherited_properties().empty());
@@ -296,8 +296,8 @@ BOOST_AUTO_TEST_CASE(model_with_diamond_concept_inheritance_results_in_expected_
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
     BOOST_CHECK(m.concepts().size() == 4);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.inherited_properties().empty());
@@ -388,8 +388,8 @@ BOOST_AUTO_TEST_CASE(model_with_third_degree_inheritance_that_does_not_model_con
     BOOST_LOG_SEV(lg, debug) << "after indexing: " << m;
     BOOST_REQUIRE(m.objects().size() == 4);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(3, n)) {
             BOOST_CHECK(o.inherited_properties().empty());
@@ -435,8 +435,8 @@ BOOST_AUTO_TEST_CASE(model_containing_object_with_parent_that_models_concept_is_
 
     BOOST_CHECK(m.concepts().size() == 1);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.inherited_properties().empty());
@@ -448,8 +448,8 @@ BOOST_AUTO_TEST_CASE(model_containing_object_with_parent_that_models_concept_is_
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(0, n)) {
             BOOST_CHECK(o.inherited_properties().empty());
@@ -479,8 +479,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_CHECK(m.concepts().size() == 2);
     for (const auto& pair : m.concepts()) {
-        const auto& n(pair.first);
         const auto& c(pair.second);
+        const auto& n(c.name());
 
         if (factory.is_concept_name_n(0, n)) {
             BOOST_CHECK(c.inherited_properties().empty());
@@ -500,8 +500,8 @@ BOOST_AUTO_TEST_CASE(model_with_containing_object_with_parent_that_models_a_refi
 
     BOOST_REQUIRE(m.objects().size() == 2);
     for (const auto& pair : m.objects()) {
-        const auto& n(pair.first);
         const auto& o(pair.second);
+        const auto& n(o.name());
 
         if (factory.is_type_name_n(0, n)) {
             BOOST_CHECK(o.inherited_properties().empty());
diff --git a/projects/yarn/spec/resolver_spec.cpp b/projects/yarn/spec/resolver_spec.cpp
index 0fbaa85..794c801 100644
--- a/projects/yarn/spec/resolver_spec.cpp
+++ b/projects/yarn/spec/resolver_spec.cpp
@@ -101,9 +101,11 @@ BOOST_AUTO_TEST_CASE(object_with_property_type_in_the_same_model_resolves_succes
         auto& o(pair.second);
         BOOST_CHECK(o.local_properties().size() == 1 ||
             o.local_properties().empty());
-        if (o.local_properties().size() == 1)
-            o.local_properties().begin()->type().
-                type().location().model_module_path().clear();
+        if (o.local_properties().size() == 1) {
+            auto& t(o.local_properties().begin()->type().type());
+            t.location().model_module_path().clear();
+            t.qualified(t.simple());
+        }
     }
     const auto original(m);
     BOOST_LOG_SEV(lg, debug) << "original: " << original;
@@ -113,12 +115,11 @@ BOOST_AUTO_TEST_CASE(object_with_property_type_in_the_same_model_resolves_succes
     res.resolve();
     BOOST_CHECK(res.has_resolved());
     BOOST_LOG_SEV(lg, debug) << "resolved: " << m;
-    // FIXME: fails for some reason. checked equals operator and looks ok
-    // BOOST_CHECK(m != original);
+    BOOST_CHECK(m != original);
 
     bool found(false);
     for (const auto pair : m.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found = true;
@@ -155,7 +156,7 @@ BOOST_AUTO_TEST_CASE(object_with_property_type_in_different_model_results_in_suc
 
     bool found(false);
     for (const auto pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found = true;
@@ -198,7 +199,7 @@ BOOST_AUTO_TEST_CASE(object_with_parent_in_the_same_model_resolves_successfully)
 
     bool found(false);
     for (const auto pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found = true;
@@ -234,7 +235,7 @@ BOOST_AUTO_TEST_CASE(object_with_parent_in_different_models_resolves_successfull
 
     bool found(false);
     for (const auto pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found = true;
@@ -270,7 +271,7 @@ BOOST_AUTO_TEST_CASE(object_with_third_degree_parent_in_same_model_resolves_succ
     bool found_one(false);
     bool found_two(false);
     for (const auto pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found_one = true;
@@ -335,7 +336,7 @@ BOOST_AUTO_TEST_CASE(object_with_third_degree_parent_in_different_models_resolve
 
     bool found(false);
     for (const auto pair : combined.objects()) {
-        const auto& n(pair.first);
+        const auto& n(pair.second.name());
         if (factory.is_type_name_n(0, n)) {
             BOOST_LOG_SEV(lg, debug) << "found object: " << n.qualified();
             found = true;
diff --git a/projects/yarn/src/hash/intermediate_model_hash.cpp b/projects/yarn/src/hash/intermediate_model_hash.cpp
index bf62aef..da20528 100644
--- a/projects/yarn/src/hash/intermediate_model_hash.cpp
+++ b/projects/yarn/src/hash/intermediate_model_hash.cpp
@@ -64,7 +64,7 @@ inline std::size_t hash_std_unordered_set_dogen_yarn_name(const std::unordered_s
     return seed;
 }
 
-inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_module(const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& v) {
+inline std::size_t hash_std_unordered_map_std_string_dogen_yarn_module(const std::unordered_map<std::string, dogen::yarn::module>& v) {
     std::size_t seed(0);
     for (const auto i : v) {
         combine(seed, i.first);
@@ -73,7 +73,7 @@ inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_module(cons
     return seed;
 }
 
-inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_concept(const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& v) {
+inline std::size_t hash_std_unordered_map_std_string_dogen_yarn_concept(const std::unordered_map<std::string, dogen::yarn::concept>& v) {
     std::size_t seed(0);
     for (const auto i : v) {
         combine(seed, i.first);
@@ -82,7 +82,7 @@ inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_concept(con
     return seed;
 }
 
-inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_primitive(const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& v) {
+inline std::size_t hash_std_unordered_map_std_string_dogen_yarn_primitive(const std::unordered_map<std::string, dogen::yarn::primitive>& v) {
     std::size_t seed(0);
     for (const auto i : v) {
         combine(seed, i.first);
@@ -91,7 +91,7 @@ inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_primitive(c
     return seed;
 }
 
-inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_enumeration(const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& v) {
+inline std::size_t hash_std_unordered_map_std_string_dogen_yarn_enumeration(const std::unordered_map<std::string, dogen::yarn::enumeration>& v) {
     std::size_t seed(0);
     for (const auto i : v) {
         combine(seed, i.first);
@@ -100,7 +100,7 @@ inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_enumeration
     return seed;
 }
 
-inline std::size_t hash_std_unordered_map_dogen_yarn_name_dogen_yarn_object(const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& v) {
+inline std::size_t hash_std_unordered_map_std_string_dogen_yarn_object(const std::unordered_map<std::string, dogen::yarn::object>& v) {
     std::size_t seed(0);
     for (const auto i : v) {
         combine(seed, i.first);
@@ -127,11 +127,11 @@ std::size_t intermediate_model_hasher::hash(const intermediate_model& v) {
     combine(seed, hash_boost_optional_dogen_yarn_name(v.containing_module()));
     combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_origin_types(v.references()));
     combine(seed, hash_std_unordered_set_dogen_yarn_name(v.leaves()));
-    combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_module(v.modules()));
-    combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_concept(v.concepts()));
-    combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_primitive(v.primitives()));
-    combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_enumeration(v.enumerations()));
-    combine(seed, hash_std_unordered_map_dogen_yarn_name_dogen_yarn_object(v.objects()));
+    combine(seed, hash_std_unordered_map_std_string_dogen_yarn_module(v.modules()));
+    combine(seed, hash_std_unordered_map_std_string_dogen_yarn_concept(v.concepts()));
+    combine(seed, hash_std_unordered_map_std_string_dogen_yarn_primitive(v.primitives()));
+    combine(seed, hash_std_unordered_map_std_string_dogen_yarn_enumeration(v.enumerations()));
+    combine(seed, hash_std_unordered_map_std_string_dogen_yarn_object(v.objects()));
     combine(seed, v.is_target());
     combine(seed, v.has_generatable_types());
 
diff --git a/projects/yarn/src/io/intermediate_model_io.cpp b/projects/yarn/src/io/intermediate_model_io.cpp
index 884db78..01f071b 100644
--- a/projects/yarn/src/io/intermediate_model_io.cpp
+++ b/projects/yarn/src/io/intermediate_model_io.cpp
@@ -88,12 +88,12 @@ inline std::ostream& operator<<(std::ostream& s, const std::unordered_set<dogen:
 
 namespace std {
 
-inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& v) {
+inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<std::string, dogen::yarn::module>& v) {
     s << "[";
     for (auto i(v.begin()); i != v.end(); ++i) {
         if (i != v.begin()) s << ", ";
         s << "[ { " << "\"__type__\": " << "\"key\"" << ", " << "\"data\": ";
-        s << i->first;
+        s << "\"" << tidy_up_string(i->first) << "\"";
         s << " }, { " << "\"__type__\": " << "\"value\"" << ", " << "\"data\": ";
         s << i->second;
         s << " } ]";
@@ -106,12 +106,12 @@ inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen:
 
 namespace std {
 
-inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& v) {
+inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<std::string, dogen::yarn::concept>& v) {
     s << "[";
     for (auto i(v.begin()); i != v.end(); ++i) {
         if (i != v.begin()) s << ", ";
         s << "[ { " << "\"__type__\": " << "\"key\"" << ", " << "\"data\": ";
-        s << i->first;
+        s << "\"" << tidy_up_string(i->first) << "\"";
         s << " }, { " << "\"__type__\": " << "\"value\"" << ", " << "\"data\": ";
         s << i->second;
         s << " } ]";
@@ -124,12 +124,12 @@ inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen:
 
 namespace std {
 
-inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& v) {
+inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<std::string, dogen::yarn::primitive>& v) {
     s << "[";
     for (auto i(v.begin()); i != v.end(); ++i) {
         if (i != v.begin()) s << ", ";
         s << "[ { " << "\"__type__\": " << "\"key\"" << ", " << "\"data\": ";
-        s << i->first;
+        s << "\"" << tidy_up_string(i->first) << "\"";
         s << " }, { " << "\"__type__\": " << "\"value\"" << ", " << "\"data\": ";
         s << i->second;
         s << " } ]";
@@ -142,12 +142,12 @@ inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen:
 
 namespace std {
 
-inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& v) {
+inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<std::string, dogen::yarn::enumeration>& v) {
     s << "[";
     for (auto i(v.begin()); i != v.end(); ++i) {
         if (i != v.begin()) s << ", ";
         s << "[ { " << "\"__type__\": " << "\"key\"" << ", " << "\"data\": ";
-        s << i->first;
+        s << "\"" << tidy_up_string(i->first) << "\"";
         s << " }, { " << "\"__type__\": " << "\"value\"" << ", " << "\"data\": ";
         s << i->second;
         s << " } ]";
@@ -160,12 +160,12 @@ inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen:
 
 namespace std {
 
-inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& v) {
+inline std::ostream& operator<<(std::ostream& s, const std::unordered_map<std::string, dogen::yarn::object>& v) {
     s << "[";
     for (auto i(v.begin()); i != v.end(); ++i) {
         if (i != v.begin()) s << ", ";
         s << "[ { " << "\"__type__\": " << "\"key\"" << ", " << "\"data\": ";
-        s << i->first;
+        s << "\"" << tidy_up_string(i->first) << "\"";
         s << " }, { " << "\"__type__\": " << "\"value\"" << ", " << "\"data\": ";
         s << i->second;
         s << " } ]";
diff --git a/projects/yarn/src/test/mock_intermediate_model_factory.cpp b/projects/yarn/src/test/mock_intermediate_model_factory.cpp
index 42344ad..ceb8f06 100644
--- a/projects/yarn/src/test/mock_intermediate_model_factory.cpp
+++ b/projects/yarn/src/test/mock_intermediate_model_factory.cpp
@@ -304,14 +304,14 @@ void parent_to_child(const bool properties_indexed,
 }
 
 template<typename Nameable>
-void insert_nameable(std::unordered_map<dogen::yarn::name, Nameable>& map,
+void insert_nameable(std::unordered_map<std::string, Nameable>& map,
     const Nameable& n) {
-    map.insert(std::make_pair(n.name(), n));
+    map.insert(std::make_pair(n.name().qualified(), n));
 }
 
 void insert_object(dogen::yarn::intermediate_model& m,
     const dogen::yarn::object& o) {
-    m.objects().insert(std::make_pair(o.name(), o));
+    m.objects().insert(std::make_pair(o.name().qualified(), o));
 }
 
 void add_test_dynamic_extensions(dogen::dynamic::object& o) {
@@ -674,7 +674,7 @@ make_single_concept_model(const unsigned int n,
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c(make_concept(0, r.name()));
     add_property(c, flags_.properties_indexed());
@@ -694,7 +694,7 @@ make_first_degree_concepts_model(const unsigned int n,
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -727,7 +727,7 @@ make_second_degree_concepts_model(const unsigned int n,
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -776,7 +776,7 @@ make_multiple_inheritance_concepts_model(
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -804,7 +804,7 @@ make_diamond_inheritance_concepts_model(const unsigned int n,
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -846,7 +846,7 @@ make_object_with_parent_that_models_concept(
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -871,7 +871,7 @@ make_object_with_parent_that_models_a_refined_concept(
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -915,7 +915,7 @@ make_object_that_models_missing_concept(const unsigned int n,
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -933,7 +933,7 @@ make_object_that_models_concept_with_missing_parent(
     intermediate_model r(make_empty_model(n, add_model_module));
 
     const auto ui(make_primitive(unsigned_int));
-    r.primitives().insert(std::make_pair(ui.name(), ui));
+    r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
     concept c0(make_concept(0, r.name()));
     add_property(c0, flags_.properties_indexed());
@@ -1064,7 +1064,7 @@ object_with_property(const object_types ot, const property_types pt,
 
     } else if (pt == property_types::std_pair) {
         const auto b(make_primitive(boolean));
-        r.primitives().insert(std::make_pair(b.name(), b));
+        r.primitives().insert(std::make_pair(b.name().qualified(), b));
 
         if (flags_.associations_indexed())
             o0.relationships()[ra].push_back(b.name());
@@ -1079,13 +1079,13 @@ object_with_property(const object_types ot, const property_types pt,
         insert_object(r, o2);
     } else if (pt == property_types::boost_variant) {
         const auto b(make_primitive(boolean));
-        r.primitives().insert(std::make_pair(b.name(), b));
+        r.primitives().insert(std::make_pair(b.name().qualified(), b));
 
         if (flags_.associations_indexed())
             o0.relationships()[ra].push_back(b.name());
 
         const auto ui(make_primitive(unsigned_int));
-        r.primitives().insert(std::make_pair(ui.name(), ui));
+        r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
 
         if (flags_.associations_indexed())
             o0.relationships()[ra].push_back(ui.name());
@@ -1161,7 +1161,7 @@ object_with_parent_in_the_same_model(const bool has_property,
     auto r(make_empty_model(0, add_model_module));
     if (has_property) {
         const auto ui(make_primitive(unsigned_int));
-        r.primitives().insert(std::make_pair(ui.name(), ui));
+        r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
     }
 
     auto o0(make_value_object(0, mn));
@@ -1246,7 +1246,7 @@ object_with_third_degree_parent_in_same_model(const bool has_property,
     auto r(make_empty_model(0, add_model_module));
     if (has_property) {
         const auto ui(make_primitive(unsigned_int));
-        r.primitives().insert(std::make_pair(ui.name(), ui));
+        r.primitives().insert(std::make_pair(ui.name().qualified(), ui));
     }
 
     auto o3(make_value_object(3, mn));
diff --git a/projects/yarn/src/test_data/intermediate_model_td.cpp b/projects/yarn/src/test_data/intermediate_model_td.cpp
index ec135c9..52aed52 100644
--- a/projects/yarn/src/test_data/intermediate_model_td.cpp
+++ b/projects/yarn/src/test_data/intermediate_model_td.cpp
@@ -90,10 +90,10 @@ create_dogen_yarn_module(const unsigned int position) {
     return dogen::yarn::module_generator::create(position);
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::module> create_std_unordered_map_dogen_yarn_name_dogen_yarn_module(unsigned int position) {
-    std::unordered_map<dogen::yarn::name, dogen::yarn::module> r;
+std::unordered_map<std::string, dogen::yarn::module> create_std_unordered_map_std_string_dogen_yarn_module(unsigned int position) {
+    std::unordered_map<std::string, dogen::yarn::module> r;
     for (unsigned int i(0); i < 4; ++i) {
-        r.insert(std::make_pair(create_dogen_yarn_name(position + i), create_dogen_yarn_module(position + i)));
+        r.insert(std::make_pair(create_std_string(position + i), create_dogen_yarn_module(position + i)));
     }
     return r;
 }
@@ -103,10 +103,10 @@ create_dogen_yarn_concept(const unsigned int position) {
     return dogen::yarn::concept_generator::create(position);
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::concept> create_std_unordered_map_dogen_yarn_name_dogen_yarn_concept(unsigned int position) {
-    std::unordered_map<dogen::yarn::name, dogen::yarn::concept> r;
+std::unordered_map<std::string, dogen::yarn::concept> create_std_unordered_map_std_string_dogen_yarn_concept(unsigned int position) {
+    std::unordered_map<std::string, dogen::yarn::concept> r;
     for (unsigned int i(0); i < 4; ++i) {
-        r.insert(std::make_pair(create_dogen_yarn_name(position + i), create_dogen_yarn_concept(position + i)));
+        r.insert(std::make_pair(create_std_string(position + i), create_dogen_yarn_concept(position + i)));
     }
     return r;
 }
@@ -116,10 +116,10 @@ create_dogen_yarn_primitive(const unsigned int position) {
     return dogen::yarn::primitive_generator::create(position);
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::primitive> create_std_unordered_map_dogen_yarn_name_dogen_yarn_primitive(unsigned int position) {
-    std::unordered_map<dogen::yarn::name, dogen::yarn::primitive> r;
+std::unordered_map<std::string, dogen::yarn::primitive> create_std_unordered_map_std_string_dogen_yarn_primitive(unsigned int position) {
+    std::unordered_map<std::string, dogen::yarn::primitive> r;
     for (unsigned int i(0); i < 4; ++i) {
-        r.insert(std::make_pair(create_dogen_yarn_name(position + i), create_dogen_yarn_primitive(position + i)));
+        r.insert(std::make_pair(create_std_string(position + i), create_dogen_yarn_primitive(position + i)));
     }
     return r;
 }
@@ -129,10 +129,10 @@ create_dogen_yarn_enumeration(const unsigned int position) {
     return dogen::yarn::enumeration_generator::create(position);
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration> create_std_unordered_map_dogen_yarn_name_dogen_yarn_enumeration(unsigned int position) {
-    std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration> r;
+std::unordered_map<std::string, dogen::yarn::enumeration> create_std_unordered_map_std_string_dogen_yarn_enumeration(unsigned int position) {
+    std::unordered_map<std::string, dogen::yarn::enumeration> r;
     for (unsigned int i(0); i < 4; ++i) {
-        r.insert(std::make_pair(create_dogen_yarn_name(position + i), create_dogen_yarn_enumeration(position + i)));
+        r.insert(std::make_pair(create_std_string(position + i), create_dogen_yarn_enumeration(position + i)));
     }
     return r;
 }
@@ -142,10 +142,10 @@ create_dogen_yarn_object(const unsigned int position) {
     return dogen::yarn::object_generator::create(position);
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::object> create_std_unordered_map_dogen_yarn_name_dogen_yarn_object(unsigned int position) {
-    std::unordered_map<dogen::yarn::name, dogen::yarn::object> r;
+std::unordered_map<std::string, dogen::yarn::object> create_std_unordered_map_std_string_dogen_yarn_object(unsigned int position) {
+    std::unordered_map<std::string, dogen::yarn::object> r;
     for (unsigned int i(0); i < 4; ++i) {
-        r.insert(std::make_pair(create_dogen_yarn_name(position + i), create_dogen_yarn_object(position + i)));
+        r.insert(std::make_pair(create_std_string(position + i), create_dogen_yarn_object(position + i)));
     }
     return r;
 }
@@ -169,11 +169,11 @@ populate(const unsigned int position, result_type& v) {
     v.containing_module(create_boost_optional_dogen_yarn_name(position + 7));
     v.references(create_std_unordered_map_dogen_yarn_name_dogen_yarn_origin_types(position + 8));
     v.leaves(create_std_unordered_set_dogen_yarn_name(position + 9));
-    v.modules(create_std_unordered_map_dogen_yarn_name_dogen_yarn_module(position + 10));
-    v.concepts(create_std_unordered_map_dogen_yarn_name_dogen_yarn_concept(position + 11));
-    v.primitives(create_std_unordered_map_dogen_yarn_name_dogen_yarn_primitive(position + 12));
-    v.enumerations(create_std_unordered_map_dogen_yarn_name_dogen_yarn_enumeration(position + 13));
-    v.objects(create_std_unordered_map_dogen_yarn_name_dogen_yarn_object(position + 14));
+    v.modules(create_std_unordered_map_std_string_dogen_yarn_module(position + 10));
+    v.concepts(create_std_unordered_map_std_string_dogen_yarn_concept(position + 11));
+    v.primitives(create_std_unordered_map_std_string_dogen_yarn_primitive(position + 12));
+    v.enumerations(create_std_unordered_map_std_string_dogen_yarn_enumeration(position + 13));
+    v.objects(create_std_unordered_map_std_string_dogen_yarn_object(position + 14));
     v.is_target(create_bool(position + 15));
     v.has_generatable_types(create_bool(position + 16));
 }
diff --git a/projects/yarn/src/types/association_indexer.cpp b/projects/yarn/src/types/association_indexer.cpp
index 87fb8bf..64eed83 100644
--- a/projects/yarn/src/types/association_indexer.cpp
+++ b/projects/yarn/src/types/association_indexer.cpp
@@ -71,19 +71,19 @@ void association_indexer::recurse_nested_names(const intermediate_model& m,
     else
         rels[relationship_types::regular_associations].push_back(n);
 
-    const auto i(m.primitives().find(n));
+    const auto i(m.primitives().find(n.qualified()));
     if (i != m.primitives().end()) {
         is_pointer = false;
         return;
     }
 
-    const auto j(m.enumerations().find(n));
+    const auto j(m.enumerations().find(n.qualified()));
     if (j != m.enumerations().end()) {
         is_pointer = false;
         return;
     }
 
-    const auto k(m.objects().find(n));
+    const auto k(m.objects().find(n.qualified()));
     if (k == m.objects().end()) {
         const auto qn(n.qualified());
         BOOST_LOG_SEV(lg, error) << object_not_found << qn;
diff --git a/projects/yarn/src/types/concept_indexer.cpp b/projects/yarn/src/types/concept_indexer.cpp
index 833ec91..2b55dc1 100644
--- a/projects/yarn/src/types/concept_indexer.cpp
+++ b/projects/yarn/src/types/concept_indexer.cpp
@@ -57,7 +57,7 @@ inline bool operator<(const name& lhs, const name& rhs) {
 }
 
 object& concept_indexer::find_object(const name& n, intermediate_model& m) {
-    auto i(m.objects().find(n));
+    auto i(m.objects().find(n.qualified()));
     if (i == m.objects().end()) {
         BOOST_LOG_SEV(lg, error) << object_not_found << n.qualified();
         BOOST_THROW_EXCEPTION(
@@ -79,7 +79,7 @@ find_relationships(const relationship_types rt, object& o) {
 }
 
 concept& concept_indexer::find_concept(const name& n, intermediate_model& m) {
-    auto i(m.concepts().find(n));
+    auto i(m.concepts().find(n.qualified()));
     if (i == m.concepts().end()) {
         BOOST_LOG_SEV(lg, error) << concept_not_found << n.qualified();
         BOOST_THROW_EXCEPTION(
diff --git a/projects/yarn/src/types/generalization_indexer.cpp b/projects/yarn/src/types/generalization_indexer.cpp
index d7dd697..324aa33 100644
--- a/projects/yarn/src/types/generalization_indexer.cpp
+++ b/projects/yarn/src/types/generalization_indexer.cpp
@@ -82,7 +82,7 @@ recurse_generalization(const intermediate_model& m, const name& leaf,
 
     std::list<name> root_parents;
     for (const auto& parent : i->second) {
-        auto j(m.objects().find(parent));
+        auto j(m.objects().find(parent.qualified()));
         if (j == m.objects().end()) {
             const auto qn(parent.qualified());
             BOOST_LOG_SEV(lg, error) << parent_not_found << qn;
@@ -136,7 +136,7 @@ void generalization_indexer::
 populate(const generalization_details& d, intermediate_model& m) const {
     for (const auto& pair : d.leaves) {
         const auto& n(pair.first);
-        auto i(m.objects().find(n));
+        auto i(m.objects().find(n.qualified()));
         if (i == m.objects().end()) {
             const auto qn(n.qualified());
             BOOST_LOG_SEV(lg, error) << object_not_found << qn;
@@ -156,7 +156,7 @@ populate(const generalization_details& d, intermediate_model& m) const {
 
     for (const auto& pair : d.root_parents) {
         const auto& n(pair.first);
-        auto i(m.objects().find(n));
+        auto i(m.objects().find(n.qualified()));
         if (i == m.objects().end()) {
             const auto qn(n.qualified());
             BOOST_LOG_SEV(lg, error) << object_not_found << qn;
@@ -176,7 +176,7 @@ populate(const generalization_details& d, intermediate_model& m) const {
         const auto rt(relationship_types::root_parents);
         o.relationships()[rt] = pair.second;
         for (const auto& opn : pair.second) {
-            const auto j(m.objects().find(opn));
+            const auto j(m.objects().find(opn.qualified()));
             if (j == m.objects().end()) {
                 const auto qn(opn.qualified());
                 BOOST_LOG_SEV(lg, error) << object_not_found << qn;
diff --git a/projects/yarn/src/types/injector.cpp b/projects/yarn/src/types/injector.cpp
index 6bc0c8e..fb5caa7 100644
--- a/projects/yarn/src/types/injector.cpp
+++ b/projects/yarn/src/types/injector.cpp
@@ -23,6 +23,7 @@
 #include <boost/lexical_cast.hpp>
 #include <boost/throw_exception.hpp>
 #include "dogen/utility/log/logger.hpp"
+#include "dogen/yarn/types/name_factory.hpp"
 #include "dogen/yarn/types/intermediate_model.hpp"
 #include "dogen/yarn/types/object.hpp"
 #include "dogen/yarn/types/injection_error.hpp"
@@ -85,16 +86,16 @@ private:
 
 bool injector::insert(const object& o) {
     const auto i(context_->model().objects().insert(
-            std::make_pair(o.name(), o)));
+            std::make_pair(o.name().qualified(), o)));
 
     return i.second;
 }
 
 object injector::
 create_visitor(const object& o, const std::list<name>& leaves) const {
-    name n;
-    n.simple(o.name().simple() + "_" + visitor_name);
-    n.location(o.name().location());
+    name_factory nf;
+    const std::string sn(o.name().simple() + "_" + visitor_name);
+    const auto n(nf.build_element_in_model(o.name(), sn));
     BOOST_LOG_SEV(lg, debug) << "Creating visitor: " << n.qualified();
 
     object r;
@@ -118,7 +119,7 @@ void injector::inject_visited_by(object& root, const std::list<name>& leaves,
     root.relationships()[relationship_types::visited_by].push_back(visitor);
 
     for (const auto& l : leaves) {
-        auto i(context_->model().objects().find(l));
+        auto i(context_->model().objects().find(l.qualified()));
         if (i == context_->model().objects().end()) {
             const auto qn(l.qualified());
             BOOST_LOG_SEV(lg, error) << leaf_not_found << qn;
@@ -173,7 +174,7 @@ void injector::inject_global_module() {
     name qn;
 
     auto& model(context_->model());
-    const auto i(model.modules().find(qn));
+    const auto i(model.modules().find(qn.qualified()));
     if (i != model.modules().end()) {
         const auto qn(model.name().qualified());
         BOOST_LOG_SEV(lg, error) << model_already_has_global_module << qn;
@@ -192,7 +193,7 @@ void injector::inject_global_module() {
     global_module.generation_type(generation_types::no_generation);
     global_module.origin_type(origin_types::system);
     global_module.documentation(global_module_doc);
-    model.modules().insert(std::make_pair(qn, global_module));
+    model.modules().insert(std::make_pair(qn.qualified(), global_module));
 }
 
 void injector::inject(intermediate_model& m) {
diff --git a/projects/yarn/src/types/intermediate_model.cpp b/projects/yarn/src/types/intermediate_model.cpp
index 3c19e65..987fcd2 100644
--- a/projects/yarn/src/types/intermediate_model.cpp
+++ b/projects/yarn/src/types/intermediate_model.cpp
@@ -60,11 +60,11 @@ intermediate_model::intermediate_model(
     const boost::optional<dogen::yarn::name>& containing_module,
     const std::unordered_map<dogen::yarn::name, dogen::yarn::origin_types>& references,
     const std::unordered_set<dogen::yarn::name>& leaves,
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& modules,
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& concepts,
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& primitives,
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& enumerations,
-    const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& objects,
+    const std::unordered_map<std::string, dogen::yarn::module>& modules,
+    const std::unordered_map<std::string, dogen::yarn::concept>& concepts,
+    const std::unordered_map<std::string, dogen::yarn::primitive>& primitives,
+    const std::unordered_map<std::string, dogen::yarn::enumeration>& enumerations,
+    const std::unordered_map<std::string, dogen::yarn::object>& objects,
     const bool is_target,
     const bool has_generatable_types)
     : in_global_module_(in_global_module),
@@ -268,83 +268,83 @@ void intermediate_model::leaves(const std::unordered_set<dogen::yarn::name>&& v)
     leaves_ = std::move(v);
 }
 
-const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& intermediate_model::modules() const {
+const std::unordered_map<std::string, dogen::yarn::module>& intermediate_model::modules() const {
     return modules_;
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::module>& intermediate_model::modules() {
+std::unordered_map<std::string, dogen::yarn::module>& intermediate_model::modules() {
     return modules_;
 }
 
-void intermediate_model::modules(const std::unordered_map<dogen::yarn::name, dogen::yarn::module>& v) {
+void intermediate_model::modules(const std::unordered_map<std::string, dogen::yarn::module>& v) {
     modules_ = v;
 }
 
-void intermediate_model::modules(const std::unordered_map<dogen::yarn::name, dogen::yarn::module>&& v) {
+void intermediate_model::modules(const std::unordered_map<std::string, dogen::yarn::module>&& v) {
     modules_ = std::move(v);
 }
 
-const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& intermediate_model::concepts() const {
+const std::unordered_map<std::string, dogen::yarn::concept>& intermediate_model::concepts() const {
     return concepts_;
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& intermediate_model::concepts() {
+std::unordered_map<std::string, dogen::yarn::concept>& intermediate_model::concepts() {
     return concepts_;
 }
 
-void intermediate_model::concepts(const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>& v) {
+void intermediate_model::concepts(const std::unordered_map<std::string, dogen::yarn::concept>& v) {
     concepts_ = v;
 }
 
-void intermediate_model::concepts(const std::unordered_map<dogen::yarn::name, dogen::yarn::concept>&& v) {
+void intermediate_model::concepts(const std::unordered_map<std::string, dogen::yarn::concept>&& v) {
     concepts_ = std::move(v);
 }
 
-const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& intermediate_model::primitives() const {
+const std::unordered_map<std::string, dogen::yarn::primitive>& intermediate_model::primitives() const {
     return primitives_;
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& intermediate_model::primitives() {
+std::unordered_map<std::string, dogen::yarn::primitive>& intermediate_model::primitives() {
     return primitives_;
 }
 
-void intermediate_model::primitives(const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>& v) {
+void intermediate_model::primitives(const std::unordered_map<std::string, dogen::yarn::primitive>& v) {
     primitives_ = v;
 }
 
-void intermediate_model::primitives(const std::unordered_map<dogen::yarn::name, dogen::yarn::primitive>&& v) {
+void intermediate_model::primitives(const std::unordered_map<std::string, dogen::yarn::primitive>&& v) {
     primitives_ = std::move(v);
 }
 
-const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& intermediate_model::enumerations() const {
+const std::unordered_map<std::string, dogen::yarn::enumeration>& intermediate_model::enumerations() const {
     return enumerations_;
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& intermediate_model::enumerations() {
+std::unordered_map<std::string, dogen::yarn::enumeration>& intermediate_model::enumerations() {
     return enumerations_;
 }
 
-void intermediate_model::enumerations(const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>& v) {
+void intermediate_model::enumerations(const std::unordered_map<std::string, dogen::yarn::enumeration>& v) {
     enumerations_ = v;
 }
 
-void intermediate_model::enumerations(const std::unordered_map<dogen::yarn::name, dogen::yarn::enumeration>&& v) {
+void intermediate_model::enumerations(const std::unordered_map<std::string, dogen::yarn::enumeration>&& v) {
     enumerations_ = std::move(v);
 }
 
-const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& intermediate_model::objects() const {
+const std::unordered_map<std::string, dogen::yarn::object>& intermediate_model::objects() const {
     return objects_;
 }
 
-std::unordered_map<dogen::yarn::name, dogen::yarn::object>& intermediate_model::objects() {
+std::unordered_map<std::string, dogen::yarn::object>& intermediate_model::objects() {
     return objects_;
 }
 
-void intermediate_model::objects(const std::unordered_map<dogen::yarn::name, dogen::yarn::object>& v) {
+void intermediate_model::objects(const std::unordered_map<std::string, dogen::yarn::object>& v) {
     objects_ = v;
 }
 
-void intermediate_model::objects(const std::unordered_map<dogen::yarn::name, dogen::yarn::object>&& v) {
+void intermediate_model::objects(const std::unordered_map<std::string, dogen::yarn::object>&& v) {
     objects_ = std::move(v);
 }
 
diff --git a/projects/yarn/src/types/merger.cpp b/projects/yarn/src/types/merger.cpp
index 71b8f83..a628963 100644
--- a/projects/yarn/src/types/merger.cpp
+++ b/projects/yarn/src/types/merger.cpp
@@ -80,27 +80,27 @@ void merger::require_not_has_merged() const {
     BOOST_THROW_EXCEPTION(merging_error(multiple_merge));
 }
 
-void merger::check_name(const name& model_name, const name& key,
+void merger::check_name(const name& model_name, const std::string& key,
     const name& value, const bool in_global_namespace) const {
 
     if (!in_global_namespace) {
-        if (key.location().external_module_path() !=
+        if (value.location().external_module_path() !=
             model_name.location().external_module_path() ||
-            key.location().model_module_path() !=
+            value.location().model_module_path() !=
             model_name.location().model_module_path()) {
             std::ostringstream s;
             s << "Type does not belong to this model. Model name: '"
-              << model_name.qualified() << "'. Type name: " << key.qualified();
+              << model_name.qualified() << "'. Type name: "
+              << value.qualified();
             BOOST_LOG_SEV(lg, error) << s.str();
             BOOST_THROW_EXCEPTION(merging_error(s.str()));
         }
     }
 
-    if (key != value) {
+    if (key != value.qualified()) {
         std::ostringstream s;
         s << "Inconsistency between key and value names: "
-          << " key: " << key.qualified()
-          << " value: " << value.qualified();
+          << " key: " << key << " value: " << value.qualified();
         BOOST_LOG_SEV(lg, error) << s.str();
         BOOST_THROW_EXCEPTION(merging_error(s.str()));
     }
diff --git a/projects/yarn/src/types/modules_expander.cpp b/projects/yarn/src/types/modules_expander.cpp
index b677687..718f38c 100644
--- a/projects/yarn/src/types/modules_expander.cpp
+++ b/projects/yarn/src/types/modules_expander.cpp
@@ -96,6 +96,9 @@ public:
 };
 
 boost::optional<name> updater::containing_module(const name& n) {
+    BOOST_LOG_SEV(lg, debug) << "Finding containing module for: "
+                             << n.qualified();
+
     const bool in_global_namespace(n.location().model_module_path().empty());
     if (in_global_namespace) {
         BOOST_LOG_SEV(lg, debug) << "Type is in global module so, it has"
@@ -128,9 +131,11 @@ boost::optional<name> updater::containing_module(const name& n) {
     }
 
     const auto module_n(b.build());
-    const auto i(model_.modules().find(module_n));
+    const auto i(model_.modules().find(module_n.qualified()));
     if (i != model_.modules().end()) {
         i->second.members().push_back(n);
+        BOOST_LOG_SEV(lg, debug) << "Containing module: "
+                                 << module_n.qualified();
         return module_n;
     }
 
@@ -145,7 +150,7 @@ void updater::update(element& e) {
     if (!e.containing_module())
         return;
 
-    auto i(model_.modules().find(*e.containing_module()));
+    auto i(model_.modules().find(e.containing_module()->qualified()));
     if (i == model_.modules().end()) {
         const auto sn(e.containing_module()->simple());
         BOOST_LOG_SEV(lg, error) << missing_module << sn;
@@ -154,7 +159,7 @@ void updater::update(element& e) {
 
     BOOST_LOG_SEV(lg, debug) << "Adding type to module. Type: '"
                              << e.name().qualified()
-                             << "' Module: '" << i->first.qualified();
+                             << "' Module: '" << i->first;
     i->second.members().push_back(e.name());
 }
 
@@ -167,14 +172,14 @@ void modules_expander::create_missing_modules(intermediate_model& m) const {
     for (const auto& pair : b.result()) {
         yarn::name_factory f;
         const auto& ipp(pair.second);
-        const auto module_n(f.build_module_name(m.name(), ipp));
-        const auto i(m.modules().find(module_n));
+        const auto n(f.build_module_name(m.name(), ipp));
+        const auto i(m.modules().find(n.qualified()));
         if (i == m.modules().end()) {
             yarn::module mod;
-            mod.name(module_n);
+            mod.name(n);
             mod.origin_type(m.origin_type());
             mod.generation_type(m.generation_type());
-            m.modules().insert(std::make_pair(module_n, mod));
+            m.modules().insert(std::make_pair(n.qualified(), mod));
         }
     }
 }
diff --git a/projects/yarn/src/types/properties_expander.cpp b/projects/yarn/src/types/properties_expander.cpp
index 2860e8f..05f708f 100644
--- a/projects/yarn/src/types/properties_expander.cpp
+++ b/projects/yarn/src/types/properties_expander.cpp
@@ -18,8 +18,17 @@
  * MA 02110-1301, USA.
  *
  */
+#include "dogen/utility/log/logger.hpp"
+#include "dogen/utility/io/unordered_set_io.hpp"
 #include "dogen/yarn/types/properties_expander.hpp"
 
+namespace {
+
+using namespace dogen::utility::log;
+auto lg(logger_factory("yarn.properties_expander"));
+
+}
+
 namespace dogen {
 namespace yarn {
 
@@ -30,8 +39,15 @@ obtain_top_level_module_names(const intermediate_model& m) const {
     for (const auto& pair : m.modules()) {
         const auto& module(pair.second);
         if (!module.containing_module())
+            continue;
+
+        if (*module.containing_module() == m.name())
             r.insert(module.name().simple());
     }
+
+    BOOST_LOG_SEV(lg, debug) << "Top-level model names for "
+                             << m.name().qualified() << " : "
+                             << r;
     return r;
 }
 
diff --git a/projects/yarn/src/types/property_indexer.cpp b/projects/yarn/src/types/property_indexer.cpp
index 44b138d..fc195e3 100644
--- a/projects/yarn/src/types/property_indexer.cpp
+++ b/projects/yarn/src/types/property_indexer.cpp
@@ -47,9 +47,9 @@ namespace dogen {
 namespace yarn {
 
 object& property_indexer::find_object(const name& n, intermediate_model& m) {
-    auto i(m.objects().find(n));
+    const auto qn(n.qualified());
+    auto i(m.objects().find(qn));
     if (i == m.objects().end()) {
-        const auto qn(n.qualified());
         BOOST_LOG_SEV(lg, error) << object_not_found << qn;
         BOOST_THROW_EXCEPTION(indexing_error(object_not_found + qn));
     }
@@ -69,9 +69,9 @@ find_relationships(const relationship_types rt, object& o) {
 }
 
 concept& property_indexer::find_concept(const name& n, intermediate_model& m) {
-    auto i(m.concepts().find(n));
+    const auto& qn(n.qualified());
+    auto i(m.concepts().find(qn));
     if (i == m.concepts().end()) {
-        const auto& qn(n.qualified());
         BOOST_LOG_SEV(lg, error) << concept_not_found << qn;
         BOOST_THROW_EXCEPTION(indexing_error(concept_not_found + qn));
     }
diff --git a/projects/yarn/src/types/resolver.cpp b/projects/yarn/src/types/resolver.cpp
index 19d5441..43685f5 100644
--- a/projects/yarn/src/types/resolver.cpp
+++ b/projects/yarn/src/types/resolver.cpp
@@ -35,10 +35,9 @@
 #include "dogen/yarn/types/name_factory.hpp"
 #include "dogen/yarn/types/resolver.hpp"
 
-using namespace dogen::utility::log;
-
 namespace {
 
+using namespace dogen::utility::log;
 auto lg(logger_factory("yarn.resolver"));
 
 const std::string empty;
@@ -59,19 +58,19 @@ resolver::resolver(intermediate_model& m) : model_(m), has_resolved_(false) { }
 bool resolver::is_name_in_model(const name& n) const {
     BOOST_LOG_SEV(lg, debug) << "Finding name:" << n;
 
-    auto i(model_.objects().find(n));
+    auto i(model_.objects().find(n.qualified()));
     if (i != model_.objects().end()) {
         BOOST_LOG_SEV(lg, debug) << "Name belongs to an object in model.";
         return true;
     }
 
-    auto j(model_.enumerations().find(n));
+    auto j(model_.enumerations().find(n.qualified()));
     if (j != model_.enumerations().end()) {
         BOOST_LOG_SEV(lg, debug) << "Name belongs to an enumeration in model.";
         return true;
     }
 
-    auto k(model_.primitives().find(n));
+    auto k(model_.primitives().find(n.qualified()));
     if (k != model_.primitives().end()) {
         BOOST_LOG_SEV(lg, debug) << "Name belongs to a primitive in model.";
         return true;
@@ -158,7 +157,7 @@ void resolver::validate_inheritance_graph(const object& ao) const {
         return;
 
     for (const auto& pn : i->second) {
-        const auto j(model_.objects().find(pn));
+        const auto j(model_.objects().find(pn.qualified()));
         if (j == model_.objects().end()) {
             std::ostringstream s;
             s << orphan_object << ": " << ao.name().qualified()
@@ -174,7 +173,7 @@ void resolver::validate_inheritance_graph(const object& ao) const {
         return;
 
     for (const auto& pn : i->second) {
-        const auto j(model_.objects().find(pn));
+        const auto j(model_.objects().find(pn.qualified()));
         if (j == model_.objects().end()) {
             std::ostringstream s;
             s << orphan_object << ": " << ao.name().qualified()
@@ -188,7 +187,7 @@ void resolver::validate_inheritance_graph(const object& ao) const {
 
 void resolver::validate_refinements(const concept& c) const {
     for (const auto& n : c.refines()) {
-        const auto i(model_.concepts().find(n));
+        const auto i(model_.concepts().find(n.qualified()));
         if (i == model_.concepts().end()) {
             std::ostringstream stream;
             stream << orphan_concept << ". concept: "
diff --git a/projects/yarn/src/types/transformer.cpp b/projects/yarn/src/types/transformer.cpp
index b0ae58c..e3af5cd 100644
--- a/projects/yarn/src/types/transformer.cpp
+++ b/projects/yarn/src/types/transformer.cpp
@@ -71,7 +71,7 @@ private:
 }
 
 model transformer::transform(const intermediate_model& m) const {
-    const auto i(m.modules().find(m.name()));
+    const auto i(m.modules().find(m.name().qualified()));
     if (i == m.modules().end()) {
         const auto qn(m.name().qualified());
         BOOST_LOG_SEV(lg, error) << missing_root_module << qn;
diff --git a/projects/yarn/src/types/workflow.cpp b/projects/yarn/src/types/workflow.cpp
index 8b6dfd7..093344e 100644
--- a/projects/yarn/src/types/workflow.cpp
+++ b/projects/yarn/src/types/workflow.cpp
@@ -58,9 +58,9 @@ intermediate_model workflow::assemble_intermediate_models_activity(
 intermediate_model workflow::execute(const dynamic::repository& rp,
     const std::list<input_descriptor>& id) const {
 
-    auto pm(obtain_intermediate_models_activity(rp, id));
-    expand_intermediate_models_activity(pm);
-    const auto r(assemble_intermediate_models_activity(pm));
+    auto im(obtain_intermediate_models_activity(rp, id));
+    expand_intermediate_models_activity(im);
+    const auto r(assemble_intermediate_models_activity(im));
     BOOST_LOG_SEV(lg, debug) << "Final model: " << r;
     return r;
 }
diff --git a/projects/yarn_dia/spec/transformer_spec.cpp b/projects/yarn_dia/spec/transformer_spec.cpp
index e33eb98..b776e49 100644
--- a/projects/yarn_dia/spec/transformer_spec.cpp
+++ b/projects/yarn_dia/spec/transformer_spec.cpp
@@ -98,7 +98,7 @@ dogen::yarn_dia::context mock_context(const std::string& model_name) {
 
     dogen::yarn::module m;
     m.name(r.model().name());
-    r.model().modules().insert(std::make_pair(m.name(), m));
+    r.model().modules().insert(std::make_pair(m.name().qualified(), m));
     return r;
 }
 
@@ -988,9 +988,9 @@ BOOST_AUTO_TEST_CASE(uml_class_with_inheritance_results_in_expected_object) {
 
     BOOST_REQUIRE(c.model().objects().size() == 2);
     for (const auto& pair : c.model().objects()) {
-        const auto& n(pair.first);
-
         const auto& o(pair.second);
+        const auto& n(o.name());
+
         if (is_type_one(n)) {
             BOOST_CHECK(!has_relationship(relationship_types::parents, o));
             BOOST_CHECK(!has_relationship(relationship_types::root_parents, o));
diff --git a/projects/yarn_dia/src/types/transformer.cpp b/projects/yarn_dia/src/types/transformer.cpp
index 72862c7..b2a47d2 100644
--- a/projects/yarn_dia/src/types/transformer.cpp
+++ b/projects/yarn_dia/src/types/transformer.cpp
@@ -117,7 +117,7 @@ yarn::name transformer::to_name(const std::string& n,
 }
 
 yarn::module& transformer::module_for_name(const yarn::name& n) {
-    auto i(context_.model().modules().find(n));
+    auto i(context_.model().modules().find(n.qualified()));
     if (i == context_.model().modules().end()) {
         const auto sn(n.simple());
         BOOST_LOG_SEV(lg, error) << missing_module_for_name << sn;
@@ -246,19 +246,21 @@ update_object(yarn::object& ao, const processed_object& o, const profile& p) {
 void transformer::to_exception(const processed_object& o, const profile& p) {
     BOOST_LOG_SEV(lg, debug) << "Object is an exception: " << o.id();
 
-    yarn::object vo;
-    update_object(vo, o, p);
-    vo.object_type(yarn::object_types::exception);
-    context_.model().objects().insert(std::make_pair(vo.name(), vo));
+    yarn::object e;
+    update_object(e, o, p);
+    e.object_type(yarn::object_types::exception);
+    auto& objects(context_.model().objects());
+    objects.insert(std::make_pair(e.name().qualified(), e));
 }
 
-void transformer::to_service(const processed_object& po, const profile& p) {
-    BOOST_LOG_SEV(lg, debug) << "Object is a factory: " << po.id();
+void transformer::to_service(const processed_object& o, const profile& p) {
+    BOOST_LOG_SEV(lg, debug) << "Object is a service: " << o.id();
 
-    yarn::object o;
-    o.object_type(yarn::object_types::user_defined_service);
-    update_object(o, po, p);
-    context_.model().objects().insert(std::make_pair(o.name(), o));
+    yarn::object s;
+    s.object_type(yarn::object_types::user_defined_service);
+    update_object(s, o, p);
+    auto& objects(context_.model().objects());
+    objects.insert(std::make_pair(s.name().qualified(), s));
 }
 
 void transformer::to_value_object(const processed_object& o, const profile& p) {
@@ -267,7 +269,8 @@ void transformer::to_value_object(const processed_object& o, const profile& p) {
     yarn::object vo;
     update_object(vo, o, p);
     vo.object_type(yarn::object_types::user_defined_value_object);
-    context_.model().objects().insert(std::make_pair(vo.name(), vo));
+    auto& objects(context_.model().objects());
+    objects.insert(std::make_pair(vo.name().qualified(), vo));
 }
 
 void transformer::to_enumeration(const processed_object& o, const profile& p) {
@@ -303,7 +306,8 @@ void transformer::to_enumeration(const processed_object& o, const profile& p) {
         e.enumerators().push_back(enumerator);
         enumerator_names.insert(enumerator.name());
     }
-    context_.model().enumerations().insert(std::make_pair(e.name(), e));
+    auto& enumerations(context_.model().enumerations());
+    enumerations.insert(std::make_pair(e.name().qualified(), e));
 }
 
 void transformer::to_module(const processed_object& o, const profile& p) {
@@ -311,7 +315,8 @@ void transformer::to_module(const processed_object& o, const profile& p) {
 
     yarn::module m;
     update_element(m, o, p);
-    context_.model().modules().insert(std::make_pair(m.name(), m));
+    auto& modules(context_.model().modules());
+    modules.insert(std::make_pair(m.name().qualified(), m));
 }
 
 void transformer::from_note(const processed_object& o) {
@@ -377,8 +382,8 @@ void transformer::to_concept(const processed_object& o, const profile& p) {
 
     const auto j(context_.parent_ids().find(o.id()));
     c.is_parent(j != context_.parent_ids().end());
-
-    context_.model().concepts().insert(std::make_pair(c.name(), c));
+    auto& concepts(context_.model().concepts());
+    concepts.insert(std::make_pair(c.name().qualified(), c));
 }
 
 bool transformer::is_transformable(const processed_object& o) const {
diff --git a/projects/yarn_dia/src/types/workflow.cpp b/projects/yarn_dia/src/types/workflow.cpp
index 7c1b2b3..de29f2d 100644
--- a/projects/yarn_dia/src/types/workflow.cpp
+++ b/projects/yarn_dia/src/types/workflow.cpp
@@ -76,7 +76,7 @@ void workflow::initialise_context_activity(const std::string& model_name,
     m.is_target(is_target);
 
     const auto mm(create_module_for_model(m.name(), is_target));
-    m.modules().insert(std::make_pair(mm.name(), mm));
+    m.modules().insert(std::make_pair(mm.name().qualified(), mm));
 }
 
 graph_type workflow::generate_graph_activity(const dia::diagram& diagram) {
diff --git a/projects/yarn_json/spec/hydrator_spec.cpp b/projects/yarn_json/spec/hydrator_spec.cpp
index 0ac6a55..4bd1d5f 100644
--- a/projects/yarn_json/spec/hydrator_spec.cpp
+++ b/projects/yarn_json/spec/hydrator_spec.cpp
@@ -231,7 +231,7 @@ BOOST_AUTO_TEST_CASE(trivial_model_hydrates_into_expected_model) {
     const auto& pair(*m.objects().begin());
     const auto& n(pair.second.name());
 
-    BOOST_CHECK(pair.first == n);
+    BOOST_CHECK(pair.first == n.qualified());
     BOOST_CHECK(n.simple() == type_name);
     BOOST_CHECK(n.location().model_module_path() ==
         m.name().location().model_module_path());
@@ -271,7 +271,7 @@ BOOST_AUTO_TEST_CASE(tagged_model_hydrates_into_expected_model) {
     const auto& pair(*m.objects().begin());
     const auto& n(pair.second.name());
 
-    BOOST_CHECK(pair.first == n);
+    BOOST_CHECK(pair.first == n.qualified());
     BOOST_CHECK(n.simple() == type_name);
     BOOST_CHECK(n.location().model_module_path() ==
         m.name().location().model_module_path());
@@ -347,7 +347,7 @@ BOOST_AUTO_TEST_CASE(internal_module_path_model_hydrates_into_expected_model) {
     const auto& pair(*m.objects().begin());
     const auto& n(pair.second.name());
 
-    BOOST_CHECK(pair.first == n);
+    BOOST_CHECK(pair.first == n.qualified());
     {
         const auto mp(n.location().internal_module_path());
         BOOST_REQUIRE(mp.size() == 3);
@@ -404,10 +404,10 @@ BOOST_AUTO_TEST_CASE(cpp_std_model_hydrates_into_expected_model) {
 
     BOOST_CHECK(m.enumerations().empty());
     BOOST_REQUIRE(m.modules().size() == 1);
-    const auto& fn(m.modules().begin()->first);
-    BOOST_REQUIRE(fn.simple() == cpp_std_model_name);
-    BOOST_REQUIRE(fn.location().model_module_path().size() == 1);
-    BOOST_CHECK(fn.location().model_module_path().front() ==
+    const auto& n(m.modules().begin()->second.name());
+    BOOST_REQUIRE(n.simple() == cpp_std_model_name);
+    BOOST_REQUIRE(n.location().model_module_path().size() == 1);
+    BOOST_CHECK(n.location().model_module_path().front() ==
         cpp_std_model_name);
     BOOST_CHECK(m.references().empty());
     BOOST_CHECK(m.leaves().empty());
diff --git a/projects/yarn_json/src/types/hydrator.cpp b/projects/yarn_json/src/types/hydrator.cpp
index d012fc5..f5a9d1e 100644
--- a/projects/yarn_json/src/types/hydrator.cpp
+++ b/projects/yarn_json/src/types/hydrator.cpp
@@ -154,11 +154,11 @@ void hydrator::read_element(const boost::property_tree::ptree& pt,
 
         const auto ot(pt.get_optional<std::string>(object_type_key));
         o.object_type(to_object_type(ot));
-        m.objects().insert(std::make_pair(n, o));
+        m.objects().insert(std::make_pair(n.qualified(), o));
     } else if (meta_type_value == meta_type_primitive_value) {
         yarn::primitive p;
         lambda(p);
-        m.primitives().insert(std::make_pair(n, p));
+        m.primitives().insert(std::make_pair(n.qualified(), p));
     }
     else {
         BOOST_LOG_SEV(lg, error) << invalid_meta_type << meta_type_value;
@@ -203,7 +203,7 @@ yarn::intermediate_model hydrator::read_stream(
     m.name(r.name());
     m.origin_type(r.origin_type());
     m.generation_type(r.generation_type());
-    r.modules().insert(std::make_pair(m.name(), m));
+    r.modules().insert(std::make_pair(m.name().qualified(), m));
 
     const auto i(pt.find(elements_key));
     if (i == pt.not_found() || i->second.empty()) {
diff --git a/test_data/yarn_dia/expected/all_primitives.yarnxml b/test_data/yarn_dia/expected/all_primitives.yarnxml
index 9e97184..dc09770 100644
--- a/test_data/yarn_dia/expected/all_primitives.yarnxml
+++ b/test_data/yarn_dia/expected/all_primitives.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>all_primitives</simple>
-				<qualified>&lt;all_primitives&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>all_primitives</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;all_primitives&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -167,25 +149,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>a_class</simple>
-				<qualified>&lt;all_primitives&gt;&lt;a_class&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>all_primitives</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;all_primitives&gt;&lt;a_class&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_4">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/boost_model.yarnxml b/test_data/yarn_dia/expected/boost_model.yarnxml
index 17fc511..08d6696 100644
--- a/test_data/yarn_dia/expected/boost_model.yarnxml
+++ b/test_data/yarn_dia/expected/boost_model.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>pkg1</simple>
-				<qualified>&lt;boost_model&gt;&lt;pkg1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;pkg1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>boost_model</simple>
-				<qualified>&lt;boost_model&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,25 +194,7 @@
 		<bucket_count>23</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_h</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_h&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;class_h&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -354,25 +300,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>some_service</simple>
-				<qualified>&lt;boost_model&gt;&lt;some_service&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;class_a&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -385,8 +313,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>some_service</simple>
-						<qualified>&lt;boost_model&gt;&lt;some_service&gt;</qualified>
+						<simple>class_a</simple>
+						<qualified>&lt;boost_model&gt;&lt;class_a&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -403,7 +331,7 @@
 							</internal_module_path>
 						</location>
 					</name>
-					<generation_type>2</generation_type>
+					<generation_type>1</generation_type>
 					<origin_type>1</origin_type>
 					<original_model_name></original_model_name>
 					<containing_module>
@@ -415,7 +343,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>3</count>
+					<count>1</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -454,47 +382,75 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::asio::io_service</unparsed_type>
+						<unparsed_type>unsigned int</unparsed_type>
 					</item>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
+				<is_child>0</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</relationships>
+				<object_type>3</object_type>
+				<is_final>1</is_final>
+			</second>
+		</item>
+		<item>
+			<first>&lt;boost_model&gt;&lt;class_derived&gt;</first>
+			<second object_id="_7">
+				<element>
+					<in_global_module>0</in_global_module>
+					<documentation></documentation>
+					<extensions>
+						<fields>
+							<count>0</count>
+							<bucket_count>1</bucket_count>
+							<item_version>0</item_version>
+						</fields>
+					</extensions>
+					<name>
+						<simple>class_derived</simple>
+						<qualified>&lt;boost_model&gt;&lt;class_derived&gt;</qualified>
+						<location>
+							<external_module_path>
 								<count>0</count>
-								<bucket_count>1</bucket_count>
 								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_1</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
+							</external_module_path>
+							<model_module_path>
+								<count>1</count>
+								<item_version>0</item_version>
+								<item>boost_model</item>
+							</model_module_path>
+							<internal_module_path>
 								<count>0</count>
 								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::asio::ip::tcp::socket</unparsed_type>
-					</item>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>1</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>1</count>
+					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
 						<extensions>
@@ -504,7 +460,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_2</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -532,7 +488,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::asio::ip::tcp::acceptor</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -544,39 +500,46 @@
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
+					<item class_id="36" tracking_level="0" version="0">
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>class_base</simple>
+								<qualified>&lt;boost_model&gt;&lt;class_base&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>boost_model</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
 				</relationships>
-				<object_type>1</object_type>
+				<object_type>3</object_type>
 				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_c</simple>
-				<qualified>&lt;boost_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg1</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_7">
+			<first>&lt;boost_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</first>
+			<second object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -721,26 +684,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_a</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_a&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_8">
+			<first>&lt;boost_model&gt;&lt;class_base&gt;</first>
+			<second object_id="_9">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -752,8 +697,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_a</simple>
-						<qualified>&lt;boost_model&gt;&lt;class_a&gt;</qualified>
+						<simple>class_base</simple>
+						<qualified>&lt;boost_model&gt;&lt;class_base&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -821,7 +766,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>unsigned int</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -829,7 +774,7 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
@@ -841,30 +786,12 @@
 					<item_version>0</item_version>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_b</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_b&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_9">
+			<first>&lt;boost_model&gt;&lt;class_b&gt;</first>
+			<second object_id="_10">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1203,26 +1130,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_derived</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_derived&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_10">
+			<first>&lt;boost_model&gt;&lt;class_d&gt;</first>
+			<second object_id="_11">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1234,8 +1143,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_derived</simple>
-						<qualified>&lt;boost_model&gt;&lt;class_derived&gt;</qualified>
+						<simple>class_d</simple>
+						<qualified>&lt;boost_model&gt;&lt;class_d&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1264,7 +1173,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>1</count>
+					<count>4</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -1275,7 +1184,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1303,119 +1212,86 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
+						<unparsed_type>boost::optional&lt;int&gt;</unparsed_type>
 					</item>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
-					<item_version>0</item_version>
-					<item class_id="36" tracking_level="0" version="0">
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>class_base</simple>
-								<qualified>&lt;boost_model&gt;&lt;class_base&gt;</qualified>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_1</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</external_module_path>
 									<model_module_path>
-										<count>1</count>
+										<count>0</count>
 										<item_version>0</item_version>
-										<item>boost_model</item>
 									</model_module_path>
 									<internal_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</internal_module_path>
 								</location>
-							</item>
-						</second>
-					</item>
-				</relationships>
-				<object_type>3</object_type>
-				<is_final>1</is_final>
-			</second>
-		</item>
-		<item>
-			<first>
-				<simple>class_base</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_base&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_11">
-				<element>
-					<in_global_module>0</in_global_module>
-					<documentation></documentation>
-					<extensions>
-						<fields>
-							<count>0</count>
-							<bucket_count>1</bucket_count>
-							<item_version>0</item_version>
-						</fields>
-					</extensions>
-					<name>
-						<simple>class_base</simple>
-						<qualified>&lt;boost_model&gt;&lt;class_base&gt;</qualified>
-						<location>
-							<external_module_path>
+							</type>
+							<children>
 								<count>0</count>
 								<item_version>0</item_version>
-							</external_module_path>
-							<model_module_path>
-								<count>1</count>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>boost::optional&lt;class_a&gt;</unparsed_type>
+					</item>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
 								<item_version>0</item_version>
-								<item>boost_model</item>
-							</model_module_path>
-							<internal_module_path>
+							</fields>
+						</extensions>
+						<name>prop_2</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
 								<count>0</count>
 								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>1</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>1</count>
-					<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>boost::optional&lt;pkg1::class_c&gt;</unparsed_type>
+					</item>
 					<item>
 						<documentation></documentation>
 						<extensions>
@@ -1425,7 +1301,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_3</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1453,7 +1329,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
+						<unparsed_type>boost::optional&lt;std::vector&lt;class_a&gt;&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1461,7 +1337,7 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
@@ -1473,29 +1349,11 @@
 					<item_version>0</item_version>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_d</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_d&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;some_service&gt;</first>
 			<second object_id="_12">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -1508,8 +1366,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_d</simple>
-						<qualified>&lt;boost_model&gt;&lt;class_d&gt;</qualified>
+						<simple>some_service</simple>
+						<qualified>&lt;boost_model&gt;&lt;some_service&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1526,7 +1384,7 @@
 							</internal_module_path>
 						</location>
 					</name>
-					<generation_type>1</generation_type>
+					<generation_type>2</generation_type>
 					<origin_type>1</origin_type>
 					<original_model_name></original_model_name>
 					<containing_module>
@@ -1538,7 +1396,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>4</count>
+					<count>3</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -1577,7 +1435,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::optional&lt;int&gt;</unparsed_type>
+						<unparsed_type>boost::asio::io_service</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1616,7 +1474,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::optional&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>boost::asio::ip::tcp::socket</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1655,46 +1513,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::optional&lt;pkg1::class_c&gt;</unparsed_type>
-					</item>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_3</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::optional&lt;std::vector&lt;class_a&gt;&gt;</unparsed_type>
+						<unparsed_type>boost::asio::ip::tcp::acceptor</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1713,30 +1532,12 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</relationships>
-				<object_type>3</object_type>
+				<object_type>1</object_type>
 				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_e</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_e&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;class_e&gt;</first>
 			<second object_id="_13">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -1959,25 +1760,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_f</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_f&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;class_f&gt;</first>
 			<second object_id="_14">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2278,25 +2061,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_g</simple>
-				<qualified>&lt;boost_model&gt;&lt;class_g&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>boost_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;boost_model&gt;&lt;class_g&gt;</first>
 			<second object_id="_15">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/class_in_a_package.yarnxml b/test_data/yarn_dia/expected/class_in_a_package.yarnxml
index 07453d9..1352040 100644
--- a/test_data/yarn_dia/expected/class_in_a_package.yarnxml
+++ b/test_data/yarn_dia/expected/class_in_a_package.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>package1</simple>
-				<qualified>&lt;class_in_a_package&gt;&lt;package1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_in_a_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_in_a_package&gt;&lt;package1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_in_a_package</simple>
-				<qualified>&lt;class_in_a_package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_in_a_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_in_a_package&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,26 +194,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>first_class</simple>
-				<qualified>&lt;class_in_a_package&gt;&lt;package1&gt;&lt;first_class&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_in_a_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>package1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_in_a_package&gt;&lt;package1&gt;&lt;first_class&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/class_without_attributes.yarnxml b/test_data/yarn_dia/expected/class_without_attributes.yarnxml
index f1c4a78..306534c 100644
--- a/test_data/yarn_dia/expected/class_without_attributes.yarnxml
+++ b/test_data/yarn_dia/expected/class_without_attributes.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>package_1</simple>
-				<qualified>&lt;class_without_attributes&gt;&lt;package_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_without_attributes</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_without_attributes&gt;&lt;package_1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_without_attributes</simple>
-				<qualified>&lt;class_without_attributes&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_without_attributes</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_without_attributes&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,26 +194,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_1</simple>
-				<qualified>&lt;class_without_attributes&gt;&lt;package_1&gt;&lt;class_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_without_attributes</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>package_1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_without_attributes&gt;&lt;package_1&gt;&lt;class_1&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/class_without_package.yarnxml b/test_data/yarn_dia/expected/class_without_package.yarnxml
index a32f4e9..b613ac6 100644
--- a/test_data/yarn_dia/expected/class_without_package.yarnxml
+++ b/test_data/yarn_dia/expected/class_without_package.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>class_without_package</simple>
-				<qualified>&lt;class_without_package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_without_package&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -167,25 +149,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_1</simple>
-				<qualified>&lt;class_without_package&gt;&lt;class_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>class_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;class_without_package&gt;&lt;class_1&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_4">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/classes_inout_package.yarnxml b/test_data/yarn_dia/expected/classes_inout_package.yarnxml
index 8d3e56a..13d990e 100644
--- a/test_data/yarn_dia/expected/classes_inout_package.yarnxml
+++ b/test_data/yarn_dia/expected/classes_inout_package.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>package_1</simple>
-				<qualified>&lt;classes_inout_package&gt;&lt;package_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_inout_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_inout_package&gt;&lt;package_1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>classes_inout_package</simple>
-				<qualified>&lt;classes_inout_package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_inout_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_inout_package&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,25 +194,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_2</simple>
-				<qualified>&lt;classes_inout_package&gt;&lt;class_2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_inout_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_inout_package&gt;&lt;class_2&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -354,26 +300,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_1</simple>
-				<qualified>&lt;classes_inout_package&gt;&lt;package_1&gt;&lt;class_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_inout_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>package_1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_inout_package&gt;&lt;package_1&gt;&lt;class_1&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/classes_without_package.yarnxml b/test_data/yarn_dia/expected/classes_without_package.yarnxml
index 9483a9d..d7c272b 100644
--- a/test_data/yarn_dia/expected/classes_without_package.yarnxml
+++ b/test_data/yarn_dia/expected/classes_without_package.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>classes_without_package</simple>
-				<qualified>&lt;classes_without_package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -167,25 +149,7 @@
 		<bucket_count>11</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_1</simple>
-				<qualified>&lt;classes_without_package&gt;&lt;class_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;&lt;class_5&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_4">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -198,8 +162,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_1</simple>
-						<qualified>&lt;classes_without_package&gt;&lt;class_1&gt;</qualified>
+						<simple>class_5</simple>
+						<qualified>&lt;classes_without_package&gt;&lt;class_5&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -291,25 +255,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_2</simple>
-				<qualified>&lt;classes_without_package&gt;&lt;class_2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;&lt;class_1&gt;</first>
 			<second object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -322,8 +268,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_2</simple>
-						<qualified>&lt;classes_without_package&gt;&lt;class_2&gt;</qualified>
+						<simple>class_1</simple>
+						<qualified>&lt;classes_without_package&gt;&lt;class_1&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -415,25 +361,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_3</simple>
-				<qualified>&lt;classes_without_package&gt;&lt;class_3&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;&lt;class_2&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -446,8 +374,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_3</simple>
-						<qualified>&lt;classes_without_package&gt;&lt;class_3&gt;</qualified>
+						<simple>class_2</simple>
+						<qualified>&lt;classes_without_package&gt;&lt;class_2&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -539,25 +467,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_5</simple>
-				<qualified>&lt;classes_without_package&gt;&lt;class_5&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;&lt;class_4&gt;</first>
 			<second object_id="_7">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -570,8 +480,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_5</simple>
-						<qualified>&lt;classes_without_package&gt;&lt;class_5&gt;</qualified>
+						<simple>class_4</simple>
+						<qualified>&lt;classes_without_package&gt;&lt;class_4&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -663,25 +573,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_4</simple>
-				<qualified>&lt;classes_without_package&gt;&lt;class_4&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>classes_without_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;classes_without_package&gt;&lt;class_3&gt;</first>
 			<second object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -694,8 +586,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_4</simple>
-						<qualified>&lt;classes_without_package&gt;&lt;class_4&gt;</qualified>
+						<simple>class_3</simple>
+						<qualified>&lt;classes_without_package&gt;&lt;class_3&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
diff --git a/test_data/yarn_dia/expected/comments.yarnxml b/test_data/yarn_dia/expected/comments.yarnxml
index 78ae6a2..cc09fa6 100644
--- a/test_data/yarn_dia/expected/comments.yarnxml
+++ b/test_data/yarn_dia/expected/comments.yarnxml
@@ -51,26 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>package2</simple>
-				<qualified>&lt;comments&gt;&lt;package&gt;&lt;package2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>comments</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>package</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;comments&gt;&lt;package&gt;&lt;package2&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -128,25 +109,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>package</simple>
-				<qualified>&lt;comments&gt;&lt;package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>comments</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;comments&gt;&lt;package&gt;</first>
 			<second object_id="_2">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -203,25 +166,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>comments</simple>
-				<qualified>&lt;comments&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>comments</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;comments&gt;</first>
 			<second object_id="_4">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -322,25 +267,7 @@ This comment will be applied to the model namespace itself.
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>multi_line</simple>
-				<qualified>&lt;comments&gt;&lt;multi_line&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>comments</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;comments&gt;&lt;multi_line&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -411,25 +338,7 @@ third line with &quot;quote&quot;
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>one_line</simple>
-				<qualified>&lt;comments&gt;&lt;one_line&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>comments</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;comments&gt;&lt;one_line&gt;</first>
 			<second object_id="_9">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/empty.yarnxml b/test_data/yarn_dia/expected/empty.yarnxml
index 581b5dc..f579fe4 100644
--- a/test_data/yarn_dia/expected/empty.yarnxml
+++ b/test_data/yarn_dia/expected/empty.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>empty</simple>
-				<qualified>&lt;empty&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>empty</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;empty&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/empty_package.yarnxml b/test_data/yarn_dia/expected/empty_package.yarnxml
index c8c3a3c..dbd14b1 100644
--- a/test_data/yarn_dia/expected/empty_package.yarnxml
+++ b/test_data/yarn_dia/expected/empty_package.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>package_1</simple>
-				<qualified>&lt;empty_package&gt;&lt;package_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>empty_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;empty_package&gt;&lt;package_1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>empty_package</simple>
-				<qualified>&lt;empty_package&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>empty_package</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;empty_package&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/enumeration.yarnxml b/test_data/yarn_dia/expected/enumeration.yarnxml
index 48e1085..3e53f24 100644
--- a/test_data/yarn_dia/expected/enumeration.yarnxml
+++ b/test_data/yarn_dia/expected/enumeration.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>pkg1</simple>
-				<qualified>&lt;enumeration&gt;&lt;pkg1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;&lt;pkg1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>enumeration</simple>
-				<qualified>&lt;enumeration&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -225,26 +189,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="28" tracking_level="0" version="0">
-			<first>
-				<simple>shape_types</simple>
-				<qualified>&lt;enumeration&gt;&lt;pkg1&gt;&lt;shape_types&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;&lt;pkg1&gt;&lt;shape_types&gt;</first>
 			<second class_id="4" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -336,25 +281,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>colour_types</simple>
-				<qualified>&lt;enumeration&gt;&lt;colour_types&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;&lt;colour_types&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -445,25 +372,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>book_types</simple>
-				<qualified>&lt;enumeration&gt;&lt;book_types&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;&lt;book_types&gt;</first>
 			<second object_id="_7">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -554,25 +463,7 @@ this is a long comment
 		<bucket_count>2</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="32" tracking_level="0" version="0">
-			<first>
-				<simple>a_class</simple>
-				<qualified>&lt;enumeration&gt;&lt;a_class&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>enumeration</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;enumeration&gt;&lt;a_class&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/exception.yarnxml b/test_data/yarn_dia/expected/exception.yarnxml
index 0a7438c..7febcbc 100644
--- a/test_data/yarn_dia/expected/exception.yarnxml
+++ b/test_data/yarn_dia/expected/exception.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>pkg</simple>
-				<qualified>&lt;exception&gt;&lt;pkg&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>exception</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;exception&gt;&lt;pkg&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>exception</simple>
-				<qualified>&lt;exception&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>exception</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;exception&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,25 +194,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>a_class</simple>
-				<qualified>&lt;exception&gt;&lt;a_class&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>exception</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;exception&gt;&lt;a_class&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -354,26 +300,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>catastrophic_error</simple>
-				<qualified>&lt;exception&gt;&lt;pkg&gt;&lt;catastrophic_error&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>exception</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;exception&gt;&lt;pkg&gt;&lt;catastrophic_error&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -441,25 +368,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>my_error</simple>
-				<qualified>&lt;exception&gt;&lt;my_error&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>exception</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;exception&gt;&lt;my_error&gt;</first>
 			<second object_id="_7">
 				<element>
 					<in_global_module>0</in_global_module>
diff --git a/test_data/yarn_dia/expected/std_model.yarnxml b/test_data/yarn_dia/expected/std_model.yarnxml
index 0f6f470..2429b21 100644
--- a/test_data/yarn_dia/expected/std_model.yarnxml
+++ b/test_data/yarn_dia/expected/std_model.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>pkg1</simple>
-				<qualified>&lt;std_model&gt;&lt;pkg1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;std_model&gt;&lt;pkg1&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>std_model</simple>
-				<qualified>&lt;std_model&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;std_model&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -230,25 +194,7 @@
 		<bucket_count>23</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>primitives</simple>
-				<qualified>&lt;std_model&gt;&lt;primitives&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;std_model&gt;&lt;primitives&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -627,25 +573,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_j</simple>
-				<qualified>&lt;std_model&gt;&lt;class_j&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;std_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -658,8 +586,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_j</simple>
-						<qualified>&lt;std_model&gt;&lt;class_j&gt;</qualified>
+						<simple>class_c</simple>
+						<qualified>&lt;std_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -671,8 +599,9 @@
 								<item>std_model</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>0</count>
+								<count>1</count>
 								<item_version>0</item_version>
+								<item>pkg1</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -688,7 +617,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>3</count>
+					<count>2</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -727,7 +656,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::pair&lt;int,int&gt;</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -766,8 +695,75 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::pair&lt;std::string,std::string&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
 					</item>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
+				<is_child>0</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</relationships>
+				<object_type>3</object_type>
+				<is_final>1</is_final>
+			</second>
+		</item>
+		<item>
+			<first>&lt;std_model&gt;&lt;base&gt;</first>
+			<second object_id="_7">
+				<element>
+					<in_global_module>0</in_global_module>
+					<documentation></documentation>
+					<extensions>
+						<fields>
+							<count>0</count>
+							<bucket_count>1</bucket_count>
+							<item_version>0</item_version>
+						</fields>
+					</extensions>
+					<name>
+						<simple>base</simple>
+						<qualified>&lt;std_model&gt;&lt;base&gt;</qualified>
+						<location>
+							<external_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</external_module_path>
+							<model_module_path>
+								<count>1</count>
+								<item_version>0</item_version>
+								<item>std_model</item>
+							</model_module_path>
+							<internal_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>1</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>1</count>
+					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
 						<extensions>
@@ -777,7 +773,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_2</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -805,7 +801,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;std::pair&lt;std::string,int&gt;&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;std::string&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -813,7 +809,7 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
@@ -825,30 +821,12 @@
 					<item_version>0</item_version>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_d</simple>
-				<qualified>&lt;std_model&gt;&lt;class_d&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_7">
+			<first>&lt;std_model&gt;&lt;class_j&gt;</first>
+			<second object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -860,8 +838,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_d</simple>
-						<qualified>&lt;std_model&gt;&lt;class_d&gt;</qualified>
+						<simple>class_j</simple>
+						<qualified>&lt;std_model&gt;&lt;class_j&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -890,7 +868,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>6</count>
+					<count>3</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -929,7 +907,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;std::string&gt;</unparsed_type>
+						<unparsed_type>std::pair&lt;int,int&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -968,7 +946,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::pair&lt;std::string,std::string&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1007,8 +985,75 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;pkg1::class_c&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;std::pair&lt;std::string,int&gt;&gt;</unparsed_type>
 					</item>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
+				<is_child>0</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</relationships>
+				<object_type>3</object_type>
+				<is_final>1</is_final>
+			</second>
+		</item>
+		<item>
+			<first>&lt;std_model&gt;&lt;class_b&gt;</first>
+			<second object_id="_9">
+				<element>
+					<in_global_module>0</in_global_module>
+					<documentation></documentation>
+					<extensions>
+						<fields>
+							<count>0</count>
+							<bucket_count>1</bucket_count>
+							<item_version>0</item_version>
+						</fields>
+					</extensions>
+					<name>
+						<simple>class_b</simple>
+						<qualified>&lt;std_model&gt;&lt;class_b&gt;</qualified>
+						<location>
+							<external_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</external_module_path>
+							<model_module_path>
+								<count>1</count>
+								<item_version>0</item_version>
+								<item>std_model</item>
+							</model_module_path>
+							<internal_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>1</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>6</count>
+					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
 						<extensions>
@@ -1018,7 +1063,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_3</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1046,7 +1091,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;unsigned int&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;std::string&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1057,7 +1102,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_4</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1085,7 +1130,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1096,7 +1141,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_5</name>
+						<name>prop_2</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1124,93 +1169,8 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;std::list&lt;unsigned int&gt;&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;pkg1::class_c&gt;</unparsed_type>
 					</item>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</relationships>
-				<object_type>3</object_type>
-				<is_final>1</is_final>
-			</second>
-		</item>
-		<item>
-			<first>
-				<simple>class_g</simple>
-				<qualified>&lt;std_model&gt;&lt;class_g&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_8">
-				<element>
-					<in_global_module>0</in_global_module>
-					<documentation></documentation>
-					<extensions>
-						<fields>
-							<count>0</count>
-							<bucket_count>1</bucket_count>
-							<item_version>0</item_version>
-						</fields>
-					</extensions>
-					<name>
-						<simple>class_g</simple>
-						<qualified>&lt;std_model&gt;&lt;class_g&gt;</qualified>
-						<location>
-							<external_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</external_module_path>
-							<model_module_path>
-								<count>1</count>
-								<item_version>0</item_version>
-								<item>std_model</item>
-							</model_module_path>
-							<internal_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>1</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>3</count>
-					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
 						<extensions>
@@ -1220,7 +1180,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_3</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1248,7 +1208,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;class_a,std::vector&lt;pkg1::class_c&gt;&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;unsigned int&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1259,7 +1219,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_4</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1287,7 +1247,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;pkg1::class_c,std::list&lt;class_a&gt;&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1298,7 +1258,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_2</name>
+						<name>prop_5</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1326,7 +1286,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;std::string, class_a&gt;</unparsed_type>
+						<unparsed_type>std::vector&lt;std::vector&lt;unsigned int&gt;&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1350,26 +1310,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>some_service</simple>
-				<qualified>&lt;std_model&gt;&lt;some_service&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_9">
+			<first>&lt;std_model&gt;&lt;class_d&gt;</first>
+			<second object_id="_10">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1381,8 +1323,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>some_service</simple>
-						<qualified>&lt;std_model&gt;&lt;some_service&gt;</qualified>
+						<simple>class_d</simple>
+						<qualified>&lt;std_model&gt;&lt;class_d&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1399,7 +1341,7 @@
 							</internal_module_path>
 						</location>
 					</name>
-					<generation_type>2</generation_type>
+					<generation_type>1</generation_type>
 					<origin_type>1</origin_type>
 					<original_model_name></original_model_name>
 					<containing_module>
@@ -1411,7 +1353,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>4</count>
+					<count>6</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -1450,7 +1392,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::shared_ptr&lt;base&gt;</unparsed_type>
+						<unparsed_type>std::list&lt;std::string&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1489,7 +1431,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::weak_ptr&lt;base&gt;</unparsed_type>
+						<unparsed_type>std::list&lt;class_a&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1528,7 +1470,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unique_ptr&lt;base&gt;</unparsed_type>
+						<unparsed_type>std::list&lt;pkg1::class_c&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1567,7 +1509,85 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::function</unparsed_type>
+						<unparsed_type>std::list&lt;unsigned int&gt;</unparsed_type>
+					</item>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_4</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>std::list&lt;class_a&gt;</unparsed_type>
+					</item>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_5</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>std::list&lt;std::list&lt;unsigned int&gt;&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1586,32 +1606,13 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</relationships>
-				<object_type>1</object_type>
+				<object_type>3</object_type>
 				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_c</simple>
-				<qualified>&lt;std_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg1</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_10">
+			<first>&lt;std_model&gt;&lt;class_a&gt;</first>
+			<second object_id="_11">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1623,8 +1624,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_c</simple>
-						<qualified>&lt;std_model&gt;&lt;pkg1&gt;&lt;class_c&gt;</qualified>
+						<simple>class_a</simple>
+						<qualified>&lt;std_model&gt;&lt;class_a&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1636,9 +1637,8 @@
 								<item>std_model</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>1</count>
+								<count>0</count>
 								<item_version>0</item_version>
-								<item>pkg1</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -1660,12 +1660,23 @@
 						<documentation></documentation>
 						<extensions>
 							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
+								<count>1</count>
+								<bucket_count>2</bucket_count>
 								<item_version>0</item_version>
+								<item>
+									<first>dia.identity_attribute</first>
+									<second>
+										<value>
+											<px class_id_reference="1" object_id="_12">
+												<value></value>
+												<content>true</content>
+											</px>
+										</value>
+									</second>
+								</item>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1693,10 +1704,11 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
+						<unparsed_type>std::string</unparsed_type>
 					</item>
 					<item>
-						<documentation></documentation>
+						<documentation>test inclusion duplicates
+</documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -1704,7 +1716,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1732,7 +1744,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::string</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1756,26 +1768,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_b</simple>
-				<qualified>&lt;std_model&gt;&lt;class_b&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_11">
+			<first>&lt;std_model&gt;&lt;class_e&gt;</first>
+			<second object_id="_13">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1787,8 +1781,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_b</simple>
-						<qualified>&lt;std_model&gt;&lt;class_b&gt;</qualified>
+						<simple>class_e</simple>
+						<qualified>&lt;std_model&gt;&lt;class_e&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1856,7 +1850,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;std::string&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;std::string&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1895,7 +1889,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;class_a&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1934,7 +1928,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;pkg1::class_c&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;pkg1::class_c&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -1973,7 +1967,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;unsigned int&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;unsigned int&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2012,7 +2006,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;class_a&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2051,7 +2045,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;std::vector&lt;unsigned int&gt;&gt;</unparsed_type>
+						<unparsed_type>std::deque&lt;std::deque&lt;unsigned int&gt;&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2075,26 +2069,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>derived</simple>
-				<qualified>&lt;std_model&gt;&lt;derived&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_12">
+			<first>&lt;std_model&gt;&lt;class_h&gt;</first>
+			<second object_id="_14">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2106,8 +2082,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>derived</simple>
-						<qualified>&lt;std_model&gt;&lt;derived&gt;</qualified>
+						<simple>class_h</simple>
+						<qualified>&lt;std_model&gt;&lt;class_h&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2136,7 +2112,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>1</count>
+					<count>2</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -2147,7 +2123,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2175,76 +2151,71 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::list&lt;pkg1::class_c&gt;</unparsed_type>
+						<unparsed_type>std::unordered_set&lt;class_a&gt;</unparsed_type>
 					</item>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
-					<item_version>0</item_version>
-					<item class_id="36" tracking_level="0" version="0">
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>base</simple>
-								<qualified>&lt;std_model&gt;&lt;base&gt;</qualified>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_1</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</external_module_path>
 									<model_module_path>
-										<count>1</count>
+										<count>0</count>
 										<item_version>0</item_version>
-										<item>std_model</item>
 									</model_module_path>
 									<internal_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</internal_module_path>
 								</location>
-							</item>
-						</second>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>std::unordered_set&lt;pkg1::class_c&gt;</unparsed_type>
 					</item>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
+				<is_child>0</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
 				</relationships>
 				<object_type>3</object_type>
 				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_a</simple>
-				<qualified>&lt;std_model&gt;&lt;class_a&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_13">
+			<first>&lt;std_model&gt;&lt;class_f&gt;</first>
+			<second object_id="_15">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2256,8 +2227,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_a</simple>
-						<qualified>&lt;std_model&gt;&lt;class_a&gt;</qualified>
+						<simple>class_f</simple>
+						<qualified>&lt;std_model&gt;&lt;class_f&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2286,29 +2257,18 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>2</count>
+					<count>3</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
 						<extensions>
 							<fields>
-								<count>1</count>
-								<bucket_count>2</bucket_count>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
 								<item_version>0</item_version>
-								<item>
-									<first>dia.identity_attribute</first>
-									<second>
-										<value>
-											<px class_id_reference="1" object_id="_14">
-												<value></value>
-												<content>true</content>
-											</px>
-										</value>
-									</second>
-								</item>
 							</fields>
 						</extensions>
-						<name>prop0</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2336,11 +2296,10 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::string</unparsed_type>
+						<unparsed_type>std::unordered_map&lt;std::string,std::string&gt;</unparsed_type>
 					</item>
 					<item>
-						<documentation>test inclusion duplicates
-</documentation>
+						<documentation></documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -2348,7 +2307,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop1</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2376,7 +2335,46 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::string</unparsed_type>
+						<unparsed_type>std::unordered_map&lt;std::string,class_a&gt;</unparsed_type>
+					</item>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_2</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>std::unordered_map&lt;class_a,pkg1::class_c&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2400,26 +2398,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_e</simple>
-				<qualified>&lt;std_model&gt;&lt;class_e&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_15">
+			<first>&lt;std_model&gt;&lt;some_service&gt;</first>
+			<second object_id="_16">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2431,8 +2411,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_e</simple>
-						<qualified>&lt;std_model&gt;&lt;class_e&gt;</qualified>
+						<simple>some_service</simple>
+						<qualified>&lt;std_model&gt;&lt;some_service&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2449,7 +2429,7 @@
 							</internal_module_path>
 						</location>
 					</name>
-					<generation_type>1</generation_type>
+					<generation_type>2</generation_type>
 					<origin_type>1</origin_type>
 					<original_model_name></original_model_name>
 					<containing_module>
@@ -2461,7 +2441,7 @@
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>6</count>
+					<count>4</count>
 					<item_version>0</item_version>
 					<item>
 						<documentation></documentation>
@@ -2500,7 +2480,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;std::string&gt;</unparsed_type>
+						<unparsed_type>std::shared_ptr&lt;base&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2539,7 +2519,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;class_a&gt;</unparsed_type>
+						<unparsed_type>std::weak_ptr&lt;base&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2578,7 +2558,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;pkg1::class_c&gt;</unparsed_type>
+						<unparsed_type>std::unique_ptr&lt;base&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2617,85 +2597,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;unsigned int&gt;</unparsed_type>
-					</item>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_4</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;class_a&gt;</unparsed_type>
-					</item>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_5</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>std::deque&lt;std::deque&lt;unsigned int&gt;&gt;</unparsed_type>
+						<unparsed_type>std::function</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2714,31 +2616,13 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</relationships>
-				<object_type>3</object_type>
+				<object_type>1</object_type>
 				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_f</simple>
-				<qualified>&lt;std_model&gt;&lt;class_f&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_16">
+			<first>&lt;std_model&gt;&lt;class_g&gt;</first>
+			<second object_id="_17">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2750,8 +2634,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>class_f</simple>
-						<qualified>&lt;std_model&gt;&lt;class_f&gt;</qualified>
+						<simple>class_g</simple>
+						<qualified>&lt;std_model&gt;&lt;class_g&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2819,7 +2703,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;std::string,std::string&gt;</unparsed_type>
+						<unparsed_type>std::unordered_map&lt;class_a,std::vector&lt;pkg1::class_c&gt;&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2858,7 +2742,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;std::string,class_a&gt;</unparsed_type>
+						<unparsed_type>std::unordered_map&lt;pkg1::class_c,std::list&lt;class_a&gt;&gt;</unparsed_type>
 					</item>
 					<item>
 						<documentation></documentation>
@@ -2897,7 +2781,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_map&lt;class_a,pkg1::class_c&gt;</unparsed_type>
+						<unparsed_type>std::unordered_map&lt;std::string, class_a&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2921,26 +2805,8 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>base</simple>
-				<qualified>&lt;std_model&gt;&lt;base&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_17">
+			<first>&lt;std_model&gt;&lt;derived&gt;</first>
+			<second object_id="_18">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2952,8 +2818,8 @@
 						</fields>
 					</extensions>
 					<name>
-						<simple>base</simple>
-						<qualified>&lt;std_model&gt;&lt;base&gt;</qualified>
+						<simple>derived</simple>
+						<qualified>&lt;std_model&gt;&lt;derived&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2993,7 +2859,7 @@
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -3021,7 +2887,7 @@
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>std::vector&lt;std::string&gt;</unparsed_type>
+						<unparsed_type>std::list&lt;pkg1::class_c&gt;</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -3029,179 +2895,42 @@
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
-				</relationships>
-				<object_type>3</object_type>
-				<is_final>0</is_final>
-			</second>
-		</item>
-		<item>
-			<first>
-				<simple>class_h</simple>
-				<qualified>&lt;std_model&gt;&lt;class_h&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>std_model</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_18">
-				<element>
-					<in_global_module>0</in_global_module>
-					<documentation></documentation>
-					<extensions>
-						<fields>
-							<count>0</count>
-							<bucket_count>1</bucket_count>
+					<item class_id="36" tracking_level="0" version="0">
+						<first>2</first>
+						<second>
+							<count>1</count>
 							<item_version>0</item_version>
-						</fields>
-					</extensions>
-					<name>
-						<simple>class_h</simple>
-						<qualified>&lt;std_model&gt;&lt;class_h&gt;</qualified>
-						<location>
-							<external_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</external_module_path>
-							<model_module_path>
-								<count>1</count>
-								<item_version>0</item_version>
-								<item>std_model</item>
-							</model_module_path>
-							<internal_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>1</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>2</count>
-					<item_version>0</item_version>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_0</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_set&lt;class_a&gt;</unparsed_type>
-					</item>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_1</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
+							<item>
+								<simple>base</simple>
+								<qualified>&lt;std_model&gt;&lt;base&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</external_module_path>
 									<model_module_path>
-										<count>0</count>
+										<count>1</count>
 										<item_version>0</item_version>
+										<item>std_model</item>
 									</model_module_path>
 									<internal_module_path>
 										<count>0</count>
 										<item_version>0</item_version>
 									</internal_module_path>
 								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>std::unordered_set&lt;pkg1::class_c&gt;</unparsed_type>
+							</item>
+						</second>
 					</item>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
 				</relationships>
 				<object_type>3</object_type>
 				<is_final>1</is_final>
diff --git a/test_data/yarn_dia/expected/trivial_inheritance.yarnxml b/test_data/yarn_dia/expected/trivial_inheritance.yarnxml
index d9c3372..6af1811 100644
--- a/test_data/yarn_dia/expected/trivial_inheritance.yarnxml
+++ b/test_data/yarn_dia/expected/trivial_inheritance.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>11</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>pkg4</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg4&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg4&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>trivial_inheritance</simple>
-				<qualified>&lt;trivial_inheritance&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -215,25 +179,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>pkg1</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg2&gt;</first>
 			<second object_id="_5">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -246,8 +192,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>pkg1</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;</qualified>
+						<simple>pkg2</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -278,25 +224,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>pkg2</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg1&gt;</first>
 			<second object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -309,8 +237,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>pkg2</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;</qualified>
+						<simple>pkg1</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -341,25 +269,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>pkg3</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg3&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg3&gt;</first>
 			<second object_id="_7">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -424,25 +334,7 @@ in the context of inheritance.
 		<bucket_count>47</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>move_ctor_empty_descendant</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_empty_descendant&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;move_ctor_empty_descendant&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_8">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -536,26 +428,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>parent</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;child&gt;</first>
 			<second object_id="_9">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -568,8 +441,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>parent</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</qualified>
+						<simple>child</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;child&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -610,7 +483,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type class_id="35" tracking_level="0" version="0">
 							<type>
 								<simple></simple>
@@ -638,7 +511,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>unsigned int</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -646,10 +519,104 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
+				<is_child>1</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
+					<item_version>0</item_version>
+					<item>
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>parent</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>trivial_inheritance</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>pkg1</item>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
+				</relationships>
+				<object_type>3</object_type>
+				<is_final>1</is_final>
+			</second>
+		</item>
+		<item>
+			<first>&lt;trivial_inheritance&gt;&lt;base&gt;</first>
+			<second object_id="_10">
+				<element>
+					<in_global_module>0</in_global_module>
+					<documentation></documentation>
+					<extensions>
+						<fields>
+							<count>0</count>
+							<bucket_count>1</bucket_count>
+							<item_version>0</item_version>
+						</fields>
+					</extensions>
+					<name>
+						<simple>base</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;base&gt;</qualified>
+						<location>
+							<external_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</external_module_path>
+							<model_module_path>
+								<count>1</count>
+								<item_version>0</item_version>
+								<item>trivial_inheritance</item>
+							</model_module_path>
+							<internal_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>1</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>1</is_parent>
+				<is_visitable>1</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
 				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
@@ -662,26 +629,8 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child_of_a_child2</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_10">
+			<first>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</first>
+			<second object_id="_11">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -693,8 +642,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child_of_a_child2</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child2&gt;</qualified>
+						<simple>parent</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -706,8 +655,9 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>0</count>
+								<count>1</count>
 								<item_version>0</item_version>
+								<item>pkg1</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -734,7 +684,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_2</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -770,72 +720,28 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
+				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
-					<item>
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>third_child_with_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>trivial_inheritance</item>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</item>
-						</second>
-					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;child&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg1</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_11">
+			<first>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</first>
+			<second object_id="_12">
 				<element>
 					<in_global_module>0</in_global_module>
-					<documentation></documentation>
+					<documentation>Base class for scenario that tests code generated move contructors.
+</documentation>
 					<extensions>
 						<fields>
 							<count>0</count>
@@ -844,8 +750,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;child&gt;</qualified>
+						<simple>move_ctor_base</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -857,9 +763,8 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>1</count>
+								<count>0</count>
 								<item_version>0</item_version>
-								<item>pkg1</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -878,7 +783,8 @@ in the context of inheritance.
 					<count>1</count>
 					<item_version>0</item_version>
 					<item>
-						<documentation></documentation>
+						<documentation>Force manual move constructor.
+</documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -886,7 +792,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -914,7 +820,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
+						<unparsed_type>boost::filesystem::path</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -922,69 +828,24 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
+				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
-					<item>
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>parent</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;pkg1&gt;&lt;parent&gt;</qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>trivial_inheritance</item>
-									</model_module_path>
-									<internal_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>pkg1</item>
-									</internal_module_path>
-								</location>
-							</item>
-						</second>
-					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child_of_a_child1</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_12">
+			<first>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</first>
+			<second object_id="_13">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -996,8 +857,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child_of_a_child1</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child1&gt;</qualified>
+						<simple>parent_without_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1034,152 +895,23 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
+				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
-					<item>
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>third_child_with_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>trivial_inheritance</item>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</item>
-						</second>
-					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>service_interface</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;service_interface&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_13">
-				<element>
-					<in_global_module>0</in_global_module>
-					<documentation></documentation>
-					<extensions>
-						<fields>
-							<count>0</count>
-							<bucket_count>1</bucket_count>
-							<item_version>0</item_version>
-						</fields>
-					</extensions>
-					<name>
-						<simple>service_interface</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;service_interface&gt;</qualified>
-						<location>
-							<external_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</external_module_path>
-							<model_module_path>
-								<count>1</count>
-								<item_version>0</item_version>
-								<item>trivial_inheritance</item>
-							</model_module_path>
-							<internal_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>2</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</relationships>
-				<object_type>1</object_type>
-				<is_final>1</is_final>
-			</second>
-		</item>
-		<item>
-			<first>
-				<simple>third_child_with_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</first>
 			<second object_id="_14">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -1192,8 +924,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>third_child_with_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
+						<simple>parent</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1205,8 +937,9 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>0</count>
+								<count>1</count>
 								<item_version>0</item_version>
+								<item>pkg2</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -1233,7 +966,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1261,7 +994,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>unsigned int</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1273,63 +1006,19 @@ in the context of inheritance.
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
+				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
-					<item>
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>parent_with_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>trivial_inheritance</item>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</item>
-						</second>
-					</item>
 				</relationships>
 				<object_type>3</object_type>
 				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>parent_without_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;second_child_without_members&gt;</first>
 			<second object_id="_15">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -1342,8 +1031,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>parent_without_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
+						<simple>second_child_without_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;second_child_without_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1380,46 +1069,53 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
+					<item>
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>parent_with_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>trivial_inheritance</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>move_ctor_base</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</first>
 			<second object_id="_16">
 				<element>
 					<in_global_module>0</in_global_module>
-					<documentation>Base class for scenario that tests code generated move contructors.
-</documentation>
+					<documentation></documentation>
 					<extensions>
 						<fields>
 							<count>0</count>
@@ -1428,8 +1124,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>move_ctor_base</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</qualified>
+						<simple>third_child_with_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1461,8 +1157,7 @@ in the context of inheritance.
 					<count>1</count>
 					<item_version>0</item_version>
 					<item>
-						<documentation>Force manual move constructor.
-</documentation>
+						<documentation></documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -1470,7 +1165,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1498,7 +1193,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::filesystem::path</unparsed_type>
+						<unparsed_type>unsigned int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -1510,91 +1205,6 @@ in the context of inheritance.
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
-				<is_root_parent_visitable>0</is_root_parent_visitable>
-				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</relationships>
-				<object_type>3</object_type>
-				<is_final>0</is_final>
-			</second>
-		</item>
-		<item>
-			<first>
-				<simple>child_without_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;child_without_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_17">
-				<element>
-					<in_global_module>0</in_global_module>
-					<documentation></documentation>
-					<extensions>
-						<fields>
-							<count>0</count>
-							<bucket_count>1</bucket_count>
-							<item_version>0</item_version>
-						</fields>
-					</extensions>
-					<name>
-						<simple>child_without_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;child_without_members&gt;</qualified>
-						<location>
-							<external_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</external_module_path>
-							<model_module_path>
-								<count>1</count>
-								<item_version>0</item_version>
-								<item>trivial_inheritance</item>
-							</model_module_path>
-							<internal_module_path>
-								<count>0</count>
-								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>1</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</local_properties>
-				<inherited_properties>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
-					<item_version>0</item_version>
-				</inherited_properties>
-				<is_parent>0</is_parent>
-				<is_visitable>0</is_visitable>
-				<is_immutable>0</is_immutable>
-				<is_fluent>0</is_fluent>
 				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
@@ -1607,8 +1217,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>parent_without_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
+								<simple>parent_with_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -1629,31 +1239,12 @@ in the context of inheritance.
 					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>parent</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg2</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_18">
+			<first>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</first>
+			<second object_id="_17">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1665,8 +1256,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>parent</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</qualified>
+						<simple>parent_with_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1678,9 +1269,8 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>1</count>
+								<count>0</count>
 								<item_version>0</item_version>
-								<item>pkg2</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -1759,26 +1349,8 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>parent_outside</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_19">
+			<first>&lt;trivial_inheritance&gt;&lt;pkg3&gt;&lt;child&gt;</first>
+			<second object_id="_18">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1790,8 +1362,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>parent_outside</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</qualified>
+						<simple>child</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg3&gt;&lt;child&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1803,8 +1375,9 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>0</count>
+								<count>1</count>
 								<item_version>0</item_version>
+								<item>pkg3</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -1831,7 +1404,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -1867,43 +1440,51 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
+					<item>
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>parent</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>trivial_inheritance</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>pkg2</item>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg3&gt;&lt;child&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg3</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_20">
+			<first>&lt;trivial_inheritance&gt;&lt;child_without_members&gt;</first>
+			<second object_id="_19">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -1915,8 +1496,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg3&gt;&lt;child&gt;</qualified>
+						<simple>child_without_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;child_without_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -1928,9 +1509,8 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>1</count>
+								<count>0</count>
 								<item_version>0</item_version>
-								<item>pkg3</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -1946,47 +1526,8 @@ in the context of inheritance.
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>1</count>
+					<count>0</count>
 					<item_version>0</item_version>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_1</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
-					</item>
 				</local_properties>
 				<inherited_properties>
 					<count>0</count>
@@ -2009,8 +1550,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>parent</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;pkg2&gt;&lt;parent&gt;</qualified>
+								<simple>parent_without_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -2022,9 +1563,8 @@ in the context of inheritance.
 										<item>trivial_inheritance</item>
 									</model_module_path>
 									<internal_module_path>
-										<count>1</count>
+										<count>0</count>
 										<item_version>0</item_version>
-										<item>pkg2</item>
 									</internal_module_path>
 								</location>
 							</item>
@@ -2036,27 +1576,8 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;pkg4&gt;&lt;child&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>pkg4</item>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_21">
+			<first>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</first>
+			<second object_id="_20">
 				<element>
 					<in_global_module>0</in_global_module>
 					<documentation></documentation>
@@ -2068,8 +1589,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;pkg4&gt;&lt;child&gt;</qualified>
+						<simple>parent_outside</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2081,9 +1602,8 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>1</count>
+								<count>0</count>
 								<item_version>0</item_version>
-								<item>pkg4</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -2110,7 +1630,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2146,72 +1666,27 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>1</is_child>
+				<is_child>0</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>1</count>
-					<bucket_count>2</bucket_count>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
-					<item>
-						<first>2</first>
-						<second>
-							<count>1</count>
-							<item_version>0</item_version>
-							<item>
-								<simple>parent_outside</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>1</count>
-										<item_version>0</item_version>
-										<item>trivial_inheritance</item>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</item>
-						</second>
-					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>move_ctor_descendant</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_descendant&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
-			<second object_id="_22">
+			<first>&lt;trivial_inheritance&gt;&lt;child_with_members&gt;</first>
+			<second object_id="_21">
 				<element>
 					<in_global_module>0</in_global_module>
-					<documentation>Descendant class for scenario that tests code generated move contructors.
-</documentation>
+					<documentation></documentation>
 					<extensions>
 						<fields>
 							<count>0</count>
@@ -2220,8 +1695,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>move_ctor_descendant</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_descendant&gt;</qualified>
+						<simple>child_with_members</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;child_with_members&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2253,8 +1728,7 @@ in the context of inheritance.
 					<count>1</count>
 					<item_version>0</item_version>
 					<item>
-						<documentation>Force manual move constructor.
-</documentation>
+						<documentation></documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -2262,7 +1736,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_1</name>
+						<name>prop_0</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2290,7 +1764,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>boost::filesystem::path</unparsed_type>
+						<unparsed_type>unsigned int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2314,8 +1788,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>move_ctor_base</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</qualified>
+								<simple>parent_without_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -2340,25 +1814,74 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>descendant1</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;service&gt;</first>
+			<second object_id="_22">
+				<element>
+					<in_global_module>0</in_global_module>
+					<documentation></documentation>
+					<extensions>
+						<fields>
+							<count>0</count>
+							<bucket_count>1</bucket_count>
+							<item_version>0</item_version>
+						</fields>
+					</extensions>
+					<name>
+						<simple>service</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;service&gt;</qualified>
+						<location>
+							<external_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</external_module_path>
+							<model_module_path>
+								<count>1</count>
+								<item_version>0</item_version>
+								<item>trivial_inheritance</item>
+							</model_module_path>
+							<internal_module_path>
+								<count>0</count>
+								<item_version>0</item_version>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>2</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</local_properties>
+				<inherited_properties>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</inherited_properties>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
+				<is_immutable>0</is_immutable>
+				<is_fluent>0</is_fluent>
+				<is_child>0</is_child>
+				<is_root_parent_visitable>0</is_root_parent_visitable>
+				<relationships>
+					<count>0</count>
+					<bucket_count>1</bucket_count>
+					<item_version>0</item_version>
+				</relationships>
+				<object_type>1</object_type>
+				<is_final>1</is_final>
+			</second>
+		</item>
+		<item>
+			<first>&lt;trivial_inheritance&gt;&lt;descendant2&gt;</first>
 			<second object_id="_23">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2371,8 +1894,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>descendant1</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</qualified>
+						<simple>descendant2</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;descendant2&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2386,30 +1909,69 @@ in the context of inheritance.
 							<internal_module_path>
 								<count>0</count>
 								<item_version>0</item_version>
-							</internal_module_path>
-						</location>
-					</name>
-					<generation_type>1</generation_type>
-					<origin_type>1</origin_type>
-					<original_model_name></original_model_name>
-					<containing_module>
-						<initialized>0</initialized>
-					</containing_module>
-				</element>
-				<all_properties>
-					<count>0</count>
-					<item_version>0</item_version>
-				</all_properties>
-				<local_properties>
-					<count>0</count>
-					<item_version>0</item_version>
+							</internal_module_path>
+						</location>
+					</name>
+					<generation_type>1</generation_type>
+					<origin_type>1</origin_type>
+					<original_model_name></original_model_name>
+					<containing_module>
+						<initialized>0</initialized>
+					</containing_module>
+				</element>
+				<all_properties>
+					<count>0</count>
+					<item_version>0</item_version>
+				</all_properties>
+				<local_properties>
+					<count>1</count>
+					<item_version>0</item_version>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_0</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>bool</unparsed_type>
+					</item>
 				</local_properties>
 				<inherited_properties>
 					<count>0</count>
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
@@ -2447,29 +2009,11 @@ in the context of inheritance.
 					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>child_with_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;child_with_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;pkg4&gt;&lt;child&gt;</first>
 			<second object_id="_24">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2482,8 +2026,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>child_with_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;child_with_members&gt;</qualified>
+						<simple>child</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;pkg4&gt;&lt;child&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2495,8 +2039,9 @@ in the context of inheritance.
 								<item>trivial_inheritance</item>
 							</model_module_path>
 							<internal_module_path>
-								<count>0</count>
+								<count>1</count>
 								<item_version>0</item_version>
+								<item>pkg4</item>
 							</internal_module_path>
 						</location>
 					</name>
@@ -2523,7 +2068,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -2551,7 +2096,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>unsigned int</unparsed_type>
+						<unparsed_type>int</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -2575,8 +2120,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>parent_without_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;parent_without_members&gt;</qualified>
+								<simple>parent_outside</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;parent_outside&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -2601,25 +2146,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>service</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;service&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;service_interface&gt;</first>
 			<second object_id="_25">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2632,8 +2159,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>service</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;service&gt;</qualified>
+						<simple>service_interface</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;service_interface&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2686,25 +2213,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>base</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;base&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;child_of_a_child2&gt;</first>
 			<second object_id="_26">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2717,8 +2226,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>base</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;base&gt;</qualified>
+						<simple>child_of_a_child2</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child2&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2747,49 +2256,96 @@ in the context of inheritance.
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>0</count>
+					<count>1</count>
 					<item_version>0</item_version>
+					<item>
+						<documentation></documentation>
+						<extensions>
+							<fields>
+								<count>0</count>
+								<bucket_count>1</bucket_count>
+								<item_version>0</item_version>
+							</fields>
+						</extensions>
+						<name>prop_2</name>
+						<type>
+							<type>
+								<simple></simple>
+								<qualified></qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</type>
+							<children>
+								<count>0</count>
+								<item_version>0</item_version>
+							</children>
+							<is_pointer>0</is_pointer>
+						</type>
+						<is_immutable>0</is_immutable>
+						<is_fluent>0</is_fluent>
+						<unparsed_type>unsigned int</unparsed_type>
+					</item>
 				</local_properties>
 				<inherited_properties>
 					<count>0</count>
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
-				<is_visitable>1</is_visitable>
+				<is_parent>0</is_parent>
+				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
+					<item>
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>third_child_with_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>trivial_inheritance</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>second_child_without_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;second_child_without_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</first>
 			<second object_id="_27">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2802,8 +2358,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>second_child_without_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;second_child_without_members&gt;</qualified>
+						<simple>descendant1</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2840,7 +2396,7 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>0</is_parent>
+				<is_parent>1</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
@@ -2856,8 +2412,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>parent_with_members</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
+								<simple>base</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;base&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -2878,29 +2434,11 @@ in the context of inheritance.
 					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>1</is_final>
+				<is_final>0</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>descendant3</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;descendant3&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;child_of_a_child1&gt;</first>
 			<second object_id="_28">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -2913,8 +2451,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>descendant3</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;descendant3&gt;</qualified>
+						<simple>child_of_a_child1</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;child_of_a_child1&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -2943,47 +2481,8 @@ in the context of inheritance.
 					<item_version>0</item_version>
 				</all_properties>
 				<local_properties>
-					<count>1</count>
+					<count>0</count>
 					<item_version>0</item_version>
-					<item>
-						<documentation></documentation>
-						<extensions>
-							<fields>
-								<count>0</count>
-								<bucket_count>1</bucket_count>
-								<item_version>0</item_version>
-							</fields>
-						</extensions>
-						<name>prop_0</name>
-						<type>
-							<type>
-								<simple></simple>
-								<qualified></qualified>
-								<location>
-									<external_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</external_module_path>
-									<model_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</model_module_path>
-									<internal_module_path>
-										<count>0</count>
-										<item_version>0</item_version>
-									</internal_module_path>
-								</location>
-							</type>
-							<children>
-								<count>0</count>
-								<item_version>0</item_version>
-							</children>
-							<is_pointer>0</is_pointer>
-						</type>
-						<is_immutable>0</is_immutable>
-						<is_fluent>0</is_fluent>
-						<unparsed_type>bool</unparsed_type>
-					</item>
 				</local_properties>
 				<inherited_properties>
 					<count>0</count>
@@ -3006,8 +2505,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>descendant1</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</qualified>
+								<simple>third_child_with_members</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;third_child_with_members&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
@@ -3032,25 +2531,7 @@ in the context of inheritance.
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>parent_with_members</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;descendant3&gt;</first>
 			<second object_id="_29">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -3063,8 +2544,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>parent_with_members</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;parent_with_members&gt;</qualified>
+						<simple>descendant3</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;descendant3&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -3132,7 +2613,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>int</unparsed_type>
+						<unparsed_type>bool</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -3140,45 +2621,54 @@ in the context of inheritance.
 					<bucket_count>1</bucket_count>
 					<item_version>0</item_version>
 				</inherited_properties>
-				<is_parent>1</is_parent>
+				<is_parent>0</is_parent>
 				<is_visitable>0</is_visitable>
 				<is_immutable>0</is_immutable>
 				<is_fluent>0</is_fluent>
-				<is_child>0</is_child>
+				<is_child>1</is_child>
 				<is_root_parent_visitable>0</is_root_parent_visitable>
 				<relationships>
-					<count>0</count>
-					<bucket_count>1</bucket_count>
+					<count>1</count>
+					<bucket_count>2</bucket_count>
 					<item_version>0</item_version>
+					<item>
+						<first>2</first>
+						<second>
+							<count>1</count>
+							<item_version>0</item_version>
+							<item>
+								<simple>descendant1</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;descendant1&gt;</qualified>
+								<location>
+									<external_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</external_module_path>
+									<model_module_path>
+										<count>1</count>
+										<item_version>0</item_version>
+										<item>trivial_inheritance</item>
+									</model_module_path>
+									<internal_module_path>
+										<count>0</count>
+										<item_version>0</item_version>
+									</internal_module_path>
+								</location>
+							</item>
+						</second>
+					</item>
 				</relationships>
 				<object_type>3</object_type>
-				<is_final>0</is_final>
+				<is_final>1</is_final>
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>descendant2</simple>
-				<qualified>&lt;trivial_inheritance&gt;&lt;descendant2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>trivial_inheritance</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;trivial_inheritance&gt;&lt;move_ctor_descendant&gt;</first>
 			<second object_id="_30">
 				<element>
 					<in_global_module>0</in_global_module>
-					<documentation></documentation>
+					<documentation>Descendant class for scenario that tests code generated move contructors.
+</documentation>
 					<extensions>
 						<fields>
 							<count>0</count>
@@ -3187,8 +2677,8 @@ in the context of inheritance.
 						</fields>
 					</extensions>
 					<name>
-						<simple>descendant2</simple>
-						<qualified>&lt;trivial_inheritance&gt;&lt;descendant2&gt;</qualified>
+						<simple>move_ctor_descendant</simple>
+						<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_descendant&gt;</qualified>
 						<location>
 							<external_module_path>
 								<count>0</count>
@@ -3220,7 +2710,8 @@ in the context of inheritance.
 					<count>1</count>
 					<item_version>0</item_version>
 					<item>
-						<documentation></documentation>
+						<documentation>Force manual move constructor.
+</documentation>
 						<extensions>
 							<fields>
 								<count>0</count>
@@ -3228,7 +2719,7 @@ in the context of inheritance.
 								<item_version>0</item_version>
 							</fields>
 						</extensions>
-						<name>prop_0</name>
+						<name>prop_1</name>
 						<type>
 							<type>
 								<simple></simple>
@@ -3256,7 +2747,7 @@ in the context of inheritance.
 						</type>
 						<is_immutable>0</is_immutable>
 						<is_fluent>0</is_fluent>
-						<unparsed_type>bool</unparsed_type>
+						<unparsed_type>boost::filesystem::path</unparsed_type>
 					</item>
 				</local_properties>
 				<inherited_properties>
@@ -3280,8 +2771,8 @@ in the context of inheritance.
 							<count>1</count>
 							<item_version>0</item_version>
 							<item>
-								<simple>base</simple>
-								<qualified>&lt;trivial_inheritance&gt;&lt;base&gt;</qualified>
+								<simple>move_ctor_base</simple>
+								<qualified>&lt;trivial_inheritance&gt;&lt;move_ctor_base&gt;</qualified>
 								<location>
 									<external_module_path>
 										<count>0</count>
diff --git a/test_data/yarn_dia/expected/two_layers_with_objects.yarnxml b/test_data/yarn_dia/expected/two_layers_with_objects.yarnxml
index 79371fd..d1ad733 100644
--- a/test_data/yarn_dia/expected/two_layers_with_objects.yarnxml
+++ b/test_data/yarn_dia/expected/two_layers_with_objects.yarnxml
@@ -51,25 +51,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="18" tracking_level="0" version="0">
-			<first>
-				<simple>Package_2</simple>
-				<qualified>&lt;two_layers_with_objects&gt;&lt;Package_2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>two_layers_with_objects</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;two_layers_with_objects&gt;&lt;Package_2&gt;</first>
 			<second class_id="5" tracking_level="1" version="0" object_id="_0">
 				<element class_id="19" tracking_level="0" version="0">
 					<in_global_module>0</in_global_module>
@@ -114,25 +96,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>package_1</simple>
-				<qualified>&lt;two_layers_with_objects&gt;&lt;package_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>two_layers_with_objects</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;two_layers_with_objects&gt;&lt;package_1&gt;</first>
 			<second object_id="_1">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -177,25 +141,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>two_layers_with_objects</simple>
-				<qualified>&lt;two_layers_with_objects&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>two_layers_with_objects</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;two_layers_with_objects&gt;</first>
 			<second object_id="_2">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -293,26 +239,7 @@
 		<bucket_count>5</bucket_count>
 		<item_version>0</item_version>
 		<item class_id="29" tracking_level="0" version="0">
-			<first>
-				<simple>class_2</simple>
-				<qualified>&lt;two_layers_with_objects&gt;&lt;Package_2&gt;&lt;class_2&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>two_layers_with_objects</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>Package_2</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;two_layers_with_objects&gt;&lt;Package_2&gt;&lt;class_2&gt;</first>
 			<second class_id="6" tracking_level="1" version="0" object_id="_6">
 				<element>
 					<in_global_module>0</in_global_module>
@@ -419,26 +346,7 @@
 			</second>
 		</item>
 		<item>
-			<first>
-				<simple>class_1</simple>
-				<qualified>&lt;two_layers_with_objects&gt;&lt;package_1&gt;&lt;class_1&gt;</qualified>
-				<location>
-					<external_module_path>
-						<count>0</count>
-						<item_version>0</item_version>
-					</external_module_path>
-					<model_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>two_layers_with_objects</item>
-					</model_module_path>
-					<internal_module_path>
-						<count>1</count>
-						<item_version>0</item_version>
-						<item>package_1</item>
-					</internal_module_path>
-				</location>
-			</first>
+			<first>&lt;two_layers_with_objects&gt;&lt;package_1&gt;&lt;class_1&gt;</first>
 			<second object_id="_7">
 				<element>
 					<in_global_module>0</in_global_module>
