diff --git a/diagrams/quilt.cpp.dia b/diagrams/quilt.cpp.dia
index 0d7b3da..aa4a5d9 100644
--- a/diagrams/quilt.cpp.dia
+++ b/diagrams/quilt.cpp.dia
@@ -16648,7 +16648,7 @@ registry of all available formatters.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O243" connection="6"/>
+        <dia:connection handle="0" to="O242" connection="6"/>
         <dia:connection handle="1" to="O130" connection="2"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
@@ -29752,117 +29752,6 @@ main, or from another initialiser.#</dia:string>
     </dia:object>
     <dia:object type="UML - Class" version="0" id="O235">
       <dia:attribute name="obj_pos">
-        <dia:point val="363,213"/>
-      </dia:attribute>
-      <dia:attribute name="obj_bb">
-        <dia:rectangle val="362.95,212.95;375.54,216.05"/>
-      </dia:attribute>
-      <dia:attribute name="elem_corner">
-        <dia:point val="363,213"/>
-      </dia:attribute>
-      <dia:attribute name="elem_width">
-        <dia:real val="12.49"/>
-      </dia:attribute>
-      <dia:attribute name="elem_height">
-        <dia:real val="3"/>
-      </dia:attribute>
-      <dia:attribute name="name">
-        <dia:string>#helper_methods_formatter#</dia:string>
-      </dia:attribute>
-      <dia:attribute name="stereotype">
-        <dia:string>#service#</dia:string>
-      </dia:attribute>
-      <dia:attribute name="comment">
-        <dia:string>##</dia:string>
-      </dia:attribute>
-      <dia:attribute name="abstract">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="suppress_attributes">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="suppress_operations">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="visible_attributes">
-        <dia:boolean val="true"/>
-      </dia:attribute>
-      <dia:attribute name="visible_operations">
-        <dia:boolean val="true"/>
-      </dia:attribute>
-      <dia:attribute name="visible_comments">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="wrap_operations">
-        <dia:boolean val="true"/>
-      </dia:attribute>
-      <dia:attribute name="wrap_after_char">
-        <dia:int val="40"/>
-      </dia:attribute>
-      <dia:attribute name="comment_line_length">
-        <dia:int val="17"/>
-      </dia:attribute>
-      <dia:attribute name="comment_tagging">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="line_width">
-        <dia:real val="0.10000000000000001"/>
-      </dia:attribute>
-      <dia:attribute name="line_color">
-        <dia:color val="#000000"/>
-      </dia:attribute>
-      <dia:attribute name="fill_color">
-        <dia:color val="#ffffff"/>
-      </dia:attribute>
-      <dia:attribute name="text_color">
-        <dia:color val="#000000"/>
-      </dia:attribute>
-      <dia:attribute name="normal_font">
-        <dia:font family="monospace" style="0" name="Courier"/>
-      </dia:attribute>
-      <dia:attribute name="abstract_font">
-        <dia:font family="monospace" style="88" name="Courier-BoldOblique"/>
-      </dia:attribute>
-      <dia:attribute name="polymorphic_font">
-        <dia:font family="monospace" style="8" name="Courier-Oblique"/>
-      </dia:attribute>
-      <dia:attribute name="classname_font">
-        <dia:font family="sans" style="80" name="Helvetica-Bold"/>
-      </dia:attribute>
-      <dia:attribute name="abstract_classname_font">
-        <dia:font family="sans" style="88" name="Helvetica-BoldOblique"/>
-      </dia:attribute>
-      <dia:attribute name="comment_font">
-        <dia:font family="sans" style="8" name="Helvetica-Oblique"/>
-      </dia:attribute>
-      <dia:attribute name="normal_font_height">
-        <dia:real val="0.80000000000000004"/>
-      </dia:attribute>
-      <dia:attribute name="polymorphic_font_height">
-        <dia:real val="0.80000000000000004"/>
-      </dia:attribute>
-      <dia:attribute name="abstract_font_height">
-        <dia:real val="0.80000000000000004"/>
-      </dia:attribute>
-      <dia:attribute name="classname_font_height">
-        <dia:real val="1"/>
-      </dia:attribute>
-      <dia:attribute name="abstract_classname_font_height">
-        <dia:real val="1"/>
-      </dia:attribute>
-      <dia:attribute name="comment_font_height">
-        <dia:real val="0.69999999999999996"/>
-      </dia:attribute>
-      <dia:attribute name="attributes"/>
-      <dia:attribute name="operations"/>
-      <dia:attribute name="template">
-        <dia:boolean val="false"/>
-      </dia:attribute>
-      <dia:attribute name="templates"/>
-      <dia:childnode parent="O12"/>
-    </dia:object>
-    <dia:object type="UML - Class" version="0" id="O236">
-      <dia:attribute name="obj_pos">
         <dia:point val="388,205"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
@@ -29972,7 +29861,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O16"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O237">
+    <dia:object type="UML - Class" version="0" id="O236">
       <dia:attribute name="obj_pos">
         <dia:point val="388,232"/>
       </dia:attribute>
@@ -30083,7 +29972,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O44"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O238">
+    <dia:object type="UML - Class" version="0" id="O237">
       <dia:attribute name="obj_pos">
         <dia:point val="408,216"/>
       </dia:attribute>
@@ -30225,7 +30114,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O44"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O239">
+    <dia:object type="UML - Class" version="0" id="O238">
       <dia:attribute name="obj_pos">
         <dia:point val="282,178"/>
       </dia:attribute>
@@ -30336,7 +30225,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Generalization" version="1" id="O240">
+    <dia:object type="UML - Generalization" version="1" id="O239">
       <dia:attribute name="obj_pos">
         <dia:point val="290.265,168.2"/>
       </dia:attribute>
@@ -30374,11 +30263,11 @@ main, or from another initialiser.#</dia:string>
       </dia:attribute>
       <dia:connections>
         <dia:connection handle="0" to="O134" connection="6"/>
-        <dia:connection handle="1" to="O239" connection="1"/>
+        <dia:connection handle="1" to="O238" connection="1"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O241">
+    <dia:object type="UML - Association" version="2" id="O240">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -30445,12 +30334,12 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O239" connection="6"/>
+        <dia:connection handle="0" to="O238" connection="6"/>
         <dia:connection handle="1" to="O142" connection="6"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O242">
+    <dia:object type="UML - Class" version="0" id="O241">
       <dia:attribute name="obj_pos">
         <dia:point val="276,129"/>
       </dia:attribute>
@@ -30592,7 +30481,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O243">
+    <dia:object type="UML - Class" version="0" id="O242">
       <dia:attribute name="obj_pos">
         <dia:point val="251,146"/>
       </dia:attribute>
@@ -30884,7 +30773,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O244">
+    <dia:object type="UML - Association" version="2" id="O243">
       <dia:attribute name="name">
         <dia:string>#keeps track of factories using &gt;#</dia:string>
       </dia:attribute>
@@ -30951,12 +30840,12 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O243" connection="2"/>
+        <dia:connection handle="0" to="O242" connection="2"/>
         <dia:connection handle="1" to="O131" connection="0"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O245">
+    <dia:object type="UML - Association" version="2" id="O244">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -31024,11 +30913,11 @@ main, or from another initialiser.#</dia:string>
       </dia:attribute>
       <dia:connections>
         <dia:connection handle="0" to="O132" connection="7"/>
-        <dia:connection handle="1" to="O243" connection="0"/>
+        <dia:connection handle="1" to="O242" connection="0"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O246">
+    <dia:object type="UML - Association" version="2" id="O245">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -31099,7 +30988,7 @@ main, or from another initialiser.#</dia:string>
         <dia:connection handle="1" to="O89" connection="5"/>
       </dia:connections>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O247">
+    <dia:object type="UML - Class" version="0" id="O246">
       <dia:attribute name="obj_pos">
         <dia:point val="118,-13.9166"/>
       </dia:attribute>
@@ -31257,7 +31146,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O0"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O248">
+    <dia:object type="UML - Association" version="2" id="O247">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -31325,11 +31214,11 @@ main, or from another initialiser.#</dia:string>
       </dia:attribute>
       <dia:connections>
         <dia:connection handle="0" to="O96" connection="12"/>
-        <dia:connection handle="1" to="O247" connection="12"/>
+        <dia:connection handle="1" to="O246" connection="12"/>
       </dia:connections>
       <dia:childnode parent="O0"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O249">
+    <dia:object type="UML - Class" version="0" id="O248">
       <dia:attribute name="obj_pos">
         <dia:point val="119,52.0834"/>
       </dia:attribute>
@@ -31667,7 +31556,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O0"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O250">
+    <dia:object type="UML - Association" version="2" id="O249">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -31735,11 +31624,11 @@ main, or from another initialiser.#</dia:string>
       </dia:attribute>
       <dia:connections>
         <dia:connection handle="0" to="O95" connection="5"/>
-        <dia:connection handle="1" to="O249" connection="6"/>
+        <dia:connection handle="1" to="O248" connection="6"/>
       </dia:connections>
       <dia:childnode parent="O0"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O251">
+    <dia:object type="UML - Class" version="0" id="O250">
       <dia:attribute name="obj_pos">
         <dia:point val="520,188"/>
       </dia:attribute>
@@ -32339,7 +32228,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O11"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O252">
+    <dia:object type="UML - Association" version="2" id="O251">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -32406,12 +32295,12 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O251" connection="1"/>
+        <dia:connection handle="0" to="O250" connection="1"/>
         <dia:connection handle="1" to="O234" connection="1"/>
       </dia:connections>
       <dia:childnode parent="O11"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O253">
+    <dia:object type="UML - Class" version="0" id="O252">
       <dia:attribute name="obj_pos">
         <dia:point val="482,227"/>
       </dia:attribute>
@@ -32522,7 +32411,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O39"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O254">
+    <dia:object type="UML - Class" version="0" id="O253">
       <dia:attribute name="obj_pos">
         <dia:point val="503,227"/>
       </dia:attribute>
@@ -32633,7 +32522,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O39"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O255">
+    <dia:object type="UML - Class" version="0" id="O254">
       <dia:attribute name="obj_pos">
         <dia:point val="503,232"/>
       </dia:attribute>
@@ -32744,7 +32633,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O39"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O256">
+    <dia:object type="UML - Class" version="0" id="O255">
       <dia:attribute name="obj_pos">
         <dia:point val="434,227"/>
       </dia:attribute>
@@ -32855,7 +32744,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O49"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O257">
+    <dia:object type="UML - Class" version="0" id="O256">
       <dia:attribute name="obj_pos">
         <dia:point val="137,214"/>
       </dia:attribute>
@@ -33013,7 +32902,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O258">
+    <dia:object type="UML - Association" version="2" id="O257">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -33080,12 +32969,12 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O259" connection="6"/>
-        <dia:connection handle="1" to="O257" connection="6"/>
+        <dia:connection handle="0" to="O258" connection="6"/>
+        <dia:connection handle="1" to="O256" connection="6"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O259">
+    <dia:object type="UML - Class" version="0" id="O258">
       <dia:attribute name="obj_pos">
         <dia:point val="164,214"/>
       </dia:attribute>
@@ -33245,7 +33134,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O260">
+    <dia:object type="UML - Class" version="0" id="O259">
       <dia:attribute name="obj_pos">
         <dia:point val="420,151"/>
       </dia:attribute>
@@ -33426,7 +33315,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O11"/>
     </dia:object>
-    <dia:object type="UML - LargePackage" version="0" id="O261">
+    <dia:object type="UML - LargePackage" version="0" id="O260">
       <dia:attribute name="obj_pos">
         <dia:point val="466,37"/>
       </dia:attribute>
@@ -33464,7 +33353,7 @@ main, or from another initialiser.#</dia:string>
         <dia:string>#fabric#</dia:string>
       </dia:attribute>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O262">
+    <dia:object type="UML - Class" version="0" id="O261">
       <dia:attribute name="obj_pos">
         <dia:point val="472,84"/>
       </dia:attribute>
@@ -33622,9 +33511,9 @@ main, or from another initialiser.#</dia:string>
         <dia:boolean val="false"/>
       </dia:attribute>
       <dia:attribute name="templates"/>
-      <dia:childnode parent="O261"/>
+      <dia:childnode parent="O260"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O263">
+    <dia:object type="UML - Association" version="2" id="O262">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -33692,10 +33581,10 @@ main, or from another initialiser.#</dia:string>
       </dia:attribute>
       <dia:connections>
         <dia:connection handle="0" to="O15" connection="2"/>
-        <dia:connection handle="1" to="O262" connection="6"/>
+        <dia:connection handle="1" to="O261" connection="6"/>
       </dia:connections>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O264">
+    <dia:object type="UML - Class" version="0" id="O263">
       <dia:attribute name="obj_pos">
         <dia:point val="258,198"/>
       </dia:attribute>
@@ -33922,7 +33811,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O265">
+    <dia:object type="UML - Class" version="0" id="O264">
       <dia:attribute name="obj_pos">
         <dia:point val="263,214"/>
       </dia:attribute>
@@ -34082,7 +33971,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O266">
+    <dia:object type="UML - Association" version="2" id="O265">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -34149,26 +34038,26 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O265" connection="1"/>
-        <dia:connection handle="1" to="O264" connection="6"/>
+        <dia:connection handle="0" to="O264" connection="1"/>
+        <dia:connection handle="1" to="O263" connection="6"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O267">
+    <dia:object type="UML - Class" version="0" id="O266">
       <dia:attribute name="obj_pos">
         <dia:point val="375,129"/>
       </dia:attribute>
       <dia:attribute name="obj_bb">
-        <dia:rectangle val="374.95,128.95;397.495,136.65"/>
+        <dia:rectangle val="374.95,128.95;401.345,138.25"/>
       </dia:attribute>
       <dia:attribute name="elem_corner">
         <dia:point val="375,129"/>
       </dia:attribute>
       <dia:attribute name="elem_width">
-        <dia:real val="22.445"/>
+        <dia:real val="26.294999999999998"/>
       </dia:attribute>
       <dia:attribute name="elem_height">
-        <dia:real val="7.5999999999999996"/>
+        <dia:real val="9.1999999999999993"/>
       </dia:attribute>
       <dia:attribute name="name">
         <dia:string>#formatter_helper_interface#</dia:string>
@@ -34399,13 +34288,13 @@ main, or from another initialiser.#</dia:string>
         </dia:composite>
         <dia:composite type="umloperation">
           <dia:attribute name="name">
-            <dia:string>#format#</dia:string>
+            <dia:string>#helper_name#</dia:string>
           </dia:attribute>
           <dia:attribute name="stereotype">
             <dia:string>##</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>##</dia:string>
+            <dia:string>#std::string#</dia:string>
           </dia:attribute>
           <dia:attribute name="visibility">
             <dia:enum val="0"/>
@@ -34425,13 +34314,60 @@ main, or from another initialiser.#</dia:string>
           <dia:attribute name="class_scope">
             <dia:boolean val="false"/>
           </dia:attribute>
+          <dia:attribute name="parameters"/>
+        </dia:composite>
+        <dia:composite type="umloperation">
+          <dia:attribute name="name">
+            <dia:string>#is_enabled#</dia:string>
+          </dia:attribute>
+          <dia:attribute name="stereotype">
+            <dia:string>##</dia:string>
+          </dia:attribute>
+          <dia:attribute name="type">
+            <dia:string>#bool#</dia:string>
+          </dia:attribute>
+          <dia:attribute name="visibility">
+            <dia:enum val="0"/>
+          </dia:attribute>
+          <dia:attribute name="comment">
+            <dia:string>##</dia:string>
+          </dia:attribute>
+          <dia:attribute name="abstract">
+            <dia:boolean val="true"/>
+          </dia:attribute>
+          <dia:attribute name="inheritance_type">
+            <dia:enum val="0"/>
+          </dia:attribute>
+          <dia:attribute name="query">
+            <dia:boolean val="true"/>
+          </dia:attribute>
+          <dia:attribute name="class_scope">
+            <dia:boolean val="false"/>
+          </dia:attribute>
           <dia:attribute name="parameters">
             <dia:composite type="umlparameter">
               <dia:attribute name="name">
-                <dia:string>#nn#</dia:string>
+                <dia:string>#a#</dia:string>
               </dia:attribute>
               <dia:attribute name="type">
-                <dia:string>#const yarn::nested_name&amp;#</dia:string>
+                <dia:string>#const formatters::assistant&amp;#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="value">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="comment">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="kind">
+                <dia:enum val="0"/>
+              </dia:attribute>
+            </dia:composite>
+            <dia:composite type="umlparameter">
+              <dia:attribute name="name">
+                <dia:string>#owner#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="type">
+                <dia:string>#const formattables::class_info&amp;#</dia:string>
               </dia:attribute>
               <dia:attribute name="value">
                 <dia:string>##</dia:string>
@@ -34447,13 +34383,13 @@ main, or from another initialiser.#</dia:string>
         </dia:composite>
         <dia:composite type="umloperation">
           <dia:attribute name="name">
-            <dia:string>#helper_name#</dia:string>
+            <dia:string>#format#</dia:string>
           </dia:attribute>
           <dia:attribute name="stereotype">
             <dia:string>##</dia:string>
           </dia:attribute>
           <dia:attribute name="type">
-            <dia:string>#std::string#</dia:string>
+            <dia:string>##</dia:string>
           </dia:attribute>
           <dia:attribute name="visibility">
             <dia:enum val="0"/>
@@ -34473,7 +34409,42 @@ main, or from another initialiser.#</dia:string>
           <dia:attribute name="class_scope">
             <dia:boolean val="false"/>
           </dia:attribute>
-          <dia:attribute name="parameters"/>
+          <dia:attribute name="parameters">
+            <dia:composite type="umlparameter">
+              <dia:attribute name="name">
+                <dia:string>#a#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="type">
+                <dia:string>#const formatters::assistant&amp;#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="value">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="comment">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="kind">
+                <dia:enum val="0"/>
+              </dia:attribute>
+            </dia:composite>
+            <dia:composite type="umlparameter">
+              <dia:attribute name="name">
+                <dia:string>#nn#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="type">
+                <dia:string>#const yarn::nested_name&amp;#</dia:string>
+              </dia:attribute>
+              <dia:attribute name="value">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="comment">
+                <dia:string>##</dia:string>
+              </dia:attribute>
+              <dia:attribute name="kind">
+                <dia:enum val="0"/>
+              </dia:attribute>
+            </dia:composite>
+          </dia:attribute>
         </dia:composite>
       </dia:attribute>
       <dia:attribute name="template">
@@ -34482,7 +34453,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O11"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O268">
+    <dia:object type="UML - Class" version="0" id="O267">
       <dia:attribute name="obj_pos">
         <dia:point val="291,198"/>
       </dia:attribute>
@@ -34617,7 +34588,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Class" version="0" id="O269">
+    <dia:object type="UML - Class" version="0" id="O268">
       <dia:attribute name="obj_pos">
         <dia:point val="291,214"/>
       </dia:attribute>
@@ -34777,7 +34748,7 @@ main, or from another initialiser.#</dia:string>
       <dia:attribute name="templates"/>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O270">
+    <dia:object type="UML - Association" version="2" id="O269">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -34844,12 +34815,12 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O268" connection="1"/>
-        <dia:connection handle="1" to="O264" connection="1"/>
+        <dia:connection handle="0" to="O267" connection="1"/>
+        <dia:connection handle="1" to="O263" connection="1"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
-    <dia:object type="UML - Association" version="2" id="O271">
+    <dia:object type="UML - Association" version="2" id="O270">
       <dia:attribute name="name">
         <dia:string>##</dia:string>
       </dia:attribute>
@@ -34916,8 +34887,8 @@ main, or from another initialiser.#</dia:string>
         <dia:color val="#000000"/>
       </dia:attribute>
       <dia:connections>
-        <dia:connection handle="0" to="O269" connection="1"/>
-        <dia:connection handle="1" to="O268" connection="6"/>
+        <dia:connection handle="0" to="O268" connection="1"/>
+        <dia:connection handle="1" to="O267" connection="6"/>
       </dia:connections>
       <dia:childnode parent="O1"/>
     </dia:object>
diff --git a/doc/agile/sprint_backlog_80.org b/doc/agile/sprint_backlog_80.org
index 0006373..360c745 100644
--- a/doc/agile/sprint_backlog_80.org
+++ b/doc/agile/sprint_backlog_80.org
@@ -5,24 +5,24 @@
 
 * Mission Statement
 
-- finish implementing quilt.cpp formatters using yarn types;
+- finish implementing quilt.cpp formatters using yarn types.
 
 * Stories
 
 ** Active
 
 #+begin: clocktable :maxlevel 3 :scope subtree :indent nil :emphasize nil :scope file :narrow 75 :formula %
-#+CAPTION: Clock summary at [2016-02-03 Wed 22:57]
+#+CAPTION: Clock summary at [2016-02-04 Thu 19:28]
 | <75>                                                                        |        |      |      |       |
 | Headline                                                                    | Time   |      |      |     % |
 |-----------------------------------------------------------------------------+--------+------+------+-------|
-| *Total time*                                                                | *3:49* |      |      | 100.0 |
+| *Total time*                                                                | *5:24* |      |      | 100.0 |
 |-----------------------------------------------------------------------------+--------+------+------+-------|
-| Stories                                                                     | 3:49   |      |      | 100.0 |
-| Active                                                                      |        | 3:49 |      | 100.0 |
-| STARTED Sprint and product backlog grooming                                 |        |      | 0:12 |   5.2 |
-| COMPLETED Make context non-generatable                                      |        |      | 0:49 |  21.4 |
-| STARTED Add an helper method interface                                      |        |      | 2:48 |  73.4 |
+| Stories                                                                     | 5:24   |      |      | 100.0 |
+| Active                                                                      |        | 5:24 |      | 100.0 |
+| STARTED Sprint and product backlog grooming                                 |        |      | 0:12 |   3.7 |
+| COMPLETED Make context non-generatable                                      |        |      | 0:49 |  15.1 |
+| STARTED Add an helper method interface                                      |        |      | 4:23 |  81.2 |
 #+TBLFM: $5='(org-clock-time% @3$2 $2..$4);%.1f
 #+end:
 
@@ -49,6 +49,8 @@ We need to extend context in a few ways dogen does not yet support:
   as it is pretty trivial.
 
 *** STARTED Add an helper method interface                            :story:
+    CLOCK: [2016-02-04 Thu 18:39]--[2016-02-04 Thu 19:27] =>  0:48
+    CLOCK: [2016-02-04 Thu 06:29]--[2016-02-04 Thu 07:16] =>  0:47
     CLOCK: [2016-02-03 Wed 21:16]--[2016-02-03 Wed 22:57] =>  1:41
     CLOCK: [2016-02-03 Wed 21:03]--[2016-02-03 Wed 21:15] =>  0:12
     CLOCK: [2016-02-02 Tue 22:45]--[2016-02-02 Tue 23:40] =>  0:55
@@ -63,6 +65,13 @@ Tasks:
 - implement interface in at least one helper.
 - update assistant to query registrar for helpers based on type family
   in context. Performs a recursive descent on nested name.
+- problem: io helpers in types should only be enabled if io is enabled
+  and if type is in an inheritance relationship. For this we need to
+  have access to formatter properties (potentially via assistant) but
+  we also need to have access to the type that owns the properties. We
+  could augment helper interface with the assistant - easy as we
+  already have it on the format method - and the element - harder; we
+  need to supply the object as part of helper method creation.
 
 *Previous Understanding*
 
@@ -100,6 +109,14 @@ Tasks:
   settings. It should also consult the registrar to see if there are
   any helpers available for this formatter and family.
 
+*** Initialise formatters in the formatter's translation unit         :story:
+
+At present we are initialising the formatters in each of the facet
+initialisers. However, it makes more sense to initialise them on the
+translation unit for each formatter. This will also make life easier
+when we move to a mustache world where there may not be a formatter
+header file at all.
+
 *** Update assistant to use new helper information                    :story:
 
 Once all the pieces are in place, the assistant can then use the
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/all.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/all.hpp
index bcf36d0..cb1fb00 100644
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/all.hpp
+++ b/projects/quilt.cpp/include/dogen/quilt.cpp/types/all.hpp
@@ -132,7 +132,6 @@
 #include "dogen/quilt.cpp/types/formattables/global_enablement_properties.hpp"
 #include "dogen/quilt.cpp/types/formattables/inclusion_directives_factory.hpp"
 #include "dogen/quilt.cpp/types/formatters/cmakelists_formatter_interface.hpp"
-#include "dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/types/visitor_header_formatter.hpp"
 #include "dogen/quilt.cpp/types/settings/directory_names_settings_factory.hpp"
 #include "dogen/quilt.cpp/types/formattables/enablement_repository_factory.hpp"
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/assistant.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/assistant.hpp
index aef037e..a40c2c9 100644
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/assistant.hpp
+++ b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/assistant.hpp
@@ -221,17 +221,17 @@ private:
      * @brief Creates all the helper methods by recursing into the
      * nested type info.
      */
-    void recursive_helper_method_creator(
+    void recursive_helper_method_creator(const formattables::class_info& owner,
         const yarn::nested_name& nn,
-        std::unordered_set<std::string>& types_done) const;
+        std::unordered_set<std::string>& types_done);
 
 public:
     /**
      * @brief Creates any helper methods that may be required for this
      * formatter.
      */
-    void add_helper_methods(const std::list<formattables::property_info>&
-        properties);
+    void add_helper_methods(const formattables::class_info& owner,
+        const std::list<formattables::property_info>& properties);
 
     /**
      * @brief Creates any helper methods that may be required for this
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/formatter_helper_interface.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/formatter_helper_interface.hpp
index c6c83bc..8efa4e8 100644
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/formatter_helper_interface.hpp
+++ b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/formatter_helper_interface.hpp
@@ -27,6 +27,7 @@
 
 #include <string>
 #include "dogen/yarn/types/nested_name.hpp"
+#include "dogen/quilt.cpp/types/formattables/class_info.hpp"
 #include "dogen/quilt.cpp/types/formatters/assistant_fwd.hpp"
 
 namespace dogen {
@@ -47,8 +48,9 @@ public:
     virtual bool requires_explicit_call() const = 0;
     virtual std::string function_name() const = 0;
     virtual std::string helper_name() const = 0;
-    virtual void format(const assistant& a,
-        const yarn::nested_name& nn) const = 0;
+    virtual bool is_enabled(const assistant& a,
+        const formattables::class_info& owner) const = 0;
+    virtual void format(assistant& a, const yarn::nested_name& nn) const = 0;
 };
 
 } } } }
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/registrar.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/registrar.hpp
index a1b888e..0bb1ef3 100644
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/registrar.hpp
+++ b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/registrar.hpp
@@ -68,7 +68,7 @@ public:
     void register_formatter_helper(
         std::shared_ptr<formatter_helper_interface> fh);
 
- public:
+public:
     /**
      * @brief Registers a class formatter.
      */
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp
deleted file mode 100644
index e6e4b5f..0000000
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp
+++ /dev/null
@@ -1,80 +0,0 @@
-/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
- *
- * Copyright (C) 2012-2015 Marco Craveiro <marco.craveiro@gmail.com>
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 3 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
- * MA 02110-1301, USA.
- *
- */
-#ifndef DOGEN_QUILT_CPP_TYPES_FORMATTERS_TYPES_HELPER_METHODS_FORMATTER_HPP
-#define DOGEN_QUILT_CPP_TYPES_FORMATTERS_TYPES_HELPER_METHODS_FORMATTER_HPP
-
-#if defined(_MSC_VER) && (_MSC_VER >= 1200)
-#pragma once
-#endif
-
-#include <list>
-#include <ostream>
-#include <unordered_set>
-#include "dogen/quilt.cpp/types/formattables/property_info.hpp"
-#include "dogen/quilt.cpp/types/formattables/nested_type_info.hpp"
-#include "dogen/quilt.cpp/types/formatters/nested_type_formatting_assistant.hpp"
-
-namespace dogen {
-namespace quilt {
-namespace cpp {
-namespace formatters {
-namespace types {
-
-/**
- * @brief Creates all the helper methods for the types facet.
- */
-class helper_methods_formatter {
-public:
-    explicit helper_methods_formatter(
-        const std::list<formattables::property_info>& properties);
-
-private:
-    /**
-     * @brief Helper method for smart pointers such as boost and std
-     * shared pointer.
-     */
-    void smart_pointer_helper(
-        formatters::nested_type_formatting_assistant& fa,
-        const formattables::nested_type_info& t) const;
-
-private:
-    /**
-     * @brief Creates all the helper methods by recursing into the
-     * nested type info.
-     */
-    void recursive_helper_method_creator(
-        formatters::nested_type_formatting_assistant& fa,
-        const formattables::nested_type_info& t,
-        std::unordered_set<std::string>& types_done) const;
-
-public:
-    /**
-     * @brief Formats all the helper methods into the supplied stream.
-     */
-    void format(std::ostream& s) const;
-
-private:
-    const std::list<formattables::property_info>& properties_;
-};
-
-} } } } }
-
-#endif
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter_fwd.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter_fwd.hpp
deleted file mode 100644
index 4d6d053..0000000
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/helper_methods_formatter_fwd.hpp
+++ /dev/null
@@ -1,38 +0,0 @@
-/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
- *
- * Copyright (C) 2012-2015 Marco Craveiro <marco.craveiro@gmail.com>
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 3 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
- * MA 02110-1301, USA.
- *
- */
-#ifndef DOGEN_QUILT_CPP_TYPES_FORMATTERS_TYPES_HELPER_METHODS_FORMATTER_FWD_HPP
-#define DOGEN_QUILT_CPP_TYPES_FORMATTERS_TYPES_HELPER_METHODS_FORMATTER_FWD_HPP
-
-#if defined(_MSC_VER) && (_MSC_VER >= 1200)
-#pragma once
-#endif
-
-namespace dogen {
-namespace quilt {
-namespace cpp {
-namespace formatters {
-namespace types {
-
-class helper_methods_formatter;
-
-} } } } }
-
-#endif
diff --git a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp
index e2dd1ea..3daed95 100644
--- a/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp
+++ b/projects/quilt.cpp/include/dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp
@@ -26,8 +26,7 @@
 #endif
 
 #include <ostream>
-#include "dogen/quilt.cpp/types/formattables/nested_type_info.hpp"
-#include "dogen/quilt.cpp/types/formatters/nested_type_formatting_assistant.hpp"
+#include "dogen/quilt.cpp/types/formatters/formatter_helper_interface.hpp"
 
 namespace dogen {
 namespace quilt {
@@ -35,9 +34,17 @@ namespace cpp {
 namespace formatters {
 namespace types {
 
-void smart_pointer_helper_stitch(
-    formatters::nested_type_formatting_assistant& fa,
-    const formattables::nested_type_info& t);
+class smart_pointer_helper_stitch : public formatter_helper_interface {
+public:
+    std::string family() const;
+    std::string owning_formatter() const;
+    bool requires_explicit_call() const;
+    std::string function_name() const;
+    std::string helper_name() const;
+    bool is_enabled(const assistant& a,
+        const formattables::class_info& owner) const;
+    void format(assistant& a, const yarn::nested_name& nn) const;
+};
 
 } } } } }
 
diff --git a/projects/quilt.cpp/src/types/formatters/assistant.cpp b/projects/quilt.cpp/src/types/formatters/assistant.cpp
index 17ea15d..0677cd2 100644
--- a/projects/quilt.cpp/src/types/formatters/assistant.cpp
+++ b/projects/quilt.cpp/src/types/formatters/assistant.cpp
@@ -35,7 +35,6 @@
 #include "dogen/quilt.cpp/types/formatters/formatting_error.hpp"
 #include "dogen/quilt.cpp/types/formatters/io/helper_methods_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/hash/helper_methods_formatter.hpp"
-#include "dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/test_data/helper_methods_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/assistant.hpp"
 
@@ -319,43 +318,67 @@ std::string assistant::comment_inline(const std::string& c) const {
     return s.str();
 }
 
-void assistant::recursive_helper_method_creator(const yarn::nested_name& nn,
-    std::unordered_set<std::string>& types_done) const {
-    if (types_done.find(nn.parent().qualified()) != types_done.end())
+void assistant::recursive_helper_method_creator(
+    const formattables::class_info& owner, const yarn::nested_name& nn,
+    std::unordered_set<std::string>& types_done) {
+    BOOST_LOG_SEV(lg, debug) << "[New] Processing type: "
+                             << nn.parent().qualified();
+
+    if (types_done.find(nn.parent().qualified()) != types_done.end()) {
+        BOOST_LOG_SEV(lg, debug) << "[New] Type already done.";
         return;
+    }
 
     for (const auto c : nn.children())
-        recursive_helper_method_creator(c, types_done);
-
+        recursive_helper_method_creator(owner, c, types_done);
+    
     const auto i(context_.helper_settings().find(nn.parent().qualified()));
-    if (i == context_.helper_settings().end())
+    if (i == context_.helper_settings().end()) {
+        BOOST_LOG_SEV(lg, debug) << "[New] No settings for type.";
         return;
-
+    }
+    
     const auto& hs(i->second);
     const auto j(context_.helpers().find(hs.family()));
-    if (j == context_.helpers().end())
+    if (j == context_.helpers().end()) {
+        BOOST_LOG_SEV(lg, debug) << "[New] No helpers for family: "
+                                 << hs.family();
         return;
-
+    }
+/*
     const auto k(j->second.find(ownership_hierarchy_.formatter_name()));
-    if (k == j->second.end())
+    if (k == j->second.end()) {
+        BOOST_LOG_SEV(lg, debug) << "[New] Formatter helper not found. "
+                                 << " formatter: "
+                                 << ownership_hierarchy_.formatter_name()
+                                 << " family: " << hs.family();
         return;
+    }
 
-    const auto& helper(*k->second);
+    const auto& helper(*(k->second));
+    if (!helper.is_enabled(*this, owner)) {
+        BOOST_LOG_SEV(lg, debug) << "[New] Formatter helper not enabled: "
+                                 << ownership_hierarchy_.formatter_name()
+                                 << " family " << hs.family();
+        return;
+    }
     helper.format(*this, nn);
+    */
 }
 
 void assistant::
-add_helper_methods(const std::list<formattables::property_info>& properties) {
-    BOOST_LOG_SEV(lg, debug) << "Creating helper methods.";
+add_helper_methods(const formattables::class_info& owner,
+    const std::list<formattables::property_info>& properties) {
+    BOOST_LOG_SEV(lg, debug) << "[New] Creating helper methods.";
     if (properties.empty()) {
-        BOOST_LOG_SEV(lg, debug) << "No properties found.";
+        BOOST_LOG_SEV(lg, debug) << "[New] No properties found.";
         return;
     }
 
-    BOOST_LOG_SEV(lg, debug) << "Properties found: " << properties.size();
+    BOOST_LOG_SEV(lg, debug) << "[New] Properties found: " << properties.size();
     std::unordered_set<std::string> types_done;
     for (const auto p : properties)
-        recursive_helper_method_creator(p.nested_name(), types_done);
+        recursive_helper_method_creator(owner, p.nested_name(), types_done);
 }
 
 void assistant::add_helper_methods(const formattables::class_info& c) {
@@ -390,16 +413,6 @@ void assistant::add_helper_methods(const formattables::class_info& c) {
                                  << " is io class implementation: '"
                                  << is_io_class_implementation << "'";
 
-    if (is_types_class_implementation) {
-        BOOST_LOG_SEV(lg, debug) << "Creating types helper methods.";
-        types::helper_methods_formatter f(c.properties());
-        f.format(stream());
-    } else {
-        BOOST_LOG_SEV(lg, debug) << "Type helper methods not required."
-                                 << " is types class implementation: '"
-                                 << is_types_class_implementation << "'";
-    }
-
     using ht = formatters::hash::traits;
     const auto h_ci_fn(ht::class_implementation_formatter_name());
     const bool is_hash_class_implementation(fn == h_ci_fn);
diff --git a/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter.stitch b/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter.stitch
index a8f462a..0ef6f38 100644
--- a/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter.stitch
+++ b/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter.stitch
@@ -13,7 +13,7 @@ dogen::formatters::file class_implementation_formatter_stitch(
 
     {
         auto sbf(a.make_scoped_boilerplate_formatter());
-        a.add_helper_methods(c);
+        a.add_helper_methods(c, c.properties());
 
         {
             auto snf(a.make_scoped_namespace_formatter(c.namespaces()));
diff --git a/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter_stitch.cpp b/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter_stitch.cpp
index 9de75a8..f4bcb4b 100644
--- a/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter_stitch.cpp
+++ b/projects/quilt.cpp/src/types/formatters/types/class_implementation_formatter_stitch.cpp
@@ -33,7 +33,7 @@ dogen::formatters::file class_implementation_formatter_stitch(
 
     {
         auto sbf(a.make_scoped_boilerplate_formatter());
-        a.add_helper_methods(c);
+        a.add_helper_methods(c, c.properties());
 
         {
             auto snf(a.make_scoped_namespace_formatter(c.namespaces()));
diff --git a/projects/quilt.cpp/src/types/formatters/types/helper_methods_formatter.cpp b/projects/quilt.cpp/src/types/formatters/types/helper_methods_formatter.cpp
deleted file mode 100644
index f21e763..0000000
--- a/projects/quilt.cpp/src/types/formatters/types/helper_methods_formatter.cpp
+++ /dev/null
@@ -1,89 +0,0 @@
-/* -*- mode: c++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*-
- *
- * Copyright (C) 2012-2015 Marco Craveiro <marco.craveiro@gmail.com>
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 3 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
- * MA 02110-1301, USA.
- *
- */
-#include "dogen/utility/log/logger.hpp"
-#include "dogen/quilt.cpp/types/formatters/formatting_error.hpp"
-#include "dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp"
-#include "dogen/quilt.cpp/types/formatters/types/helper_methods_formatter.hpp"
-
-namespace {
-
-using namespace dogen::utility::log;
-auto lg(logger_factory("quilt.cpp.formatters.types.helper_methods_formatter"));
-
-const std::string invalid_smart_pointer(
-    "Smart pointers have exactly one type argument");
-
-}
-
-namespace dogen {
-namespace quilt {
-namespace cpp {
-namespace formatters {
-namespace types {
-
-helper_methods_formatter::helper_methods_formatter(
-  const std::list<formattables::property_info>& properties)
-  : properties_(properties) {}
-
-void helper_methods_formatter::smart_pointer_helper(
-    formatters::nested_type_formatting_assistant& fa,
-    const formattables::nested_type_info& t) const {
-    const auto children(t.children());
-    if (children.size() != 1) {
-        BOOST_LOG_SEV(lg, error) << invalid_smart_pointer;
-        BOOST_THROW_EXCEPTION(formatting_error(invalid_smart_pointer));
-    }
-    smart_pointer_helper_stitch(fa, t);
-}
-
-void helper_methods_formatter::recursive_helper_method_creator(
-    formatters::nested_type_formatting_assistant& fa,
-    const formattables::nested_type_info& t,
-    std::unordered_set<std::string>& types_done) const {
-
-    if (types_done.find(t.complete_identifiable_name()) != types_done.end())
-        return;
-
-    for (const auto c : t.children())
-        recursive_helper_method_creator(fa, c, types_done);
-
-    if (t.is_smart_pointer())
-        smart_pointer_helper(fa, t);
-
-    types_done.insert(t.complete_identifiable_name());
-}
-
-void helper_methods_formatter::format(std::ostream& s) const {
-    BOOST_LOG_SEV(lg, debug) << "Creating helper methods.";
-    if (properties_.empty()) {
-        BOOST_LOG_SEV(lg, debug) << "No properties found.";
-        return;
-    }
-
-    BOOST_LOG_SEV(lg, debug) << "Properties found: " << properties_.size();
-
-    formatters::nested_type_formatting_assistant fa(s);
-    std::unordered_set<std::string> types_done;
-    for (const auto p : properties_)
-        recursive_helper_method_creator(fa, p.type(), types_done);
-}
-
-} } } } }
diff --git a/projects/quilt.cpp/src/types/formatters/types/initializer.cpp b/projects/quilt.cpp/src/types/formatters/types/initializer.cpp
index aae0ed6..11a4053 100644
--- a/projects/quilt.cpp/src/types/formatters/types/initializer.cpp
+++ b/projects/quilt.cpp/src/types/formatters/types/initializer.cpp
@@ -29,6 +29,7 @@
 #include "dogen/quilt.cpp/types/formatters/types/namespace_header_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/types/visitor_header_formatter.hpp"
 #include "dogen/quilt.cpp/types/formatters/types/forward_declarations_formatter.hpp"
+#include "dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp"
 #include "dogen/quilt.cpp/types/formatters/types/initializer.hpp"
 
 namespace dogen {
@@ -46,6 +47,7 @@ void initializer::initialize(registrar& rg) {
     initialise_formatter<namespace_header_formatter>(rg);
     initialise_formatter<visitor_header_formatter>(rg);
     initialise_formatter<forward_declarations_formatter>(rg);
+    initialise_formatter_helper<smart_pointer_helper_stitch>(rg);    
 }
 
 } } } } }
diff --git a/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper.stitch b/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper.stitch
index b35af99..89a32f8 100644
--- a/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper.stitch
+++ b/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper.stitch
@@ -3,20 +3,48 @@
 <#@ modeline_group_name=emacs #>
 <#@ stream_variable_name=a.stream() #>
 <#@ inclusion_dependency="dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp" #>
+<#@ inclusion_dependency="dogen/quilt.cpp/types/formatters/assistant.hpp" #>
+<#@ inclusion_dependency="dogen/quilt.cpp/types/formatters/types/traits.hpp" #>
 <#@ containing_namespaces=dogen::quilt::cpp::formatters::types #>
 <#+
 
-void smart_pointer_helper_stitch(
-    nested_type_formatting_assistant& a,
-    const formattables::nested_type_info& t) {
+std::string smart_pointer_helper_stitch::family() const {
+    static std::string r("Dereferenceable");
+    return r;
+}
+
+std::string smart_pointer_helper_stitch::owning_formatter() const {
+    return traits::class_implementation_formatter_name();
+}
+
+bool smart_pointer_helper_stitch::requires_explicit_call() const {
+    return false;
+}
+
+std::string smart_pointer_helper_stitch::function_name() const {
+    static std::string r("operator==");
+    return r;
+}
+
+std::string smart_pointer_helper_stitch::helper_name() const {
+    static std::string r(owning_formatter() + "." + family());
+    return r;
+}
+
+bool smart_pointer_helper_stitch::is_enabled(const assistant& /*a*/,
+    const formattables::class_info& /*owner*/) const {
+    return true;
+}
 
+void smart_pointer_helper_stitch::
+format(assistant& a, const yarn::nested_name& nn) const {
     {
-        auto snf(a.make_scoped_namespace_formatter(t.namespaces()));
-        const auto containee(t.children().front());
+        const auto ns(a.make_namespaces(nn.parent()));
+        auto snf(a.make_scoped_namespace_formatter(ns));
 #>
 
-inline bool operator==(const <#= t.complete_name() #>& lhs,
-const <#= t.complete_name() #>& rhs) {
+inline bool operator==(const <#= a.make_qualified_name(nn.parent()) #>& lhs,
+const <#= a.make_qualified_name(nn.parent())  #>& rhs) {
     return (!lhs && !rhs) ||(lhs && rhs && (*lhs == *rhs));
 }
 
diff --git a/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper_stitch.cpp b/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper_stitch.cpp
index 40e4322..5d39781 100644
--- a/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper_stitch.cpp
+++ b/projects/quilt.cpp/src/types/formatters/types/smart_pointer_helper_stitch.cpp
@@ -18,6 +18,8 @@
  * MA 02110-1301, USA.
  *
  */
+#include "dogen/quilt.cpp/types/formatters/types/traits.hpp"
+#include "dogen/quilt.cpp/types/formatters/assistant.hpp"
 #include "dogen/quilt.cpp/types/formatters/types/smart_pointer_helper_stitch.hpp"
 
 namespace dogen {
@@ -26,16 +28,42 @@ namespace cpp {
 namespace formatters {
 namespace types {
 
-void smart_pointer_helper_stitch(
-    nested_type_formatting_assistant& a,
-    const formattables::nested_type_info& t) {
+std::string smart_pointer_helper_stitch::family() const {
+    static std::string r("Dereferenceable");
+    return r;
+}
+
+std::string smart_pointer_helper_stitch::owning_formatter() const {
+    return traits::class_implementation_formatter_name();
+}
+
+bool smart_pointer_helper_stitch::requires_explicit_call() const {
+    return false;
+}
+
+std::string smart_pointer_helper_stitch::function_name() const {
+    static std::string r("operator==");
+    return r;
+}
+
+std::string smart_pointer_helper_stitch::helper_name() const {
+    static std::string r(owning_formatter() + "." + family());
+    return r;
+}
+
+bool smart_pointer_helper_stitch::is_enabled(const assistant& /*a*/,
+    const formattables::class_info& /*owner*/) const {
+    return true;
+}
 
+void smart_pointer_helper_stitch::
+format(assistant& a, const yarn::nested_name& nn) const {
     {
-        auto snf(a.make_scoped_namespace_formatter(t.namespaces()));
-        const auto containee(t.children().front());
+        const auto ns(a.make_namespaces(nn.parent()));
+        auto snf(a.make_scoped_namespace_formatter(ns));
 a.stream() << std::endl;
-a.stream() << "inline bool operator==(const " << t.complete_name() << "& lhs," << std::endl;
-a.stream() << "const " << t.complete_name() << "& rhs) {" << std::endl;
+a.stream() << "inline bool operator==(const " << a.make_qualified_name(nn.parent()) << "& lhs," << std::endl;
+a.stream() << "const " << a.make_qualified_name(nn.parent()) << "& rhs) {" << std::endl;
 a.stream() << "    return (!lhs && !rhs) ||(lhs && rhs && (*lhs == *rhs));" << std::endl;
 a.stream() << "}" << std::endl;
 a.stream() << std::endl;
